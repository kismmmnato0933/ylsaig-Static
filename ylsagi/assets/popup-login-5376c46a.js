import{_ as me,o as oe,c as se,q as Pe,s as Re,F as Ce,r as Ee,a as J,t as fe,n as ye,g as he,p as _e,b as we,Y as Me,Z as Le,V as Be,w as Te,B as xe,e as ke,h as Ne,f as je,k as Ae}from"./index-022e0116.js";import{T as Ue}from"./index-f63eae91.js";import{c as ce}from"./_commonjsHelpers-87174ba5.js";const qe=""+new URL("../img/StripeClimateBadge.svg",import.meta.url).href;const De={},ze={class:"Climate"},Fe=Pe('<div class="iconView" data-v-68025a1b><div class="ico" data-v-68025a1b><img loading="lazy" src="'+qe+'" alt="Climate图标" width="50" height="50" data-v-68025a1b></div><div class="name" data-v-68025a1b>Stripe Climate</div><div class="t2" data-v-68025a1b>除碳事业企业联盟</div></div><div class="infoView" data-v-68025a1b><div class="t1 gradient_text" data-v-68025a1b>为我们共同的未来而行动</div><div data-v-68025a1b><div class="t3" data-v-68025a1b><span style="font-weight:bold;" data-v-68025a1b>伊莉思AGI </span>(Hong Kong) 将收入的 一部分捐助给 <span style="font-weight:bold;" data-v-68025a1b>Stripe Climate</span> 除碳项目 和 <span style="font-weight:bold;" data-v-68025a1b>哔哩哔哩公益</span> 公益教育 </div><div class="t3" data-v-68025a1b> 支持 <span style="font-weight:bold;" data-v-68025a1b>联合国17项可持续发展目标</span>，创造更美好的世界的蓝图。我们不必等待我们想要的未来 </div><div class="t3" data-v-68025a1b> 我们现在就可以创造它。 <span style="font-weight:bold;" data-v-68025a1b>每个人都可以加入</span></div></div><div class="Btn_View" data-v-68025a1b><a class="Main_Btn" href="https://climate.stripe.com/C7dNsU" target="_blank" data-v-68025a1b><i class="iconfont icon-Leaves" data-v-68025a1b></i><div data-v-68025a1b>除碳捐助</div></a><a class="Main_Btn" href="/education" data-v-68025a1b><i class="iconfont icon-xuexi" data-v-68025a1b></i><div data-v-68025a1b>教育捐助</div></a><a class="Main_Btn" href="https://sdgs.un.org/zh/goals" target="_blank" data-v-68025a1b><i class="iconfont icon-wangluobeifen" data-v-68025a1b></i><div data-v-68025a1b>了解可持续发展目标</div></a></div></div>',2),Ve=[Fe];function He(X,re){return oe(),se("div",ze,Ve)}const xr=me(De,[["render",He],["__scopeId","data-v-68025a1b"]]);function $e(X){return Re({url:"/tolinks/v2/pay/checkout",method:"get",params:X})}const We={data(){return{priceList:[{name:"免费版",cny:"￥0.00",recommend:"体验",originalPrice:"￥0.00",price:"31B",modelList:[{icon:"icon-liwu",title:"新用户礼",text:"注册登录送5W Byte"},{icon:"icon-a-GPT35",title:"GPT-4o Mini",text:"签到领取Byte"},{icon:"icon-github-fill",title:"GPT-4 Copilot",text:"签到领取Byte"},{icon:"icon-logo_google",title:"Gemini 1.5 Pro",text:"签到领取Byte"},{icon:"icon-openai",title:"ChatGPT-4o",text:"签到领取Byte"}]},{name:"基础会员",cny:"￥31.00",recommend:"体验",originalPrice:"￥49.00",price:"31B",modelList:[{icon:"icon-a-GPT35",title:"GPT-4o Mini",text:"无限使用 / 沉浸式翻译",hint:!0},{icon:"icon-github-fill",title:"GPT4-Copilot",text:"无限使用"},{icon:"icon-openai",title:"ChatGPT-4o",text:"无限使用"},{icon:"icon-logo_google",title:"Gemini 1.5 Pro",text:"无限使用"},{icon:"icon-GPT4",title:"GPT-4 / Claude / LLama",text:"100W Byte",hint:!0},{icon:"icon-openai",title:"ChatGPT 镜像站",text:"3小时60条消息",hint:!0}]},{name:"Pro会员",recommend:"推荐",cny:"￥56.00",originalPrice:"￥84.00",price:"56B",modelList:[{icon:"icon-a-GPT35",title:"GPT-4o Mini",text:"无限使用 / 沉浸式翻译",hint:!0},{icon:"icon-github-fill",title:"GPT4-Copilot",text:"无限使用"},{icon:"icon-openai",title:"ChatGPT-4o",text:"无限使用"},{icon:"icon-logo_google",title:"Gemini 1.5 Pro",text:"无限使用"},{icon:"icon-GPT4",title:"GPT-4 / Claude / LLama",text:"300W Byte",hint:!0},{icon:"icon-openai",title:"ChatGPT 镜像站",text:"3小时80条消息",hint:!0}]},{name:"Plus会员",recommend:"豪华",cny:"￥112.00",originalPrice:"￥140.00",price:"112B",modelList:[{icon:"icon-a-GPT35",title:"GPT-4o Mini",text:"无限使用 / 沉浸式翻译",hint:!0},{icon:"icon-github-fill",title:"GPT4-Copilot",text:"无限使用"},{icon:"icon-openai",title:"ChatGPT-4o",text:"无限使用"},{icon:"icon-logo_google",title:"Gemini 1.5 Pro",text:"无限使用"},{icon:"icon-GPT4",title:"GPT-4 / Claude / LLama",text:"500W Byte",hint:!0},{icon:"icon-openai",title:"ChatGPT 镜像站",text:"3小时100条消息",hint:!0}]}]}},methods:{getUrl(X){if(!this.$store.state.login){this.$tips.open_L_A({msg:"请先登录后再试",type:"error"});return}let re=this.$store.state.userInfo._id;$e({price:X,uid:re}).then(A=>{let z=A.data.url;window.location.href=z}).catch(A=>{console.log(A),this.$tips.open_L_A({msg:A,type:"error"})})}}},Se=X=>(_e("data-v-87a98931"),X=X(),we(),X),Qe={class:"list"},Ke={class:"info"},Ge={class:"title"},Ye={class:"name gradient_text"},Ze={class:"recommend"},Je={class:"modelList"},Xe={class:"iconView"},et={class:"ct1"},tt={class:"t1"},rt={class:"t3"},nt=Se(()=>J("a",{href:"/md"},[J("div",null,"了解更多"),J("i",{class:"iconfont icon-jinrujiantouxiao"})],-1)),it={class:"price"},ot={class:"setting"},st={key:0,class:"cny"},at={class:"Price"},lt=Se(()=>J("div",{class:"day"},"31天",-1)),ut={class:"originalPrice"},ct={key:1,class:"btnV"},ht=Se(()=>J("a",{class:"Main_Btn",href:"/app"},"小程序(首页签到)",-1)),ft=[ht],pt={key:2,class:"btnV"},dt=["onClick"];function gt(X,re,A,z,L,_){return oe(),se("div",Qe,[(oe(!0),se(Ce,null,Ee(L.priceList,(f,d)=>(oe(),se("div",{class:"item",key:d},[J("div",Ke,[J("div",Ge,[J("div",Ye,fe(f.name),1),J("div",Ze,fe(f.recommend),1)]),J("div",Je,[(oe(!0),se(Ce,null,Ee(f.modelList,(u,i)=>(oe(),se("div",{class:ye(["text",{hint:u.hint}]),key:i},[J("div",Xe,[J("i",{class:ye(["iconfont",u.icon])},null,2)]),J("div",et,[J("div",tt,fe(u.title),1),J("div",rt,fe(u.text),1)])],2))),128)),nt])]),J("div",it,[J("div",ot,[f.name!="免费版"?(oe(),se("div",st,[J("div",at,[J("div",null,fe(f.cny)+"/",1),lt]),J("div",ut,fe(f.originalPrice),1)])):he("",!0),f.name=="免费版"?(oe(),se("div",ct,ft)):(oe(),se("div",pt,[J("div",{class:"Main_Btn",onClick:u=>_.getUrl(f.price)},"立即购买",8,dt)]))])])]))),128))])}const mt=me(We,[["render",gt],["__scopeId","data-v-87a98931"]]),yt=""+new URL("../img/2.png",import.meta.url).href;const bt={},vt={class:"content left-layout"},_t=Pe('<div class="info" data-v-7b11d11d><div class="auscrollView" data-v-7b11d11d><div class="introduce" data-v-7b11d11d><img class="image" src="'+yt+'" alt="伊莉思镜像" data-v-7b11d11d><div class="G_title" data-v-7b11d11d>ChatGPT 官网服务</div><div class="t2" data-v-7b11d11d>原版UI界面, 内置企业级team/plus节点，</div><div class="t2" data-v-7b11d11d> 支持GPT4o等最新模型 / GPTs / Dall-e绘图 / 文档 / 更多高级功能 </div></div><div class="switch" data-v-7b11d11d><div class="index" data-v-7b11d11d></div><div class="index" data-v-7b11d11d></div><div class="index" data-v-7b11d11d></div></div></div><div class="modelList" data-v-7b11d11d><div class="model" data-v-7b11d11d><i class="iconfont icon-openai" data-v-7b11d11d></i><div class="name" data-v-7b11d11d>GPT-3/4/4O</div></div><div class="model" data-v-7b11d11d><i class="iconfont icon-logo_google" data-v-7b11d11d></i><div class="name" data-v-7b11d11d>Gemin 1.5</div></div><div class="model" data-v-7b11d11d><i class="iconfont icon-a-ico_huaban1" data-v-7b11d11d></i><div class="name" data-v-7b11d11d>Claude 3.5</div></div><div class="model" data-v-7b11d11d><i class="iconfont icon-github-fill" data-v-7b11d11d></i><div class="name" data-v-7b11d11d>Copilot</div></div></div></div>',1),wt=[_t];function kt(X,re){return oe(),se("div",vt,wt)}const St=me(bt,[["render",kt],["__scopeId","data-v-7b11d11d"]]),Ct=""+new URL("../img/linkIco/google.png",import.meta.url).href,Et=""+new URL("../img/linkIco/github.svg",import.meta.url).href;const Ie=new Ue({authorizerURL:"https://auth.ylsagi.io",redirectURL:window.location.origin+"/login",clientID:"5061d570-6d2f-4937-a235-300dbd76b7fb"}),Tt={name:"login",data(){return{status:0,email:"",emailCode:"",count:60,disabled:!1,loading:!1,is_login:!1}},methods:{async googleLogin(){const X=await Ie.oauthLogin("google");console.warn(X)},async githubLogin(){const X=await Ie.oauthLogin("github");console.warn(X)},onGetCode(){if(this.loading||this.disabled){this.$tips.open_C_A({msg:"请稍后再试",type:"error"});return}if(this.email==""){this.$tips.open_C_A({msg:"邮箱不能为空",type:"error"});return}this.loading=!0,this.$tips.open_C({msg:"获取验证码中",type:"loading"}),Me({email:this.email}).then(X=>{console.log(X),this.$tips.close(),this.$tips.open_L_A({msg:"验证码已发送",type:"success"}),this.status=1,this.emailCode="",this.disabled=!0;let re=setInterval(()=>{this.count--,this.count==0&&(clearInterval(re),this.count=60,this.disabled=!1)},1e3)}).catch(X=>{console.error(X),this.$tips.open_C_A({msg:X,type:"error"})}).finally(()=>{this.loading=!1})},onBack(){this.status=0},onCodeLogin(){let X=this.email,re=this.emailCode;if(console.log({email:X,code:re}),console.log(this.is_login),!this.is_login){if(this.is_login=!0,X==""||re==""){this.$tips.open_C_A({msg:"验证码不能为空",type:"error"});return}Le({email:X,code:re}).then(A=>{Be().then(z=>{z.code==200&&(this.$store.state.userInfo=z.data,this.$store.state.login=!0,this.$tips.open_C_A({msg:"登录成功",type:"success"}),this.$emit("hide"))})}).catch(A=>{console.error(A),this.$tips.open_C_A({msg:A,type:"error"})}).finally(()=>{this.is_login=!1})}}}},de=X=>(_e("data-v-c4fcd617"),X=X(),we(),X),xt={class:"emailLoginView"},At={key:0},It=de(()=>J("img",{class:"logoIcon",src:Ct,alt:"google"},null,-1)),Pt=de(()=>J("div",null,"使用 Google 登录",-1)),Bt=[It,Pt],Ot=de(()=>J("img",{class:"logoIcon",src:Et,alt:"github"},null,-1)),Rt=de(()=>J("div",null,"使用 Github 登录",-1)),Mt=[Ot,Rt],Lt={class:"emailLoginBtn"},Nt={class:"titleView"},jt=de(()=>J("div",{class:"t1"},"使用邮箱验证登录",-1)),Ut={key:0,class:"status"},qt={class:"inputBox"},Dt=de(()=>J("div",null,"快速登录/注册",-1)),zt=[Dt],Ft={key:1},Vt={class:"emailLoginBtn"},Ht={class:"titleView"},$t={class:"t1"},Wt={class:"inputBox"},Qt=de(()=>J("div",null,"确认",-1)),Kt=[Qt];function Gt(X,re,A,z,L,_){return oe(),se("div",xt,[L.status==0?(oe(),se("div",At,[J("div",{class:"ShortcutButton",onClick:re[0]||(re[0]=(...f)=>_.googleLogin&&_.googleLogin(...f))},Bt),J("div",{class:"ShortcutButton",onClick:re[1]||(re[1]=(...f)=>_.githubLogin&&_.githubLogin(...f))},Mt),J("div",Lt,[J("div",Nt,[J("div",null,[jt,L.disabled?(oe(),se("div",Ut,fe(L.count)+"s 后可以再次获取 ",1)):he("",!0)])]),J("div",qt,[Te(J("input",{class:"email_input",type:"email",length:"30",name:"emailStr",placeholder:"请输入邮箱","onUpdate:modelValue":re[2]||(re[2]=f=>L.email=f)},null,512),[[xe,L.email]])]),J("div",{class:"loginBtn",onClick:re[3]||(re[3]=(...f)=>_.onGetCode&&_.onGetCode(...f))},zt)])])):he("",!0),L.status==1?(oe(),se("div",Ft,[J("div",Vt,[J("div",Ht,[J("i",{class:"iconfont icon-back",title:"返回",onClick:re[4]||(re[4]=(...f)=>_.onBack&&_.onBack(...f))}),J("div",$t,"登录 "+fe(L.email),1)]),J("div",Wt,[Te(J("input",{class:"code_input",type:"text",name:"emailCode",placeholder:"输入验证码","onUpdate:modelValue":re[5]||(re[5]=f=>L.emailCode=f),maxlength:"6"},null,512),[[xe,L.emailCode]])]),J("div",{class:"loginBtn",onClick:re[6]||(re[6]=(...f)=>_.onCodeLogin&&_.onCodeLogin(...f))},Kt)])])):he("",!0)])}const Yt=me(Tt,[["render",Gt],["__scopeId","data-v-c4fcd617"]]);function ve(X){throw new Error('Could not dynamically require "'+X+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Oe={exports:{}};(function(X,re){(function(A){X.exports=A()})(function(){return function(){return function A(z,L,_){function f(i,e){if(!L[i]){if(!z[i]){var a=typeof ve=="function"&&ve;if(!e&&a)return a(i,!0);if(d)return d(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var t=L[i]={exports:{}};z[i][0].call(t.exports,function(o){return f(z[i][1][o]||o)},t,t.exports,A,z,L,_)}return L[i].exports}for(var d=typeof ve=="function"&&ve,u=0;u<_.length;u++)f(_[u]);return f}}()({1:[function(A,z,L){(function(_,f){(function(){const d=A("events").EventEmitter,u=A("./store"),i=A("./topic-alias-recv"),e=A("./topic-alias-send"),a=A("mqtt-packet"),n=A("./default-message-id-provider"),t=A("readable-stream").Writable,o=A("inherits"),h=A("reinterval"),l=A("rfdc/default"),p=A("./validations"),g=A("xtend"),c=A("debug")("mqttjs:client"),v=_?_.nextTick:function(w){setTimeout(w,0)},x=f.setImmediate||function(w){v(w)},C={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},E=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],k={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function V(w,I){let N;I.properties&&(N=I.properties.topicAlias);let D=I.topic.toString();if(D.length===0){if(N===void 0)return new Error("Unregistered Topic Alias");if((D=w.topicAliasSend.getTopicByAlias(N))===void 0)return new Error("Unregistered Topic Alias");I.topic=D}N&&delete I.properties.topicAlias}function Q(w,I,N){c("sendPacket :: packet: %O",I),c("sendPacket :: emitting `packetsend`"),w.emit("packetsend",I),c("sendPacket :: writing to stream");const D=a.writeToStream(I,w.stream,w.options);c("sendPacket :: writeToStream result %s",D),!D&&N&&N!==m?(c("sendPacket :: handle events on `drain` once through callback."),w.stream.once("drain",N)):N&&(c("sendPacket :: invoking cb"),N())}function y(w,I,N,D){c("storeAndSend :: store packet with cmd %s to outgoingStore",I.cmd);let M,P=I;if(P.cmd==="publish"&&(P=l(I),M=V(w,P)))return N&&N(M);w.outgoingStore.put(P,function(O){if(O)return N&&N(O);D(),Q(w,I,N)})}function m(w){c("nop ::",w)}function S(w,I){let N;const D=this;if(!(this instanceof S))return new S(w,I);for(N in this.options=I||{},C)this.options[N]===void 0?this.options[N]=C[N]:this.options[N]=I[N];c("MqttClient :: options.protocol",I.protocol),c("MqttClient :: options.protocolVersion",I.protocolVersion),c("MqttClient :: options.username",I.username),c("MqttClient :: options.keepalive",I.keepalive),c("MqttClient :: options.reconnectPeriod",I.reconnectPeriod),c("MqttClient :: options.rejectUnauthorized",I.rejectUnauthorized),c("MqttClient :: options.topicAliasMaximum",I.topicAliasMaximum),this.options.clientId=typeof I.clientId=="string"?I.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),c("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=I.protocolVersion===5&&I.customHandleAcks?I.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=w,this.messageIdProvider=this.options.messageIdProvider===void 0?new n:this.options.messageIdProvider,this.outgoingStore=I.outgoingStore||new u,this.incomingStore=I.incomingStore||new u,this.queueQoSZero=I.queueQoSZero===void 0||I.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,I.topicAliasMaximum>0&&(I.topicAliasMaximum>65535?c("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new i(I.topicAliasMaximum)),this.on("connect",function(){const M=this.queue;c("connect :: sending queued packets"),function P(){const O=M.shift();c("deliver :: entry %o",O);let R=null;if(!O)return void D._resubscribe();R=O.packet,c("deliver :: call _sendPacket for %o",R);let B=!0;R.messageId&&R.messageId!==0&&(D.messageIdProvider.register(R.messageId)||(B=!1)),B?D._sendPacket(R,function(U){O.cb&&O.cb(U),P()}):(c("messageId: %d has already used. The message is skipped and removed.",R.messageId),P())}()}),this.on("close",function(){c("close :: connected set to `false`"),this.connected=!1,c("close :: clearing connackTimer"),clearTimeout(this.connackTimer),c("close :: clearing ping timer"),D.pingTimer!==null&&(D.pingTimer.clear(),D.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),c("close :: calling _setupReconnect"),this._setupReconnect()}),d.call(this),c("MqttClient :: setting up stream"),this._setupStream()}o(S,d),S.prototype._setupStream=function(){const w=this,I=new t,N=a.parser(this.options);let D=null;const M=[];function P(){if(M.length)v(O);else{const B=D;D=null,B()}}function O(){c("work :: getting next packet in queue");const B=M.shift();if(B)c("work :: packet pulled from queue"),w._handlePacket(B,P);else{c("work :: no packets in queue");const U=D;D=null,c("work :: done flag is %s",!!U),U&&U()}}c("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),c("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),N.on("packet",function(B){c("parser :: on packet push to packets array."),M.push(B)}),I._write=function(B,U,H){D=H,c("writable stream :: parsing buffer"),N.parse(B),O()},c("_setupStream :: pipe stream to writable stream"),this.stream.pipe(I),this.stream.on("error",function(B){c("streamErrorHandler :: error",B.message),E.includes(B.code)?(c("streamErrorHandler :: emitting error"),w.emit("error",B)):m(B)}),this.stream.on("close",function(){var B;c("(%s)stream :: on close",w.options.clientId),(B=w.outgoing)&&(c("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(B).forEach(function(U){B[U].volatile&&typeof B[U].cb=="function"&&(B[U].cb(new Error("Connection closed")),delete B[U])})),c("stream: emit close to MqttClient"),w.emit("close")}),c("_setupStream: sending packet `connect`");const R=Object.create(this.options);if(R.cmd="connect",this.topicAliasRecv&&(R.properties||(R.properties={}),this.topicAliasRecv&&(R.properties.topicAliasMaximum=this.topicAliasRecv.max)),Q(this,R),N.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return w.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&typeof this.options.authPacket=="object"&&Q(this,g({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){c("!!connectTimeout hit!! Calling _cleanUp with force `true`"),w._cleanUp(!0)},this.options.connectTimeout)},S.prototype._handlePacket=function(w,I){const N=this.options;if(N.protocolVersion===5&&N.properties&&N.properties.maximumPacketSize&&N.properties.maximumPacketSize<w.length)return this.emit("error",new Error("exceeding packets size "+w.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(c("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",w),w.cmd){case"publish":this._handlePublish(w,I);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(w),I();break;case"pubrel":this._handlePubrel(w,I);break;case"connack":this._handleConnack(w),I();break;case"auth":this._handleAuth(w),I();break;case"pingresp":this._handlePingresp(w),I();break;case"disconnect":this._handleDisconnect(w),I()}},S.prototype._checkDisconnecting=function(w){return this.disconnecting&&(w&&w!==m?w(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},S.prototype.publish=function(w,I,N,D){c("publish :: message `%s` to topic `%s`",I,w);const M=this.options;if(typeof N=="function"&&(D=N,N=null),N=g({qos:0,retain:!1,dup:!1},N),this._checkDisconnecting(D))return this;const P=this,O=function(){let R=0;if((N.qos===1||N.qos===2)&&(R=P._nextId())===null)return c("No messageId left"),!1;const B={cmd:"publish",topic:w,payload:I,qos:N.qos,retain:N.retain,messageId:R,dup:N.dup};switch(M.protocolVersion===5&&(B.properties=N.properties),c("publish :: qos",N.qos),N.qos){case 1:case 2:P.outgoing[B.messageId]={volatile:!1,cb:D||m},c("MqttClient:publish: packet cmd: %s",B.cmd),P._sendPacket(B,void 0,N.cbStorePut);break;default:c("MqttClient:publish: packet cmd: %s",B.cmd),P._sendPacket(B,D,N.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!O())&&this._storeProcessingQueue.push({invoke:O,cbStorePut:N.cbStorePut,callback:D}),this},S.prototype.subscribe=function(){const w=this,I=new Array(arguments.length);for(let F=0;F<arguments.length;F++)I[F]=arguments[F];const N=[];let D=I.shift();const M=D.resubscribe;let P=I.pop()||m,O=I.pop();const R=this.options.protocolVersion;delete D.resubscribe,typeof D=="string"&&(D=[D]),typeof P!="function"&&(O=P,P=m);const B=p.validateTopics(D);if(B!==null)return x(P,new Error("Invalid topic "+B)),this;if(this._checkDisconnecting(P))return c("subscribe: discconecting true"),this;const U={qos:0};if(R===5&&(U.nl=!1,U.rap=!1,U.rh=0),O=g(U,O),Array.isArray(D)?D.forEach(function(F){if(c("subscribe: array topic %s",F),!Object.prototype.hasOwnProperty.call(w._resubscribeTopics,F)||w._resubscribeTopics[F].qos<O.qos||M){const W={topic:F,qos:O.qos};R===5&&(W.nl=O.nl,W.rap=O.rap,W.rh=O.rh,W.properties=O.properties),c("subscribe: pushing topic `%s` and qos `%s` to subs list",W.topic,W.qos),N.push(W)}}):Object.keys(D).forEach(function(F){if(c("subscribe: object topic %s",F),!Object.prototype.hasOwnProperty.call(w._resubscribeTopics,F)||w._resubscribeTopics[F].qos<D[F].qos||M){const W={topic:F,qos:D[F].qos};R===5&&(W.nl=D[F].nl,W.rap=D[F].rap,W.rh=D[F].rh,W.properties=O.properties),c("subscribe: pushing `%s` to subs list",W),N.push(W)}}),!N.length)return P(null,[]),this;const H=function(){const F=w._nextId();if(F===null)return c("No messageId left"),!1;const W={cmd:"subscribe",subscriptions:N,qos:1,retain:!1,dup:!1,messageId:F};if(O.properties&&(W.properties=O.properties),w.options.resubscribe){c("subscribe :: resubscribe true");const K=[];N.forEach(function(G){if(w.options.reconnectPeriod>0){const r={qos:G.qos};R===5&&(r.nl=G.nl||!1,r.rap=G.rap||!1,r.rh=G.rh||0,r.properties=G.properties),w._resubscribeTopics[G.topic]=r,K.push(G.topic)}}),w.messageIdToTopic[W.messageId]=K}return w.outgoing[W.messageId]={volatile:!0,cb:function(K,G){if(!K){const r=G.granted;for(let s=0;s<r.length;s+=1)N[s].qos=r[s]}P(K,N)}},c("subscribe :: call _sendPacket"),w._sendPacket(W),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!H())&&this._storeProcessingQueue.push({invoke:H,callback:P}),this},S.prototype.unsubscribe=function(){const w=this,I=new Array(arguments.length);for(let R=0;R<arguments.length;R++)I[R]=arguments[R];let N=I.shift(),D=I.pop()||m,M=I.pop();typeof N=="string"&&(N=[N]),typeof D!="function"&&(M=D,D=m);const P=p.validateTopics(N);if(P!==null)return x(D,new Error("Invalid topic "+P)),this;if(w._checkDisconnecting(D))return this;const O=function(){const R=w._nextId();if(R===null)return c("No messageId left"),!1;const B={cmd:"unsubscribe",qos:1,messageId:R};return typeof N=="string"?B.unsubscriptions=[N]:Array.isArray(N)&&(B.unsubscriptions=N),w.options.resubscribe&&B.unsubscriptions.forEach(function(U){delete w._resubscribeTopics[U]}),typeof M=="object"&&M.properties&&(B.properties=M.properties),w.outgoing[B.messageId]={volatile:!0,cb:D},c("unsubscribe: call _sendPacket"),w._sendPacket(B),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!O())&&this._storeProcessingQueue.push({invoke:O,callback:D}),this},S.prototype.end=function(w,I,N){const D=this;function M(){c("end :: (%s) :: finish :: calling _cleanUp with force %s",D.options.clientId,w),D._cleanUp(w,()=>{c("end :: finish :: calling process.nextTick on closeStores"),v(function(){c("end :: closeStores: closing incoming and outgoing stores"),D.disconnected=!0,D.incomingStore.close(function(P){D.outgoingStore.close(function(O){if(c("end :: closeStores: emitting end"),D.emit("end"),N){const R=P||O;c("end :: closeStores: invoking callback with args"),N(R)}})}),D._deferredReconnect&&D._deferredReconnect()}.bind(D))},I)}return c("end :: (%s)",this.options.clientId),w!=null&&typeof w=="boolean"||(N=I||m,I=w,w=!1,typeof I!="object"&&(N=I,I=null,typeof N!="function"&&(N=m))),typeof I!="object"&&(N=I,I=null),c("end :: cb? %s",!!N),N=N||m,this.disconnecting?(N(),this):(this._clearReconnect(),this.disconnecting=!0,!w&&Object.keys(this.outgoing).length>0?(c("end :: (%s) :: calling finish in 10ms once outgoing is empty",D.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,M,10))):(c("end :: (%s) :: immediately calling finish",D.options.clientId),M()),this)},S.prototype.removeOutgoingMessage=function(w){const I=this.outgoing[w]?this.outgoing[w].cb:null;return delete this.outgoing[w],this.outgoingStore.del({messageId:w},function(){I(new Error("Message removed"))}),this},S.prototype.reconnect=function(w){c("client reconnect");const I=this,N=function(){w?(I.options.incomingStore=w.incomingStore,I.options.outgoingStore=w.outgoingStore):(I.options.incomingStore=null,I.options.outgoingStore=null),I.incomingStore=I.options.incomingStore||new u,I.outgoingStore=I.options.outgoingStore||new u,I.disconnecting=!1,I.disconnected=!1,I._deferredReconnect=null,I._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=N:N(),this},S.prototype._reconnect=function(){c("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),c("client already connected. disconnecting first.")):(c("_reconnect: calling _setupStream"),this._setupStream())},S.prototype._setupReconnect=function(){const w=this;!w.disconnecting&&!w.reconnectTimer&&w.options.reconnectPeriod>0?(this.reconnecting||(c("_setupReconnect :: emit `offline` state"),this.emit("offline"),c("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),c("_setupReconnect :: setting reconnectTimer for %d ms",w.options.reconnectPeriod),w.reconnectTimer=setInterval(function(){c("reconnectTimer :: reconnect triggered!"),w._reconnect()},w.options.reconnectPeriod)):c("_setupReconnect :: doing nothing...")},S.prototype._clearReconnect=function(){c("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},S.prototype._cleanUp=function(w,I){const N=arguments[2];if(I&&(c("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",I)),c("_cleanUp :: forced? %s",w),w)this.options.reconnectPeriod===0&&this.options.clean&&(D=this.outgoing)&&(c("flush: queue exists? %b",!!D),Object.keys(D).forEach(function(M){typeof D[M].cb=="function"&&(D[M].cb(new Error("Connection closed")),delete D[M])})),c("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const M=g({cmd:"disconnect"},N);c("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(M,x.bind(null,this.stream.end.bind(this.stream)))}var D;this.disconnecting||(c("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),this.pingTimer!==null&&(c("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),I&&!this.connected&&(c("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",I),I())},S.prototype._sendPacket=function(w,I,N){c("_sendPacket :: (%s) ::  start",this.options.clientId),N=N||m,I=I||m;const D=function(M,P){if(M.options.protocolVersion===5&&P.cmd==="publish"){let O;P.properties&&(O=P.properties.topicAlias);const R=P.topic.toString();if(M.topicAliasSend)if(O){if(R.length!==0&&(c("applyTopicAlias :: register topic: %s - alias: %d",R,O),!M.topicAliasSend.put(R,O)))return c("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,O),new Error("Sending Topic Alias out of range")}else R.length!==0&&(M.options.autoAssignTopicAlias?(O=M.topicAliasSend.getAliasByTopic(R))?(P.topic="",P.properties={...P.properties,topicAlias:O},c("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",R,O)):(O=M.topicAliasSend.getLruAlias(),M.topicAliasSend.put(R,O),P.properties={...P.properties,topicAlias:O},c("applyTopicAlias :: auto assign topic: %s - alias: %d",R,O)):M.options.autoUseTopicAlias&&(O=M.topicAliasSend.getAliasByTopic(R))&&(P.topic="",P.properties={...P.properties,topicAlias:O},c("applyTopicAlias :: auto use topic: %s - alias: %d",R,O)));else if(O)return c("applyTopicAlias :: error out of range. topic: %s - alias: %d",R,O),new Error("Sending Topic Alias out of range")}}(this,w);if(D)I(D);else{if(!this.connected)return w.cmd==="auth"?(this._shiftPingInterval(),void Q(this,w,I)):(c("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(w,I,N));switch(this._shiftPingInterval(),w.cmd){case"publish":break;case"pubrel":return void y(this,w,I,N);default:return void Q(this,w,I)}switch(w.qos){case 2:case 1:y(this,w,I,N);break;case 0:default:Q(this,w,I)}c("_sendPacket :: (%s) ::  end",this.options.clientId)}},S.prototype._storePacket=function(w,I,N){c("_storePacket :: packet: %o",w),c("_storePacket :: cb? %s",!!I),N=N||m;let D=w;if(D.cmd==="publish"){const M=V(this,D=l(w));if(M)return I&&I(M)}(D.qos||0)===0&&this.queueQoSZero||D.cmd!=="publish"?this.queue.push({packet:D,cb:I}):D.qos>0?(I=this.outgoing[D.messageId]?this.outgoing[D.messageId].cb:null,this.outgoingStore.put(D,function(M){if(M)return I&&I(M);N()})):I&&I(new Error("No connection to broker"))},S.prototype._setupPingTimer=function(){c("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const w=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=h(function(){w._checkPing()},1e3*this.options.keepalive))},S.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},S.prototype._checkPing=function(){c("_checkPing :: checking ping..."),this.pingResp?(c("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(c("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},S.prototype._handlePingresp=function(){this.pingResp=!0},S.prototype._handleConnack=function(w){c("_handleConnack");const I=this.options,N=I.protocolVersion===5?w.reasonCode:w.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,w.properties){if(w.properties.topicAliasMaximum){if(w.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));w.properties.topicAliasMaximum>0&&(this.topicAliasSend=new e(w.properties.topicAliasMaximum))}w.properties.serverKeepAlive&&I.keepalive&&(I.keepalive=w.properties.serverKeepAlive,this._shiftPingInterval()),w.properties.maximumPacketSize&&(I.properties||(I.properties={}),I.properties.maximumPacketSize=w.properties.maximumPacketSize)}if(N===0)this.reconnecting=!1,this._onConnect(w);else if(N>0){const D=new Error("Connection refused: "+k[N]);D.code=N,this.emit("error",D)}},S.prototype._handleAuth=function(w){const I=this.options.protocolVersion,N=I===5?w.reasonCode:w.returnCode;if(I!==5){const M=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+I);return M.code=N,void this.emit("error",M)}const D=this;this.handleAuth(w,function(M,P){if(M)D.emit("error",M);else if(N===24)D.reconnecting=!1,D._sendPacket(P);else{const O=new Error("Connection refused: "+k[N]);M.code=N,D.emit("error",O)}})},S.prototype.handleAuth=function(w,I){I()},S.prototype._handlePublish=function(w,I){c("_handlePublish: packet %o",w),I=I!==void 0?I:m;let N=w.topic.toString();const D=w.payload,M=w.qos,P=w.messageId,O=this,R=this.options,B=[0,16,128,131,135,144,145,151,153];if(this.options.protocolVersion===5){let U;if(w.properties&&(U=w.properties.topicAlias),U!==void 0)if(N.length===0){if(!(U>0&&U<=65535))return c("_handlePublish :: topic alias out of range. alias: %d",U),void this.emit("error",new Error("Received Topic Alias is out of range"));{const H=this.topicAliasRecv.getTopicByAlias(U);if(!H)return c("_handlePublish :: unregistered topic alias. alias: %d",U),void this.emit("error",new Error("Received unregistered Topic Alias"));c("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",N=H,U)}}else{if(!this.topicAliasRecv.put(N,U))return c("_handlePublish :: topic alias out of range. alias: %d",U),void this.emit("error",new Error("Received Topic Alias is out of range"));c("_handlePublish :: registered topic: %s - alias: %d",N,U)}}switch(c("_handlePublish: qos %d",M),M){case 2:R.customHandleAcks(N,D,w,function(U,H){return U instanceof Error||(H=U,U=null),U?O.emit("error",U):B.indexOf(H)===-1?O.emit("error",new Error("Wrong reason code for pubrec")):void(H?O._sendPacket({cmd:"pubrec",messageId:P,reasonCode:H},I):O.incomingStore.put(w,function(){O._sendPacket({cmd:"pubrec",messageId:P},I)}))});break;case 1:R.customHandleAcks(N,D,w,function(U,H){return U instanceof Error||(H=U,U=null),U?O.emit("error",U):B.indexOf(H)===-1?O.emit("error",new Error("Wrong reason code for puback")):(H||O.emit("message",N,D,w),void O.handleMessage(w,function(F){if(F)return I&&I(F);O._sendPacket({cmd:"puback",messageId:P,reasonCode:H},I)}))});break;case 0:this.emit("message",N,D,w),this.handleMessage(w,I);break;default:c("_handlePublish: unknown QoS. Doing nothing.")}},S.prototype.handleMessage=function(w,I){I()},S.prototype._handleAck=function(w){const I=w.messageId,N=w.cmd;let D=null;const M=this.outgoing[I]?this.outgoing[I].cb:null,P=this;let O;if(M){switch(c("_handleAck :: packet type",N),N){case"pubcomp":case"puback":{const R=w.reasonCode;R&&R>0&&R!==16&&((O=new Error("Publish error: "+k[R])).code=R,M(O,w)),delete this.outgoing[I],this.outgoingStore.del(w,M),this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue();break}case"pubrec":{D={cmd:"pubrel",qos:2,messageId:I};const R=w.reasonCode;R&&R>0&&R!==16?((O=new Error("Publish error: "+k[R])).code=R,M(O,w)):this._sendPacket(D);break}case"suback":delete this.outgoing[I],this.messageIdProvider.deallocate(I);for(let R=0;R<w.granted.length;R++)if(128&w.granted[R]){const B=this.messageIdToTopic[I];B&&B.forEach(function(U){delete P._resubscribeTopics[U]})}this._invokeStoreProcessingQueue(),M(null,w);break;case"unsuback":delete this.outgoing[I],this.messageIdProvider.deallocate(I),this._invokeStoreProcessingQueue(),M(null);break;default:P.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&Object.keys(this.outgoing).length===0&&this.emit("outgoingEmpty")}else c("_handleAck :: Server sent an ack in error. Ignoring.")},S.prototype._handlePubrel=function(w,I){c("handling pubrel packet"),I=I!==void 0?I:m;const N=this,D={cmd:"pubcomp",messageId:w.messageId};N.incomingStore.get(w,function(M,P){M?N._sendPacket(D,I):(N.emit("message",P.topic,P.payload,P),N.handleMessage(P,function(O){if(O)return I(O);N.incomingStore.del(P,m),N._sendPacket(D,I)}))})},S.prototype._handleDisconnect=function(w){this.emit("disconnect",w)},S.prototype._nextId=function(){return this.messageIdProvider.allocate()},S.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},S.prototype._resubscribe=function(){c("_resubscribe");const w=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||this.options.protocolVersion===5&&!this.connackPacket.sessionPresent)&&w.length>0)if(this.options.resubscribe)if(this.options.protocolVersion===5){c("_resubscribe: protocolVersion 5");for(let I=0;I<w.length;I++){const N={};N[w[I]]=this._resubscribeTopics[w[I]],N.resubscribe=!0,this.subscribe(N,{properties:N[w[I]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},S.prototype._onConnect=function(w){if(this.disconnected)return void this.emit("connect",w);const I=this;this.connackPacket=w,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function N(){let D=I.outgoingStore.createStream();function M(){I._storeProcessing=!1,I._packetIdsDuringStoreProcessing={}}function P(){D.destroy(),D=null,I._flushStoreProcessingQueue(),M()}I.once("close",P),D.on("error",function(O){M(),I._flushStoreProcessingQueue(),I.removeListener("close",P),I.emit("error",O)}),D.on("end",function(){let O=!0;for(const R in I._packetIdsDuringStoreProcessing)if(!I._packetIdsDuringStoreProcessing[R]){O=!1;break}O?(M(),I.removeListener("close",P),I._invokeAllStoreProcessingQueue(),I.emit("connect",w)):N()}),function O(){if(!D)return;I._storeProcessing=!0;const R=D.read(1);let B;R?I._packetIdsDuringStoreProcessing[R.messageId]?O():I.disconnecting||I.reconnectTimer?D.destroy&&D.destroy():(B=I.outgoing[R.messageId]?I.outgoing[R.messageId].cb:null,I.outgoing[R.messageId]={volatile:!1,cb:function(U,H){B&&B(U,H),O()}},I._packetIdsDuringStoreProcessing[R.messageId]=!0,I.messageIdProvider.register(R.messageId)?I._sendPacket(R):c("messageId: %d has already used.",R.messageId)):D.once("readable",O)}()}()},S.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const w=this._storeProcessingQueue[0];if(w&&w.invoke())return this._storeProcessingQueue.shift(),!0}return!1},S.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},S.prototype._flushStoreProcessingQueue=function(){for(const w of this._storeProcessingQueue)w.cbStorePut&&w.cbStorePut(new Error("Connection closed")),w.callback&&w.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},z.exports=S}).call(this)}).call(this,A("_process"),typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(A,z,L){const{Buffer:_}=A("buffer"),f=A("readable-stream").Transform,d=A("duplexify");let u,i,e,a=!1;z.exports=function(n,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const o=t.protocolId==="MQIsdp"&&t.protocolVersion===3?"mqttv3.1":"mqtt";(function(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})})(t);const h=function(l,p){const g=l.protocol==="alis"?"wss":"ws";let c=g+"://"+l.hostname+l.path;return l.port&&l.port!==80&&l.port!==443&&(c=g+"://"+l.hostname+":"+l.port+l.path),typeof l.transformWsUrl=="function"&&(c=l.transformWsUrl(c,l,p)),c}(t,n);return(u=t.my).connectSocket({url:h,protocols:o}),i=function(){const l=new f;return l._write=function(p,g,c){u.sendSocketMessage({data:p.buffer,success:function(){c()},fail:function(){c(new Error)}})},l._flush=function(p){u.closeSocket({success:function(){p()}})},l}(),e=d.obj(),a||(a=!0,u.onSocketOpen(function(){e.setReadable(i),e.setWritable(i),e.emit("connect")}),u.onSocketMessage(function(l){if(typeof l.data=="string"){const p=_.from(l.data,"base64");i.push(p)}else{const p=new FileReader;p.addEventListener("load",function(){let g=p.result;g=g instanceof ArrayBuffer?_.from(g):_.from(g,"utf8"),i.push(g)}),p.readAsArrayBuffer(l.data)}}),u.onSocketClose(function(){e.end(),e.destroy()}),u.onSocketError(function(l){e.destroy(l)})),e}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(A,z,L){const _=A("net"),f=A("debug")("mqttjs:tcp");z.exports=function(d,u){u.port=u.port||1883,u.hostname=u.hostname||u.host||"localhost";const i=u.port,e=u.hostname;return f("port %d and host %s",i,e),_.createConnection(i,e)}},{debug:18,net:16}],4:[function(A,z,L){const _=A("tls"),f=A("net"),d=A("debug")("mqttjs:tls");z.exports=function(u,i){i.port=i.port||8883,i.host=i.hostname||i.host||"localhost",f.isIP(i.host)===0&&(i.servername=i.host),i.rejectUnauthorized=i.rejectUnauthorized!==!1,delete i.path,d("port %d host %s rejectUnauthorized %b",i.port,i.host,i.rejectUnauthorized);const e=_.connect(i);function a(n){i.rejectUnauthorized&&u.emit("error",n),e.end()}return e.on("secureConnect",function(){i.rejectUnauthorized&&!e.authorized?e.emit("error",new Error("TLS not authorized")):e.removeListener("error",a)}),e.on("error",a),e}},{debug:18,net:16,tls:16}],5:[function(A,z,L){(function(_){(function(){const{Buffer:f}=A("buffer"),d=A("ws"),u=A("debug")("mqttjs:ws"),i=A("duplexify"),e=A("readable-stream").Transform,a=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],n=_!==void 0&&_.title==="browser"||typeof __webpack_require__=="function";function t(h,l){let p=h.protocol+"://"+h.hostname+":"+h.port+h.path;return typeof h.transformWsUrl=="function"&&(p=h.transformWsUrl(p,h,l)),p}function o(h){const l=h;return h.hostname||(l.hostname="localhost"),h.port||(h.protocol==="wss"?l.port=443:l.port=80),h.path||(l.path="/"),h.wsOptions||(l.wsOptions={}),n||h.protocol!=="wss"||a.forEach(function(p){Object.prototype.hasOwnProperty.call(h,p)&&!Object.prototype.hasOwnProperty.call(h.wsOptions,p)&&(l.wsOptions[p]=h[p])}),l}z.exports=n?function(h,l){let p;u("browserStreamBuilder");const g=function(S){const w=o(S);if(w.hostname||(w.hostname=w.host),!w.hostname){if(typeof document>"u")throw new Error("Could not determine host. Specify host manually.");const I=new URL(document.URL);w.hostname=I.hostname,w.port||(w.port=I.port)}return w.objectMode===void 0&&(w.objectMode=!(w.binary===!0||w.binary===void 0)),w}(l).browserBufferSize||524288,c=l.browserBufferTimeout||1e3,v=!l.objectMode,x=function(S,w){const I=w.protocolId==="MQIsdp"&&w.protocolVersion===3?"mqttv3.1":"mqtt",N=t(w,S),D=new WebSocket(N,[I]);return D.binaryType="arraybuffer",D}(h,l),C=function(S,w,I){const N=new e({objectModeMode:S.objectMode});return N._write=w,N._flush=I,N}(l,function S(w,I,N){x.bufferedAmount>g&&setTimeout(S,c,w,I,N),v&&typeof w=="string"&&(w=f.from(w,"utf8"));try{x.send(w)}catch(D){return N(D)}N()},function(S){x.close(),S()});l.objectMode||(C._writev=m),C.on("close",()=>{x.close()});const E=x.addEventListener!==void 0;function k(){p.setReadable(C),p.setWritable(C),p.emit("connect")}function V(){p.end(),p.destroy()}function Q(S){p.destroy(S)}function y(S){let w=S.data;w=w instanceof ArrayBuffer?f.from(w):f.from(w,"utf8"),C.push(w)}function m(S,w){const I=new Array(S.length);for(let N=0;N<S.length;N++)typeof S[N].chunk=="string"?I[N]=f.from(S[N],"utf8"):I[N]=S[N].chunk;this._write(f.concat(I),"binary",w)}return x.readyState===x.OPEN?p=C:(p=p=i(void 0,void 0,l),l.objectMode||(p._writev=m),E?x.addEventListener("open",k):x.onopen=k),p.socket=x,E?(x.addEventListener("close",V),x.addEventListener("error",Q),x.addEventListener("message",y)):(x.onclose=V,x.onerror=Q,x.onmessage=y),p}:function(h,l){u("streamBuilder");const p=o(l),g=t(p,h),c=function(x,C,E){u("createWebSocket"),u("protocol: "+E.protocolId+" "+E.protocolVersion);const k=E.protocolId==="MQIsdp"&&E.protocolVersion===3?"mqttv3.1":"mqtt";return u("creating new Websocket for url: "+C+" and protocol: "+k),new d(C,[k],E.wsOptions)}(0,g,p),v=d.createWebSocketStream(c,p.wsOptions);return v.url=g,c.on("close",()=>{v.destroy()}),v}}).call(this)}).call(this,A("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(A,z,L){const{Buffer:_}=A("buffer"),f=A("readable-stream").Transform,d=A("duplexify");let u,i,e;z.exports=function(a,n){if(n.hostname=n.hostname||n.host,!n.hostname)throw new Error("Could not determine host. Specify host manually.");const t=n.protocolId==="MQIsdp"&&n.protocolVersion===3?"mqttv3.1":"mqtt";(function(l){l.hostname||(l.hostname="localhost"),l.path||(l.path="/"),l.wsOptions||(l.wsOptions={})})(n);const o=function(l,p){const g=l.protocol==="wxs"?"wss":"ws";let c=g+"://"+l.hostname+l.path;return l.port&&l.port!==80&&l.port!==443&&(c=g+"://"+l.hostname+":"+l.port+l.path),typeof l.transformWsUrl=="function"&&(c=l.transformWsUrl(c,l,p)),c}(n,a);u=wx.connectSocket({url:o,protocols:[t]}),i=function(){const l=new f;return l._write=function(p,g,c){u.send({data:p.buffer,success:function(){c()},fail:function(v){c(new Error(v))}})},l._flush=function(p){u.close({success:function(){p()}})},l}(),(e=d.obj())._destroy=function(l,p){u.close({success:function(){p&&p(l)}})};const h=e.destroy;return e.destroy=function(){e.destroy=h;const l=this;setTimeout(function(){u.close({fail:function(){l._destroy(new Error)}})},0)}.bind(e),u.onOpen(function(){e.setReadable(i),e.setWritable(i),e.emit("connect")}),u.onMessage(function(l){let p=l.data;p=p instanceof ArrayBuffer?_.from(p):_.from(p,"utf8"),i.push(p)}),u.onClose(function(){e.end(),e.destroy()}),u.onError(function(l){e.destroy(new Error(l.errMsg))}),e}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(A,z,L){function _(){if(!(this instanceof _))return new _;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}_.prototype.allocate=function(){const f=this.nextId++;return this.nextId===65536&&(this.nextId=1),f},_.prototype.getLastAllocated=function(){return this.nextId===1?65535:this.nextId-1},_.prototype.register=function(f){return!0},_.prototype.deallocate=function(f){},_.prototype.clear=function(){},z.exports=_},{}],8:[function(A,z,L){const _=A("xtend"),f=A("readable-stream").Readable,d={objectMode:!0},u={clean:!0};function i(e){if(!(this instanceof i))return new i(e);this.options=e||{},this.options=_(u,e),this._inflights=new Map}i.prototype.put=function(e,a){return this._inflights.set(e.messageId,e),a&&a(),this},i.prototype.createStream=function(){const e=new f(d),a=[];let n=!1,t=0;return this._inflights.forEach(function(o,h){a.push(o)}),e._read=function(){!n&&t<a.length?this.push(a[t++]):this.push(null)},e.destroy=function(){if(n)return;const o=this;n=!0,setTimeout(function(){o.emit("close")},0)},e},i.prototype.del=function(e,a){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),a(null,e)):a&&a(new Error("missing packet")),this},i.prototype.get=function(e,a){return(e=this._inflights.get(e.messageId))?a(null,e):a&&a(new Error("missing packet")),this},i.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},z.exports=i},{"readable-stream":69,xtend:81}],9:[function(A,z,L){function _(f){if(!(this instanceof _))return new _(f);this.aliasToTopic={},this.max=f}_.prototype.put=function(f,d){return!(d===0||d>this.max)&&(this.aliasToTopic[d]=f,this.length=Object.keys(this.aliasToTopic).length,!0)},_.prototype.getTopicByAlias=function(f){return this.aliasToTopic[f]},_.prototype.clear=function(){this.aliasToTopic={}},z.exports=_},{}],10:[function(A,z,L){const _=A("lru-cache"),f=A("number-allocator").NumberAllocator;function d(u){if(!(this instanceof d))return new d(u);u>0&&(this.aliasToTopic=new _({max:u}),this.topicToAlias={},this.numberAllocator=new f(1,u),this.max=u,this.length=0)}d.prototype.put=function(u,i){if(i===0||i>this.max)return!1;const e=this.aliasToTopic.get(i);return e&&delete this.topicToAlias[e],this.aliasToTopic.set(i,u),this.topicToAlias[u]=i,this.numberAllocator.use(i),this.length=this.aliasToTopic.length,!0},d.prototype.getTopicByAlias=function(u){return this.aliasToTopic.get(u)},d.prototype.getAliasByTopic=function(u){const i=this.topicToAlias[u];return i!==void 0&&this.aliasToTopic.get(i),i},d.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},d.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},z.exports=d},{"lru-cache":37,"number-allocator":46}],11:[function(A,z,L){function _(f){const d=f.split("/");for(let u=0;u<d.length;u++)if(d[u]!=="+"){if(d[u]==="#")return u===d.length-1;if(d[u].indexOf("+")!==-1||d[u].indexOf("#")!==-1)return!1}return!0}z.exports={validateTopics:function(f){if(f.length===0)return"empty_topic_list";for(let d=0;d<f.length;d++)if(!_(f[d]))return f[d];return null}}},{}],12:[function(A,z,L){(function(_){(function(){const f=A("../client"),d=A("../store"),u=A("url"),i=A("xtend"),e=A("debug")("mqttjs"),a={};function n(t,o){if(e("connecting to an MQTT broker..."),typeof t!="object"||o||(o=t,t=null),o=o||{},t){const l=u.parse(t,!0);if(l.port!=null&&(l.port=Number(l.port)),(o=i(l,o)).protocol===null)throw new Error("Missing protocol");o.protocol=o.protocol.replace(/:$/,"")}if(function(l){let p;l.auth&&((p=l.auth.match(/^(.+):(.+)$/))?(l.username=p[1],l.password=p[2]):l.username=l.auth)}(o),o.query&&typeof o.query.clientId=="string"&&(o.clientId=o.query.clientId),o.cert&&o.key){if(!o.protocol)throw new Error("Missing secure protocol key");if(["mqtts","wss","wxs","alis"].indexOf(o.protocol)===-1)switch(o.protocol){case"mqtt":o.protocol="mqtts";break;case"ws":o.protocol="wss";break;case"wx":o.protocol="wxs";break;case"ali":o.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+o.protocol+'"!')}}if(!a[o.protocol]){const l=["mqtts","wss"].indexOf(o.protocol)!==-1;o.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(p,g){return(!l||g%2!=0)&&typeof a[p]=="function"})[0]}if(o.clean===!1&&!o.clientId)throw new Error("Missing clientId for unclean clients");o.protocol&&(o.defaultProtocol=o.protocol);const h=new f(function(l){return o.servers&&(l._reconnectCount&&l._reconnectCount!==o.servers.length||(l._reconnectCount=0),o.host=o.servers[l._reconnectCount].host,o.port=o.servers[l._reconnectCount].port,o.protocol=o.servers[l._reconnectCount].protocol?o.servers[l._reconnectCount].protocol:o.defaultProtocol,o.hostname=o.host,l._reconnectCount++),e("calling streambuilder for",o.protocol),a[o.protocol](l,o)},o);return h.on("error",function(){}),h}_!==void 0&&_.title!=="browser"||typeof __webpack_require__!="function"?(a.mqtt=A("./tcp"),a.tcp=A("./tcp"),a.ssl=A("./tls"),a.tls=A("./tls"),a.mqtts=A("./tls")):(a.wx=A("./wx"),a.wxs=A("./wx"),a.ali=A("./ali"),a.alis=A("./ali")),a.ws=A("./ws"),a.wss=A("./ws"),z.exports=n,z.exports.connect=n,z.exports.MqttClient=f,z.exports.Store=d}).call(this)}).call(this,A("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(A,z,L){L.byteLength=function(t){var o=a(t),h=o[0],l=o[1];return 3*(h+l)/4-l},L.toByteArray=function(t){var o,h,l=a(t),p=l[0],g=l[1],c=new d(function(C,E,k){return 3*(E+k)/4-k}(0,p,g)),v=0,x=g>0?p-4:p;for(h=0;h<x;h+=4)o=f[t.charCodeAt(h)]<<18|f[t.charCodeAt(h+1)]<<12|f[t.charCodeAt(h+2)]<<6|f[t.charCodeAt(h+3)],c[v++]=o>>16&255,c[v++]=o>>8&255,c[v++]=255&o;return g===2&&(o=f[t.charCodeAt(h)]<<2|f[t.charCodeAt(h+1)]>>4,c[v++]=255&o),g===1&&(o=f[t.charCodeAt(h)]<<10|f[t.charCodeAt(h+1)]<<4|f[t.charCodeAt(h+2)]>>2,c[v++]=o>>8&255,c[v++]=255&o),c},L.fromByteArray=function(t){for(var o,h=t.length,l=h%3,p=[],g=0,c=h-l;g<c;g+=16383)p.push(n(t,g,g+16383>c?c:g+16383));return l===1?(o=t[h-1],p.push(_[o>>2]+_[o<<4&63]+"==")):l===2&&(o=(t[h-2]<<8)+t[h-1],p.push(_[o>>10]+_[o>>4&63]+_[o<<2&63]+"=")),p.join("")};for(var _=[],f=[],d=typeof Uint8Array<"u"?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,e=u.length;i<e;++i)_[i]=u[i],f[u.charCodeAt(i)]=i;function a(t){var o=t.length;if(o%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=t.indexOf("=");return h===-1&&(h=o),[h,h===o?0:4-h%4]}function n(t,o,h){for(var l,p,g=[],c=o;c<h;c+=3)l=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),g.push(_[(p=l)>>18&63]+_[p>>12&63]+_[p>>6&63]+_[63&p]);return g.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63},{}],14:[function(A,z,L){const{Buffer:_}=A("buffer"),f=Symbol.for("BufferList");function d(u){if(!(this instanceof d))return new d(u);d._init.call(this,u)}d._init=function(u){Object.defineProperty(this,f,{value:!0}),this._bufs=[],this.length=0,u&&this.append(u)},d.prototype._new=function(u){return new d(u)},d.prototype._offset=function(u){if(u===0)return[0,0];let i=0;for(let e=0;e<this._bufs.length;e++){const a=i+this._bufs[e].length;if(u<a||e===this._bufs.length-1)return[e,u-i];i=a}},d.prototype._reverseOffset=function(u){const i=u[0];let e=u[1];for(let a=0;a<i;a++)e+=this._bufs[a].length;return e},d.prototype.get=function(u){if(u>this.length||u<0)return;const i=this._offset(u);return this._bufs[i[0]][i[1]]},d.prototype.slice=function(u,i){return typeof u=="number"&&u<0&&(u+=this.length),typeof i=="number"&&i<0&&(i+=this.length),this.copy(null,0,u,i)},d.prototype.copy=function(u,i,e,a){if((typeof e!="number"||e<0)&&(e=0),(typeof a!="number"||a>this.length)&&(a=this.length),e>=this.length||a<=0)return u||_.alloc(0);const n=!!u,t=this._offset(e),o=a-e;let h=o,l=n&&i||0,p=t[1];if(e===0&&a===this.length){if(!n)return this._bufs.length===1?this._bufs[0]:_.concat(this._bufs,this.length);for(let g=0;g<this._bufs.length;g++)this._bufs[g].copy(u,l),l+=this._bufs[g].length;return u}if(h<=this._bufs[t[0]].length-p)return n?this._bufs[t[0]].copy(u,i,p,p+h):this._bufs[t[0]].slice(p,p+h);n||(u=_.allocUnsafe(o));for(let g=t[0];g<this._bufs.length;g++){const c=this._bufs[g].length-p;if(!(h>c)){this._bufs[g].copy(u,l,p,p+h),l+=c;break}this._bufs[g].copy(u,l,p),l+=c,h-=c,p&&(p=0)}return u.length>l?u.slice(0,l):u},d.prototype.shallowSlice=function(u,i){if(u=u||0,i=typeof i!="number"?this.length:i,u<0&&(u+=this.length),i<0&&(i+=this.length),u===i)return this._new();const e=this._offset(u),a=this._offset(i),n=this._bufs.slice(e[0],a[0]+1);return a[1]===0?n.pop():n[n.length-1]=n[n.length-1].slice(0,a[1]),e[1]!==0&&(n[0]=n[0].slice(e[1])),this._new(n)},d.prototype.toString=function(u,i,e){return this.slice(i,e).toString(u)},d.prototype.consume=function(u){if(u=Math.trunc(u),Number.isNaN(u)||u<=0)return this;for(;this._bufs.length;){if(!(u>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(u),this.length-=u;break}u-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},d.prototype.duplicate=function(){const u=this._new();for(let i=0;i<this._bufs.length;i++)u.append(this._bufs[i]);return u},d.prototype.append=function(u){if(u==null)return this;if(u.buffer)this._appendBuffer(_.from(u.buffer,u.byteOffset,u.byteLength));else if(Array.isArray(u))for(let i=0;i<u.length;i++)this.append(u[i]);else if(this._isBufferList(u))for(let i=0;i<u._bufs.length;i++)this.append(u._bufs[i]);else typeof u=="number"&&(u=u.toString()),this._appendBuffer(_.from(u));return this},d.prototype._appendBuffer=function(u){this._bufs.push(u),this.length+=u.length},d.prototype.indexOf=function(u,i,e){if(e===void 0&&typeof i=="string"&&(e=i,i=void 0),typeof u=="function"||Array.isArray(u))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof u=="number"?u=_.from([u]):typeof u=="string"?u=_.from(u,e):this._isBufferList(u)?u=u.slice():Array.isArray(u.buffer)?u=_.from(u.buffer,u.byteOffset,u.byteLength):_.isBuffer(u)||(u=_.from(u)),i=Number(i||0),isNaN(i)&&(i=0),i<0&&(i=this.length+i),i<0&&(i=0),u.length===0)return i>this.length?this.length:i;const a=this._offset(i);let n=a[0],t=a[1];for(;n<this._bufs.length;n++){const o=this._bufs[n];for(;t<o.length;)if(o.length-t>=u.length){const h=o.indexOf(u,t);if(h!==-1)return this._reverseOffset([n,h]);t=o.length-u.length+1}else{const h=this._reverseOffset([n,t]);if(this._match(h,u))return h;t++}t=0}return-1},d.prototype._match=function(u,i){if(this.length-u<i.length)return!1;for(let e=0;e<i.length;e++)if(this.get(u+e)!==i[e])return!1;return!0},function(){const u={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const i in u)(function(e){d.prototype[e]=u[e]===null?function(a,n){return this.slice(a,a+n)[e](0,n)}:function(a=0){return this.slice(a,a+u[e])[e](0)}})(i)}(),d.prototype._isBufferList=function(u){return u instanceof d||d.isBufferList(u)},d.isBufferList=function(u){return u!=null&&u[f]},z.exports=d},{buffer:17}],15:[function(A,z,L){const _=A("readable-stream").Duplex,f=A("inherits"),d=A("./BufferList");function u(i){if(!(this instanceof u))return new u(i);if(typeof i=="function"){this._callback=i;const e=function(a){this._callback&&(this._callback(a),this._callback=null)}.bind(this);this.on("pipe",function(a){a.on("error",e)}),this.on("unpipe",function(a){a.removeListener("error",e)}),i=null}d._init.call(this,i),_.call(this)}f(u,_),Object.assign(u.prototype,d.prototype),u.prototype._new=function(i){return new u(i)},u.prototype._write=function(i,e,a){this._appendBuffer(i),typeof a=="function"&&a()},u.prototype._read=function(i){if(!this.length)return this.push(null);i=Math.min(i,this.length),this.push(this.slice(0,i)),this.consume(i)},u.prototype.end=function(i){_.prototype.end.call(this,i),this._callback&&(this._callback(null,this.slice()),this._callback=null)},u.prototype._destroy=function(i,e){this._bufs.length=0,this.length=0,e(i)},u.prototype._isBufferList=function(i){return i instanceof u||i instanceof d||u.isBufferList(i)},u.isBufferList=d.isBufferList,z.exports=u,z.exports.BufferListStream=u,z.exports.BufferList=d},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(A,z,L){},{}],17:[function(A,z,L){(function(_){(function(){var f=A("base64-js"),d=A("ieee754");L.Buffer=e,L.SlowBuffer=function(r){return+r!=r&&(r=0),e.alloc(+r)},L.INSPECT_MAX_BYTES=50;var u=2147483647;function i(r){if(r>u)throw new RangeError('The value "'+r+'" is invalid for option "size"');var s=new Uint8Array(r);return s.__proto__=e.prototype,s}function e(r,s,b){if(typeof r=="number"){if(typeof s=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return t(r)}return a(r,s,b)}function a(r,s,b){if(typeof r=="string")return function(q,$){if(typeof $=="string"&&$!==""||($="utf8"),!e.isEncoding($))throw new TypeError("Unknown encoding: "+$);var Z=0|l(q,$),Y=i(Z),ee=Y.write(q,$);return ee!==Z&&(Y=Y.slice(0,ee)),Y}(r,s);if(ArrayBuffer.isView(r))return o(r);if(r==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(K(r,ArrayBuffer)||r&&K(r.buffer,ArrayBuffer))return function(q,$,Z){if($<0||q.byteLength<$)throw new RangeError('"offset" is outside of buffer bounds');if(q.byteLength<$+(Z||0))throw new RangeError('"length" is outside of buffer bounds');var Y;return Y=$===void 0&&Z===void 0?new Uint8Array(q):Z===void 0?new Uint8Array(q,$):new Uint8Array(q,$,Z),Y.__proto__=e.prototype,Y}(r,s,b);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var T=r.valueOf&&r.valueOf();if(T!=null&&T!==r)return e.from(T,s,b);var j=function(q){if(e.isBuffer(q)){var $=0|h(q.length),Z=i($);return Z.length===0||q.copy(Z,0,0,$),Z}if(q.length!==void 0)return typeof q.length!="number"||G(q.length)?i(0):o(q);if(q.type==="Buffer"&&Array.isArray(q.data))return o(q.data)}(r);if(j)return j;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return e.from(r[Symbol.toPrimitive]("string"),s,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}function n(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function t(r){return n(r),i(r<0?0:0|h(r))}function o(r){for(var s=r.length<0?0:0|h(r.length),b=i(s),T=0;T<s;T+=1)b[T]=255&r[T];return b}function h(r){if(r>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|r}function l(r,s){if(e.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||K(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);var b=r.length,T=arguments.length>2&&arguments[2]===!0;if(!T&&b===0)return 0;for(var j=!1;;)switch(s){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return H(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return F(r).length;default:if(j)return T?-1:H(r).length;s=(""+s).toLowerCase(),j=!0}}function p(r,s,b){var T=r[s];r[s]=r[b],r[b]=T}function g(r,s,b,T,j){if(r.length===0)return-1;if(typeof b=="string"?(T=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),G(b=+b)&&(b=j?0:r.length-1),b<0&&(b=r.length+b),b>=r.length){if(j)return-1;b=r.length-1}else if(b<0){if(!j)return-1;b=0}if(typeof s=="string"&&(s=e.from(s,T)),e.isBuffer(s))return s.length===0?-1:c(r,s,b,T,j);if(typeof s=="number")return s&=255,typeof Uint8Array.prototype.indexOf=="function"?j?Uint8Array.prototype.indexOf.call(r,s,b):Uint8Array.prototype.lastIndexOf.call(r,s,b):c(r,[s],b,T,j);throw new TypeError("val must be string, number or Buffer")}function c(r,s,b,T,j){var q,$=1,Z=r.length,Y=s.length;if(T!==void 0&&((T=String(T).toLowerCase())==="ucs2"||T==="ucs-2"||T==="utf16le"||T==="utf-16le")){if(r.length<2||s.length<2)return-1;$=2,Z/=2,Y/=2,b/=2}function ee(ue,ne){return $===1?ue[ne]:ue.readUInt16BE(ne*$)}if(j){var te=-1;for(q=b;q<Z;q++)if(ee(r,q)===ee(s,te===-1?0:q-te)){if(te===-1&&(te=q),q-te+1===Y)return te*$}else te!==-1&&(q-=q-te),te=-1}else for(b+Y>Z&&(b=Z-Y),q=b;q>=0;q--){for(var le=!0,ae=0;ae<Y;ae++)if(ee(r,q+ae)!==ee(s,ae)){le=!1;break}if(le)return q}return-1}function v(r,s,b,T){b=Number(b)||0;var j=r.length-b;T?(T=Number(T))>j&&(T=j):T=j;var q=s.length;T>q/2&&(T=q/2);for(var $=0;$<T;++$){var Z=parseInt(s.substr(2*$,2),16);if(G(Z))return $;r[b+$]=Z}return $}function x(r,s,b,T){return W(H(s,r.length-b),r,b,T)}function C(r,s,b,T){return W(function(j){for(var q=[],$=0;$<j.length;++$)q.push(255&j.charCodeAt($));return q}(s),r,b,T)}function E(r,s,b,T){return C(r,s,b,T)}function k(r,s,b,T){return W(F(s),r,b,T)}function V(r,s,b,T){return W(function(j,q){for(var $,Z,Y,ee=[],te=0;te<j.length&&!((q-=2)<0);++te)$=j.charCodeAt(te),Z=$>>8,Y=$%256,ee.push(Y),ee.push(Z);return ee}(s,r.length-b),r,b,T)}function Q(r,s,b){return s===0&&b===r.length?f.fromByteArray(r):f.fromByteArray(r.slice(s,b))}function y(r,s,b){b=Math.min(r.length,b);for(var T=[],j=s;j<b;){var q,$,Z,Y,ee=r[j],te=null,le=ee>239?4:ee>223?3:ee>191?2:1;if(j+le<=b)switch(le){case 1:ee<128&&(te=ee);break;case 2:(192&(q=r[j+1]))==128&&(Y=(31&ee)<<6|63&q)>127&&(te=Y);break;case 3:q=r[j+1],$=r[j+2],(192&q)==128&&(192&$)==128&&(Y=(15&ee)<<12|(63&q)<<6|63&$)>2047&&(Y<55296||Y>57343)&&(te=Y);break;case 4:q=r[j+1],$=r[j+2],Z=r[j+3],(192&q)==128&&(192&$)==128&&(192&Z)==128&&(Y=(15&ee)<<18|(63&q)<<12|(63&$)<<6|63&Z)>65535&&Y<1114112&&(te=Y)}te===null?(te=65533,le=1):te>65535&&(te-=65536,T.push(te>>>10&1023|55296),te=56320|1023&te),T.push(te),j+=le}return function(ae){var ue=ae.length;if(ue<=m)return String.fromCharCode.apply(String,ae);for(var ne="",ie=0;ie<ue;)ne+=String.fromCharCode.apply(String,ae.slice(ie,ie+=m));return ne}(T)}L.kMaxLength=u,e.TYPED_ARRAY_SUPPORT=function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},r.foo()===42}catch{return!1}}(),e.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),typeof Symbol<"u"&&Symbol.species!=null&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(r,s,b){return a(r,s,b)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(r,s,b){return function(T,j,q){return n(T),T<=0?i(T):j!==void 0?typeof q=="string"?i(T).fill(j,q):i(T).fill(j):i(T)}(r,s,b)},e.allocUnsafe=function(r){return t(r)},e.allocUnsafeSlow=function(r){return t(r)},e.isBuffer=function(r){return r!=null&&r._isBuffer===!0&&r!==e.prototype},e.compare=function(r,s){if(K(r,Uint8Array)&&(r=e.from(r,r.offset,r.byteLength)),K(s,Uint8Array)&&(s=e.from(s,s.offset,s.byteLength)),!e.isBuffer(r)||!e.isBuffer(s))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(r===s)return 0;for(var b=r.length,T=s.length,j=0,q=Math.min(b,T);j<q;++j)if(r[j]!==s[j]){b=r[j],T=s[j];break}return b<T?-1:T<b?1:0},e.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(r,s){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return e.alloc(0);var b;if(s===void 0)for(s=0,b=0;b<r.length;++b)s+=r[b].length;var T=e.allocUnsafe(s),j=0;for(b=0;b<r.length;++b){var q=r[b];if(K(q,Uint8Array)&&(q=e.from(q)),!e.isBuffer(q))throw new TypeError('"list" argument must be an Array of Buffers');q.copy(T,j),j+=q.length}return T},e.byteLength=l,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<r;s+=2)p(this,s,s+1);return this},e.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<r;s+=4)p(this,s,s+3),p(this,s+1,s+2);return this},e.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<r;s+=8)p(this,s,s+7),p(this,s+1,s+6),p(this,s+2,s+5),p(this,s+3,s+4);return this},e.prototype.toString=function(){var r=this.length;return r===0?"":arguments.length===0?y(this,0,r):function(s,b,T){var j=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0)<=(b>>>=0))return"";for(s||(s="utf8");;)switch(s){case"hex":return I(this,b,T);case"utf8":case"utf-8":return y(this,b,T);case"ascii":return S(this,b,T);case"latin1":case"binary":return w(this,b,T);case"base64":return Q(this,b,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,b,T);default:if(j)throw new TypeError("Unknown encoding: "+s);s=(s+"").toLowerCase(),j=!0}}.apply(this,arguments)},e.prototype.toLocaleString=e.prototype.toString,e.prototype.equals=function(r){if(!e.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||e.compare(this,r)===0},e.prototype.inspect=function(){var r="",s=L.INSPECT_MAX_BYTES;return r=this.toString("hex",0,s).replace(/(.{2})/g,"$1 ").trim(),this.length>s&&(r+=" ... "),"<Buffer "+r+">"},e.prototype.compare=function(r,s,b,T,j){if(K(r,Uint8Array)&&(r=e.from(r,r.offset,r.byteLength)),!e.isBuffer(r))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof r);if(s===void 0&&(s=0),b===void 0&&(b=r?r.length:0),T===void 0&&(T=0),j===void 0&&(j=this.length),s<0||b>r.length||T<0||j>this.length)throw new RangeError("out of range index");if(T>=j&&s>=b)return 0;if(T>=j)return-1;if(s>=b)return 1;if(s>>>=0,b>>>=0,T>>>=0,j>>>=0,this===r)return 0;for(var q=j-T,$=b-s,Z=Math.min(q,$),Y=this.slice(T,j),ee=r.slice(s,b),te=0;te<Z;++te)if(Y[te]!==ee[te]){q=Y[te],$=ee[te];break}return q<$?-1:$<q?1:0},e.prototype.includes=function(r,s,b){return this.indexOf(r,s,b)!==-1},e.prototype.indexOf=function(r,s,b){return g(this,r,s,b,!0)},e.prototype.lastIndexOf=function(r,s,b){return g(this,r,s,b,!1)},e.prototype.write=function(r,s,b,T){if(s===void 0)T="utf8",b=this.length,s=0;else if(b===void 0&&typeof s=="string")T=s,b=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s>>>=0,isFinite(b)?(b>>>=0,T===void 0&&(T="utf8")):(T=b,b=void 0)}var j=this.length-s;if((b===void 0||b>j)&&(b=j),r.length>0&&(b<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");T||(T="utf8");for(var q=!1;;)switch(T){case"hex":return v(this,r,s,b);case"utf8":case"utf-8":return x(this,r,s,b);case"ascii":return C(this,r,s,b);case"latin1":case"binary":return E(this,r,s,b);case"base64":return k(this,r,s,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,r,s,b);default:if(q)throw new TypeError("Unknown encoding: "+T);T=(""+T).toLowerCase(),q=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function S(r,s,b){var T="";b=Math.min(r.length,b);for(var j=s;j<b;++j)T+=String.fromCharCode(127&r[j]);return T}function w(r,s,b){var T="";b=Math.min(r.length,b);for(var j=s;j<b;++j)T+=String.fromCharCode(r[j]);return T}function I(r,s,b){var T=r.length;(!s||s<0)&&(s=0),(!b||b<0||b>T)&&(b=T);for(var j="",q=s;q<b;++q)j+=U(r[q]);return j}function N(r,s,b){for(var T=r.slice(s,b),j="",q=0;q<T.length;q+=2)j+=String.fromCharCode(T[q]+256*T[q+1]);return j}function D(r,s,b){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+s>b)throw new RangeError("Trying to access beyond buffer length")}function M(r,s,b,T,j,q){if(!e.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>j||s<q)throw new RangeError('"value" argument is out of bounds');if(b+T>r.length)throw new RangeError("Index out of range")}function P(r,s,b,T,j,q){if(b+T>r.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function O(r,s,b,T,j){return s=+s,b>>>=0,j||P(r,0,b,4),d.write(r,s,b,T,23,4),b+4}function R(r,s,b,T,j){return s=+s,b>>>=0,j||P(r,0,b,8),d.write(r,s,b,T,52,8),b+8}e.prototype.slice=function(r,s){var b=this.length;r=~~r,s=s===void 0?b:~~s,r<0?(r+=b)<0&&(r=0):r>b&&(r=b),s<0?(s+=b)<0&&(s=0):s>b&&(s=b),s<r&&(s=r);var T=this.subarray(r,s);return T.__proto__=e.prototype,T},e.prototype.readUIntLE=function(r,s,b){r>>>=0,s>>>=0,b||D(r,s,this.length);for(var T=this[r],j=1,q=0;++q<s&&(j*=256);)T+=this[r+q]*j;return T},e.prototype.readUIntBE=function(r,s,b){r>>>=0,s>>>=0,b||D(r,s,this.length);for(var T=this[r+--s],j=1;s>0&&(j*=256);)T+=this[r+--s]*j;return T},e.prototype.readUInt8=function(r,s){return r>>>=0,s||D(r,1,this.length),this[r]},e.prototype.readUInt16LE=function(r,s){return r>>>=0,s||D(r,2,this.length),this[r]|this[r+1]<<8},e.prototype.readUInt16BE=function(r,s){return r>>>=0,s||D(r,2,this.length),this[r]<<8|this[r+1]},e.prototype.readUInt32LE=function(r,s){return r>>>=0,s||D(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},e.prototype.readUInt32BE=function(r,s){return r>>>=0,s||D(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},e.prototype.readIntLE=function(r,s,b){r>>>=0,s>>>=0,b||D(r,s,this.length);for(var T=this[r],j=1,q=0;++q<s&&(j*=256);)T+=this[r+q]*j;return T>=(j*=128)&&(T-=Math.pow(2,8*s)),T},e.prototype.readIntBE=function(r,s,b){r>>>=0,s>>>=0,b||D(r,s,this.length);for(var T=s,j=1,q=this[r+--T];T>0&&(j*=256);)q+=this[r+--T]*j;return q>=(j*=128)&&(q-=Math.pow(2,8*s)),q},e.prototype.readInt8=function(r,s){return r>>>=0,s||D(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},e.prototype.readInt16LE=function(r,s){r>>>=0,s||D(r,2,this.length);var b=this[r]|this[r+1]<<8;return 32768&b?4294901760|b:b},e.prototype.readInt16BE=function(r,s){r>>>=0,s||D(r,2,this.length);var b=this[r+1]|this[r]<<8;return 32768&b?4294901760|b:b},e.prototype.readInt32LE=function(r,s){return r>>>=0,s||D(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},e.prototype.readInt32BE=function(r,s){return r>>>=0,s||D(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},e.prototype.readFloatLE=function(r,s){return r>>>=0,s||D(r,4,this.length),d.read(this,r,!0,23,4)},e.prototype.readFloatBE=function(r,s){return r>>>=0,s||D(r,4,this.length),d.read(this,r,!1,23,4)},e.prototype.readDoubleLE=function(r,s){return r>>>=0,s||D(r,8,this.length),d.read(this,r,!0,52,8)},e.prototype.readDoubleBE=function(r,s){return r>>>=0,s||D(r,8,this.length),d.read(this,r,!1,52,8)},e.prototype.writeUIntLE=function(r,s,b,T){r=+r,s>>>=0,b>>>=0,T||M(this,r,s,b,Math.pow(2,8*b)-1,0);var j=1,q=0;for(this[s]=255&r;++q<b&&(j*=256);)this[s+q]=r/j&255;return s+b},e.prototype.writeUIntBE=function(r,s,b,T){r=+r,s>>>=0,b>>>=0,T||M(this,r,s,b,Math.pow(2,8*b)-1,0);var j=b-1,q=1;for(this[s+j]=255&r;--j>=0&&(q*=256);)this[s+j]=r/q&255;return s+b},e.prototype.writeUInt8=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,1,255,0),this[s]=255&r,s+1},e.prototype.writeUInt16LE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,2,65535,0),this[s]=255&r,this[s+1]=r>>>8,s+2},e.prototype.writeUInt16BE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,2,65535,0),this[s]=r>>>8,this[s+1]=255&r,s+2},e.prototype.writeUInt32LE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,4,4294967295,0),this[s+3]=r>>>24,this[s+2]=r>>>16,this[s+1]=r>>>8,this[s]=255&r,s+4},e.prototype.writeUInt32BE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,4,4294967295,0),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},e.prototype.writeIntLE=function(r,s,b,T){if(r=+r,s>>>=0,!T){var j=Math.pow(2,8*b-1);M(this,r,s,b,j-1,-j)}var q=0,$=1,Z=0;for(this[s]=255&r;++q<b&&($*=256);)r<0&&Z===0&&this[s+q-1]!==0&&(Z=1),this[s+q]=(r/$>>0)-Z&255;return s+b},e.prototype.writeIntBE=function(r,s,b,T){if(r=+r,s>>>=0,!T){var j=Math.pow(2,8*b-1);M(this,r,s,b,j-1,-j)}var q=b-1,$=1,Z=0;for(this[s+q]=255&r;--q>=0&&($*=256);)r<0&&Z===0&&this[s+q+1]!==0&&(Z=1),this[s+q]=(r/$>>0)-Z&255;return s+b},e.prototype.writeInt8=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,1,127,-128),r<0&&(r=255+r+1),this[s]=255&r,s+1},e.prototype.writeInt16LE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,2,32767,-32768),this[s]=255&r,this[s+1]=r>>>8,s+2},e.prototype.writeInt16BE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,2,32767,-32768),this[s]=r>>>8,this[s+1]=255&r,s+2},e.prototype.writeInt32LE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,4,2147483647,-2147483648),this[s]=255&r,this[s+1]=r>>>8,this[s+2]=r>>>16,this[s+3]=r>>>24,s+4},e.prototype.writeInt32BE=function(r,s,b){return r=+r,s>>>=0,b||M(this,r,s,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r,s+4},e.prototype.writeFloatLE=function(r,s,b){return O(this,r,s,!0,b)},e.prototype.writeFloatBE=function(r,s,b){return O(this,r,s,!1,b)},e.prototype.writeDoubleLE=function(r,s,b){return R(this,r,s,!0,b)},e.prototype.writeDoubleBE=function(r,s,b){return R(this,r,s,!1,b)},e.prototype.copy=function(r,s,b,T){if(!e.isBuffer(r))throw new TypeError("argument should be a Buffer");if(b||(b=0),T||T===0||(T=this.length),s>=r.length&&(s=r.length),s||(s=0),T>0&&T<b&&(T=b),T===b||r.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("sourceEnd out of bounds");T>this.length&&(T=this.length),r.length-s<T-b&&(T=r.length-s+b);var j=T-b;if(this===r&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(s,b,T);else if(this===r&&b<s&&s<T)for(var q=j-1;q>=0;--q)r[q+s]=this[q+b];else Uint8Array.prototype.set.call(r,this.subarray(b,T),s);return j},e.prototype.fill=function(r,s,b,T){if(typeof r=="string"){if(typeof s=="string"?(T=s,s=0,b=this.length):typeof b=="string"&&(T=b,b=this.length),T!==void 0&&typeof T!="string")throw new TypeError("encoding must be a string");if(typeof T=="string"&&!e.isEncoding(T))throw new TypeError("Unknown encoding: "+T);if(r.length===1){var j=r.charCodeAt(0);(T==="utf8"&&j<128||T==="latin1")&&(r=j)}}else typeof r=="number"&&(r&=255);if(s<0||this.length<s||this.length<b)throw new RangeError("Out of range index");if(b<=s)return this;var q;if(s>>>=0,b=b===void 0?this.length:b>>>0,r||(r=0),typeof r=="number")for(q=s;q<b;++q)this[q]=r;else{var $=e.isBuffer(r)?r:e.from(r,T),Z=$.length;if(Z===0)throw new TypeError('The value "'+r+'" is invalid for argument "value"');for(q=0;q<b-s;++q)this[q+s]=$[q%Z]}return this};var B=/[^+/0-9A-Za-z-_]/g;function U(r){return r<16?"0"+r.toString(16):r.toString(16)}function H(r,s){var b;s=s||1/0;for(var T=r.length,j=null,q=[],$=0;$<T;++$){if((b=r.charCodeAt($))>55295&&b<57344){if(!j){if(b>56319){(s-=3)>-1&&q.push(239,191,189);continue}if($+1===T){(s-=3)>-1&&q.push(239,191,189);continue}j=b;continue}if(b<56320){(s-=3)>-1&&q.push(239,191,189),j=b;continue}b=65536+(j-55296<<10|b-56320)}else j&&(s-=3)>-1&&q.push(239,191,189);if(j=null,b<128){if((s-=1)<0)break;q.push(b)}else if(b<2048){if((s-=2)<0)break;q.push(b>>6|192,63&b|128)}else if(b<65536){if((s-=3)<0)break;q.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;q.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return q}function F(r){return f.toByteArray(function(s){if((s=(s=s.split("=")[0]).trim().replace(B,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(r))}function W(r,s,b,T){for(var j=0;j<T&&!(j+b>=s.length||j>=r.length);++j)s[j+b]=r[j];return j}function K(r,s){return r instanceof s||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===s.name}function G(r){return r!=r}}).call(this)}).call(this,A("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(A,z,L){(function(_){(function(){L.formatArgs=function(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+z.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;d.splice(1,0,u,"color: inherit");let i=0,e=0;d[0].replace(/%[a-zA-Z%]/g,a=>{a!=="%%"&&a==="%c"&&(e=++i)}),d.splice(e,0,u)},L.save=function(d){try{d?L.storage.setItem("debug",d):L.storage.removeItem("debug")}catch{}},L.load=function(){let d;try{d=L.storage.getItem("debug")}catch{}return!d&&_!==void 0&&"env"in _&&(d=_.env.DEBUG),d},L.useColors=function(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},L.storage=function(){try{return localStorage}catch{}}(),L.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),L.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],L.log=console.debug||console.log||(()=>{}),z.exports=A("./common")(L);const{formatters:f}=z.exports;f.j=function(d){try{return JSON.stringify(d)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}).call(this)}).call(this,A("_process"))},{"./common":19,_process:50}],19:[function(A,z,L){z.exports=function(_){function f(i){let e,a,n,t=null;function o(...h){if(!o.enabled)return;const l=o,p=Number(new Date),g=p-(e||p);l.diff=g,l.prev=e,l.curr=p,e=p,h[0]=f.coerce(h[0]),typeof h[0]!="string"&&h.unshift("%O");let c=0;h[0]=h[0].replace(/%([a-zA-Z%])/g,(v,x)=>{if(v==="%%")return"%";c++;const C=f.formatters[x];if(typeof C=="function"){const E=h[c];v=C.call(l,E),h.splice(c,1),c--}return v}),f.formatArgs.call(l,h),(l.log||f.log).apply(l,h)}return o.namespace=i,o.useColors=f.useColors(),o.color=f.selectColor(i),o.extend=d,o.destroy=f.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>t!==null?t:(a!==f.namespaces&&(a=f.namespaces,n=f.enabled(i)),n),set:h=>{t=h}}),typeof f.init=="function"&&f.init(o),o}function d(i,e){const a=f(this.namespace+(e===void 0?":":e)+i);return a.log=this.log,a}function u(i){return i.toString().substring(2,i.toString().length-2).replace(/\.\*\?$/,"*")}return f.debug=f,f.default=f,f.coerce=function(i){return i instanceof Error?i.stack||i.message:i},f.disable=function(){const i=[...f.names.map(u),...f.skips.map(u).map(e=>"-"+e)].join(",");return f.enable(""),i},f.enable=function(i){let e;f.save(i),f.namespaces=i,f.names=[],f.skips=[];const a=(typeof i=="string"?i:"").split(/[\s,]+/),n=a.length;for(e=0;e<n;e++)a[e]&&((i=a[e].replace(/\*/g,".*?"))[0]==="-"?f.skips.push(new RegExp("^"+i.substr(1)+"$")):f.names.push(new RegExp("^"+i+"$")))},f.enabled=function(i){if(i[i.length-1]==="*")return!0;let e,a;for(e=0,a=f.skips.length;e<a;e++)if(f.skips[e].test(i))return!1;for(e=0,a=f.names.length;e<a;e++)if(f.names[e].test(i))return!0;return!1},f.humanize=A("ms"),f.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(_).forEach(i=>{f[i]=_[i]}),f.names=[],f.skips=[],f.formatters={},f.selectColor=function(i){let e=0;for(let a=0;a<i.length;a++)e=(e<<5)-e+i.charCodeAt(a),e|=0;return f.colors[Math.abs(e)%f.colors.length]},f.enable(f.load()),f}},{ms:45}],20:[function(A,z,L){(function(_,f){(function(){var d=A("readable-stream"),u=A("end-of-stream"),i=A("inherits"),e=A("stream-shift"),a=f.from&&f.from!==Uint8Array.from?f.from([0]):new f([0]),n=function(l,p){l._corked?l.once("uncork",p):p()},t=function(l,p){return function(g){g?function(c,v){c._autoDestroy&&c.destroy(v)}(l,g.message==="premature close"?null:g):p&&!l._ended&&l.end()}},o=function(){},h=function(l,p,g){if(!(this instanceof h))return new h(l,p,g);d.Duplex.call(this,g),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!g||g.autoDestroy!==!1,this._forwardDestroy=!g||g.destroy!==!1,this._forwardEnd=!g||g.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,l&&this.setWritable(l),p&&this.setReadable(p)};i(h,d.Duplex),h.obj=function(l,p,g){return g||(g={}),g.objectMode=!0,g.highWaterMark=16,new h(l,p,g)},h.prototype.cork=function(){++this._corked==1&&this.emit("cork")},h.prototype.uncork=function(){this._corked&&--this._corked==0&&this.emit("uncork")},h.prototype.setWritable=function(l){if(this._unwrite&&this._unwrite(),this.destroyed)l&&l.destroy&&l.destroy();else if(l!==null&&l!==!1){var p=this,g=u(l,{writable:!0,readable:!1},t(this,this._forwardEnd)),c=function(){var v=p._ondrain;p._ondrain=null,v&&v()};this._unwrite&&_.nextTick(c),this._writable=l,this._writable.on("drain",c),this._unwrite=function(){p._writable.removeListener("drain",c),g()},this.uncork()}else this.end()},h.prototype.setReadable=function(l){if(this._unread&&this._unread(),this.destroyed)l&&l.destroy&&l.destroy();else{if(l===null||l===!1)return this.push(null),void this.resume();var p,g=this,c=u(l,{writable:!1,readable:!0},t(this)),v=function(){g._forward()},x=function(){g.push(null)};this._drained=!0,this._readable=l,this._readable2=l._readableState?l:(p=l,new d.Readable({objectMode:!0,highWaterMark:16}).wrap(p)),this._readable2.on("readable",v),this._readable2.on("end",x),this._unread=function(){g._readable2.removeListener("readable",v),g._readable2.removeListener("end",x),c()},this._forward()}},h.prototype._read=function(){this._drained=!0,this._forward()},h.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var l;for(this._forwarding=!0;this._drained&&(l=e(this._readable2))!==null;)this.destroyed||(this._drained=this.push(l));this._forwarding=!1}},h.prototype.destroy=function(l,p){if(p||(p=o),this.destroyed)return p(null);this.destroyed=!0;var g=this;_.nextTick(function(){g._destroy(l),p(null)})},h.prototype._destroy=function(l){if(l){var p=this._ondrain;this._ondrain=null,p?p(l):this.emit("error",l)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},h.prototype._write=function(l,p,g){if(!this.destroyed)return this._corked?n(this,this._write.bind(this,l,p,g)):l===a?this._finish(g):this._writable?void(this._writable.write(l)===!1?this._ondrain=g:this.destroyed||g()):g()},h.prototype._finish=function(l){var p=this;this.emit("preend"),n(this,function(){var g,c;g=p._forwardEnd&&p._writable,c=function(){p._writableState.prefinished===!1&&(p._writableState.prefinished=!0),p.emit("prefinish"),n(p,l)},g?g._writableState&&g._writableState.finished?c():g._writableState?g.end(c):(g.end(),c()):c()})},h.prototype.end=function(l,p,g){return typeof l=="function"?this.end(null,null,l):typeof p=="function"?this.end(l,null,p):(this._ended=!0,l&&this.write(l),this._writableState.ending||this._writableState.destroyed||this.write(a),d.Writable.prototype.end.call(this,g))},z.exports=h}).call(this)}).call(this,A("_process"),A("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(A,z,L){(function(_){(function(){var f=A("once"),d=function(){},u=function(i,e,a){if(typeof e=="function")return u(i,null,e);e||(e={}),a=f(a||d);var n=i._writableState,t=i._readableState,o=e.readable||e.readable!==!1&&i.readable,h=e.writable||e.writable!==!1&&i.writable,l=!1,p=function(){i.writable||g()},g=function(){h=!1,o||a.call(i)},c=function(){o=!1,h||a.call(i)},v=function(V){a.call(i,V?new Error("exited with error code: "+V):null)},x=function(V){a.call(i,V)},C=function(){_.nextTick(E)},E=function(){if(!l)return(!o||t&&t.ended&&!t.destroyed)&&(!h||n&&n.ended&&!n.destroyed)?void 0:a.call(i,new Error("premature close"))},k=function(){i.req.on("finish",g)};return function(V){return V.setHeader&&typeof V.abort=="function"}(i)?(i.on("complete",g),i.on("abort",C),i.req?k():i.on("request",k)):h&&!n&&(i.on("end",p),i.on("close",p)),function(V){return V.stdio&&Array.isArray(V.stdio)&&V.stdio.length===3}(i)&&i.on("exit",v),i.on("end",c),i.on("finish",g),e.error!==!1&&i.on("error",x),i.on("close",C),function(){l=!0,i.removeListener("complete",g),i.removeListener("abort",C),i.removeListener("request",k),i.req&&i.req.removeListener("finish",g),i.removeListener("end",p),i.removeListener("close",p),i.removeListener("finish",g),i.removeListener("exit",v),i.removeListener("end",c),i.removeListener("error",x),i.removeListener("close",C)}};z.exports=u}).call(this)}).call(this,A("_process"))},{_process:50,once:48}],22:[function(A,z,L){var _=Object.create||function(c){var v=function(){};return v.prototype=c,new v},f=Object.keys||function(c){var v=[];for(var x in c)Object.prototype.hasOwnProperty.call(c,x)&&v.push(x);return x},d=Function.prototype.bind||function(c){var v=this;return function(){return v.apply(c,arguments)}};function u(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=_(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}z.exports=u,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._maxListeners=void 0;var i,e=10;try{var a={};Object.defineProperty&&Object.defineProperty(a,"x",{value:0}),i=a.x===0}catch{i=!1}function n(c){return c._maxListeners===void 0?u.defaultMaxListeners:c._maxListeners}function t(c,v,x,C){var E,k,V;if(typeof x!="function")throw new TypeError('"listener" argument must be a function');if((k=c._events)?(k.newListener&&(c.emit("newListener",v,x.listener?x.listener:x),k=c._events),V=k[v]):(k=c._events=_(null),c._eventsCount=0),V){if(typeof V=="function"?V=k[v]=C?[x,V]:[V,x]:C?V.unshift(x):V.push(x),!V.warned&&(E=n(c))&&E>0&&V.length>E){V.warned=!0;var Q=new Error("Possible EventEmitter memory leak detected. "+V.length+' "'+String(v)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');Q.name="MaxListenersExceededWarning",Q.emitter=c,Q.type=v,Q.count=V.length,typeof console=="object"&&console.warn&&console.warn("%s: %s",Q.name,Q.message)}}else V=k[v]=x,++c._eventsCount;return c}function o(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var c=new Array(arguments.length),v=0;v<c.length;++v)c[v]=arguments[v];this.listener.apply(this.target,c)}}function h(c,v,x){var C={fired:!1,wrapFn:void 0,target:c,type:v,listener:x},E=d.call(o,C);return E.listener=x,C.wrapFn=E,E}function l(c,v,x){var C=c._events;if(!C)return[];var E=C[v];return E?typeof E=="function"?x?[E.listener||E]:[E]:x?function(k){for(var V=new Array(k.length),Q=0;Q<V.length;++Q)V[Q]=k[Q].listener||k[Q];return V}(E):g(E,E.length):[]}function p(c){var v=this._events;if(v){var x=v[c];if(typeof x=="function")return 1;if(x)return x.length}return 0}function g(c,v){for(var x=new Array(v),C=0;C<v;++C)x[C]=c[C];return x}i?Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return e},set:function(c){if(typeof c!="number"||c<0||c!=c)throw new TypeError('"defaultMaxListeners" must be a positive number');e=c}}):u.defaultMaxListeners=e,u.prototype.setMaxListeners=function(c){if(typeof c!="number"||c<0||isNaN(c))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=c,this},u.prototype.getMaxListeners=function(){return n(this)},u.prototype.emit=function(c){var v,x,C,E,k,V,Q=c==="error";if(V=this._events)Q=Q&&V.error==null;else if(!Q)return!1;if(Q){if(arguments.length>1&&(v=arguments[1]),v instanceof Error)throw v;var y=new Error('Unhandled "error" event. ('+v+")");throw y.context=v,y}if(!(x=V[c]))return!1;var m=typeof x=="function";switch(C=arguments.length){case 1:(function(S,w,I){if(w)S.call(I);else for(var N=S.length,D=g(S,N),M=0;M<N;++M)D[M].call(I)})(x,m,this);break;case 2:(function(S,w,I,N){if(w)S.call(I,N);else for(var D=S.length,M=g(S,D),P=0;P<D;++P)M[P].call(I,N)})(x,m,this,arguments[1]);break;case 3:(function(S,w,I,N,D){if(w)S.call(I,N,D);else for(var M=S.length,P=g(S,M),O=0;O<M;++O)P[O].call(I,N,D)})(x,m,this,arguments[1],arguments[2]);break;case 4:(function(S,w,I,N,D,M){if(w)S.call(I,N,D,M);else for(var P=S.length,O=g(S,P),R=0;R<P;++R)O[R].call(I,N,D,M)})(x,m,this,arguments[1],arguments[2],arguments[3]);break;default:for(E=new Array(C-1),k=1;k<C;k++)E[k-1]=arguments[k];(function(S,w,I,N){if(w)S.apply(I,N);else for(var D=S.length,M=g(S,D),P=0;P<D;++P)M[P].apply(I,N)})(x,m,this,E)}return!0},u.prototype.addListener=function(c,v){return t(this,c,v,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(c,v){return t(this,c,v,!0)},u.prototype.once=function(c,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.on(c,h(this,c,v)),this},u.prototype.prependOnceListener=function(c,v){if(typeof v!="function")throw new TypeError('"listener" argument must be a function');return this.prependListener(c,h(this,c,v)),this},u.prototype.removeListener=function(c,v){var x,C,E,k,V;if(typeof v!="function")throw new TypeError('"listener" argument must be a function');if(!(C=this._events))return this;if(!(x=C[c]))return this;if(x===v||x.listener===v)--this._eventsCount==0?this._events=_(null):(delete C[c],C.removeListener&&this.emit("removeListener",c,x.listener||v));else if(typeof x!="function"){for(E=-1,k=x.length-1;k>=0;k--)if(x[k]===v||x[k].listener===v){V=x[k].listener,E=k;break}if(E<0)return this;E===0?x.shift():function(Q,y){for(var m=y,S=m+1,w=Q.length;S<w;m+=1,S+=1)Q[m]=Q[S];Q.pop()}(x,E),x.length===1&&(C[c]=x[0]),C.removeListener&&this.emit("removeListener",c,V||v)}return this},u.prototype.removeAllListeners=function(c){var v,x,C;if(!(x=this._events))return this;if(!x.removeListener)return arguments.length===0?(this._events=_(null),this._eventsCount=0):x[c]&&(--this._eventsCount==0?this._events=_(null):delete x[c]),this;if(arguments.length===0){var E,k=f(x);for(C=0;C<k.length;++C)(E=k[C])!=="removeListener"&&this.removeAllListeners(E);return this.removeAllListeners("removeListener"),this._events=_(null),this._eventsCount=0,this}if(typeof(v=x[c])=="function")this.removeListener(c,v);else if(v)for(C=v.length-1;C>=0;C--)this.removeListener(c,v[C]);return this},u.prototype.listeners=function(c){return l(this,c,!0)},u.prototype.rawListeners=function(c){return l(this,c,!1)},u.listenerCount=function(c,v){return typeof c.listenerCount=="function"?c.listenerCount(v):p.call(c,v)},u.prototype.listenerCount=p,u.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(A,z,L){L.read=function(_,f,d,u,i){var e,a,n=8*i-u-1,t=(1<<n)-1,o=t>>1,h=-7,l=d?i-1:0,p=d?-1:1,g=_[f+l];for(l+=p,e=g&(1<<-h)-1,g>>=-h,h+=n;h>0;e=256*e+_[f+l],l+=p,h-=8);for(a=e&(1<<-h)-1,e>>=-h,h+=u;h>0;a=256*a+_[f+l],l+=p,h-=8);if(e===0)e=1-o;else{if(e===t)return a?NaN:1/0*(g?-1:1);a+=Math.pow(2,u),e-=o}return(g?-1:1)*a*Math.pow(2,e-u)},L.write=function(_,f,d,u,i,e){var a,n,t,o=8*e-i-1,h=(1<<o)-1,l=h>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=u?0:e-1,c=u?1:-1,v=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(n=isNaN(f)?1:0,a=h):(a=Math.floor(Math.log(f)/Math.LN2),f*(t=Math.pow(2,-a))<1&&(a--,t*=2),(f+=a+l>=1?p/t:p*Math.pow(2,1-l))*t>=2&&(a++,t/=2),a+l>=h?(n=0,a=h):a+l>=1?(n=(f*t-1)*Math.pow(2,i),a+=l):(n=f*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;_[d+g]=255&n,g+=c,n/=256,i-=8);for(a=a<<i|n,o+=i;o>0;_[d+g]=255&a,g+=c,a/=256,o-=8);_[d+g-c]|=128*v}},{}],24:[function(A,z,L){typeof Object.create=="function"?z.exports=function(_,f){f&&(_.super_=f,_.prototype=Object.create(f.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}))}:z.exports=function(_,f){if(f){_.super_=f;var d=function(){};d.prototype=f.prototype,_.prototype=new d,_.prototype.constructor=_}}},{}],25:[function(A,z,L){Object.defineProperty(L,"__esModule",{value:!0});var _=function(){function f(d,u){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=d,this.value=u}return f.prototype.rotateLeft=function(){var d=this.parent,u=this.brother,i=this.leftChild,e=this.rightChild;if(!e)throw new Error("unknown error");var a=e.leftChild,n=e.rightChild;return d&&(d.leftChild===this?d.leftChild=e:d.rightChild===this&&(d.rightChild=e)),e.parent=d,e.brother=u,e.leftChild=this,e.rightChild=n,u&&(u.brother=e),this.parent=e,this.brother=n,this.leftChild=i,this.rightChild=a,n&&(n.parent=e,n.brother=this),i&&(i.parent=this,i.brother=a),a&&(a.parent=this,a.brother=i),e},f.prototype.rotateRight=function(){var d=this.parent,u=this.brother,i=this.leftChild;if(!i)throw new Error("unknown error");var e=this.rightChild,a=i.leftChild,n=i.rightChild;return d&&(d.leftChild===this?d.leftChild=i:d.rightChild===this&&(d.rightChild=i)),i.parent=d,i.brother=u,i.leftChild=a,i.rightChild=this,u&&(u.brother=i),a&&(a.parent=i,a.brother=this),this.parent=i,this.brother=a,this.leftChild=n,this.rightChild=e,n&&(n.parent=this,n.brother=e),e&&(e.parent=this,e.brother=n),i},f.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},f.TreeNodeColorType={red:!0,black:!1},f}();Object.freeze(_),L.default=_},{}],26:[function(A,z,L){var _=this&&this.__generator||function(d,u){var i,e,a,n,t={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(n[Symbol.iterator]=function(){return this}),n;function o(h){return function(l){return function(p){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,e&&(a=2&p[0]?e.return:p[0]?e.throw||((a=e.return)&&a.call(e),0):e.next)&&!(a=a.call(e,p[1])).done)return a;switch(e=0,a&&(p=[2&p[0],a.value]),p[0]){case 0:case 1:a=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,e=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(!(a=(a=t.trys).length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){t.label=p[1];break}if(p[0]===6&&t.label<a[1]){t.label=a[1],a=p;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(p);break}a[2]&&t.ops.pop(),t.trys.pop();continue}p=u.call(d,t)}catch(g){p=[6,g],e=0}finally{i=a=0}if(5&p[0])throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}([h,l])}}};function f(d){var u=this;d===void 0&&(d=[]);var i=[],e=0,a=0,n=0,t=0,o=0,h=0;this.size=function(){return h},this.empty=function(){return h===0},this.clear=function(){e=n=a=t=o=h=0,p.call(this,f.bucketSize),h=0},this.front=function(){return i[e][a]},this.back=function(){return i[n][t]},this.forEach=function(g){if(!this.empty()){var c=0;if(e!==n){for(x=a;x<f.bucketSize;++x)g(i[e][x],c++);for(x=e+1;x<n;++x)for(var v=0;v<f.bucketSize;++v)g(i[x][v],c++);for(x=0;x<=t;++x)g(i[n][x],c++)}else for(var x=a;x<=t;++x)g(i[e][x],c++)}};var l=function(g){var c=e*f.bucketSize+a,v=c+g,x=n*f.bucketSize+t;if(v<c||v>x)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(v/f.bucketSize),curNodePointerIndex:v%f.bucketSize}};this.getElementByPos=function(g){var c=l(g),v=c.curNodeBucketIndex,x=c.curNodePointerIndex;return i[v][x]},this.eraseElementByPos=function(g){var c=this;if(g<0||g>h)throw new Error("pos should more than 0 and less than queue's size");if(g===0)this.popFront();else if(g===this.size())this.popBack();else{for(var v=[],x=g+1;x<h;++x)v.push(this.getElementByPos(x));this.cut(g),this.popBack(),v.forEach(function(C){return c.pushBack(C)})}},this.eraseElementByValue=function(g){if(!this.empty()){var c=[];this.forEach(function(C){C!==g&&c.push(C)});for(var v=c.length,x=0;x<v;++x)this.setElementByPos(x,c[x]);this.cut(v-1)}};var p=function(g){for(var c=[],v=g*f.sigma,x=Math.max(Math.ceil(v/f.bucketSize),2),C=0;C<x;++C)c.push(new Array(f.bucketSize));var E=Math.ceil(g/f.bucketSize),k=Math.floor(x/2)-Math.floor(E/2),V=k,Q=0;if(this.size())for(C=0;C<E;++C){for(var y=0;y<f.bucketSize;++y)if(c[k+C][y]=this.front(),this.popFront(),this.empty()){V=k+C,Q=y;break}if(this.empty())break}i=c,e=k,a=0,n=V,t=Q,o=x,h=g};this.pushBack=function(g){this.empty()||(n===o-1&&t===f.bucketSize-1&&p.call(this,this.size()),t<f.bucketSize-1?++t:n<o-1&&(++n,t=0)),++h,i[n][t]=g},this.popBack=function(){this.empty()||(this.size()!==1&&(t>0?--t:e<n&&(--n,t=f.bucketSize-1)),h>0&&--h)},this.setElementByPos=function(g,c){var v=l(g),x=v.curNodeBucketIndex,C=v.curNodePointerIndex;i[x][C]=c},this.insert=function(g,c,v){var x=this;if(v===void 0&&(v=1),g===0)for(;v--;)this.pushFront(c);else if(g===this.size())for(;v--;)this.pushBack(c);else{for(var C=[],E=g;E<h;++E)C.push(this.getElementByPos(E));for(this.cut(g-1),E=0;E<v;++E)this.pushBack(c);C.forEach(function(k){return x.pushBack(k)})}},this.find=function(g){if(e===n){for(var c=a;c<=t;++c)if(i[e][c]===g)return!0;return!1}for(c=a;c<f.bucketSize;++c)if(i[e][c]===g)return!0;for(c=e+1;c<n;++c)for(var v=0;v<f.bucketSize;++v)if(i[c][v]===g)return!0;for(c=0;c<=t;++c)if(i[n][c]===g)return!0;return!1},this.reverse=function(){for(var g=0,c=h-1;g<c;){var v=this.getElementByPos(g);this.setElementByPos(g,this.getElementByPos(c)),this.setElementByPos(c,v),++g,--c}},this.unique=function(){if(!this.empty()){var g=[],c=this.front();this.forEach(function(x,C){C!==0&&x===c||(g.push(x),c=x)});for(var v=0;v<h;++v)this.setElementByPos(v,g[v]);this.cut(g.length-1)}},this.sort=function(g){var c=[];this.forEach(function(x){c.push(x)}),c.sort(g);for(var v=0;v<h;++v)this.setElementByPos(v,c[v])},this.pushFront=function(g){this.empty()||(e===0&&a===0&&p.call(this,this.size()),a>0?--a:e>0&&(--e,a=f.bucketSize-1)),++h,i[e][a]=g},this.popFront=function(){this.empty()||(this.size()!==1&&(a<f.bucketSize-1?++a:e<n&&(++e,a=0)),h>0&&--h)},this.shrinkToFit=function(){var g=this,c=[];this.forEach(function(E){c.push(E)});var v=c.length;i=[];for(var x=Math.ceil(v/f.bucketSize),C=0;C<x;++C)i.push(new Array(f.bucketSize));this.clear(),c.forEach(function(E){return g.pushBack(E)})},this.cut=function(g){if(g<0)this.clear();else{var c=l(g),v=c.curNodeBucketIndex,x=c.curNodePointerIndex;n=v,t=x,h=g+1}},this[Symbol.iterator]=function(){return function(){var g,c;return _(this,function(v){switch(v.label){case 0:if(h===0)return[2];if(e!==n)return[3,5];c=a,v.label=1;case 1:return c<=t?[4,i[e][c]]:[3,4];case 2:v.sent(),v.label=3;case 3:return++c,[3,1];case 4:return[2];case 5:c=a,v.label=6;case 6:return c<f.bucketSize?[4,i[e][c]]:[3,9];case 7:v.sent(),v.label=8;case 8:return++c,[3,6];case 9:c=e+1,v.label=10;case 10:if(!(c<n))return[3,15];g=0,v.label=11;case 11:return g<f.bucketSize?[4,i[c][g]]:[3,14];case 12:v.sent(),v.label=13;case 13:return++g,[3,11];case 14:return++c,[3,10];case 15:c=0,v.label=16;case 16:return c<=t?[4,i[n][c]]:[3,19];case 17:v.sent(),v.label=18;case 18:return++c,[3,16];case 19:return[2]}})}()},function(){var g=f.bucketSize;d.size?g=d.size():d.length&&(g=d.length);var c=g*f.sigma;o=Math.ceil(c/f.bucketSize),o=Math.max(o,3);for(var v=0;v<o;++v)i.push(new Array(f.bucketSize));var x=Math.ceil(g/f.bucketSize);e=Math.floor(o/2)-Math.floor(x/2),n=e,d.forEach(function(C){return u.pushBack(C)})}(),Object.freeze(this)}Object.defineProperty(L,"__esModule",{value:!0}),f.sigma=3,f.bucketSize=5e3,Object.freeze(f),L.default=f},{}],27:[function(A,z,L){var _=this&&this.__generator||function(e,a){var n,t,o,h,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(c){return function(v){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,t&&(o=2&v[0]?t.return:v[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,v[1])).done)return o;switch(t=0,o&&(v=[2&v[0],o.value]),v[0]){case 0:case 1:o=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,t=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){l.label=v[1];break}if(v[0]===6&&l.label<o[1]){l.label=o[1],o=v;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(v);break}o[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(e,l)}catch(x){v=[6,x],t=0}finally{n=o=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([g,c])}}},f=this&&this.__values||function(e){var a=typeof Symbol=="function"&&Symbol.iterator,n=a&&e[a],t=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var d=A("../LinkList/LinkList"),u=A("../Map/Map");function i(e,a,n){var t=this;if(e===void 0&&(e=[]),a===void 0&&(a=i.initSize),n=n||function(p){var g,c,v=0,x="";if(typeof p=="number")v=((v=Math.floor(p))<<5)-v,v&=v;else{x=typeof p!="string"?JSON.stringify(p):p;try{for(var C=f(x),E=C.next();!E.done;E=C.next())v=(v<<5)-v+E.value.charCodeAt(0),v&=v}catch(k){g={error:k}}finally{try{E&&!E.done&&(c=C.return)&&c.call(C)}finally{if(g)throw g.error}}}return v^=v>>>16},(a&a-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var o=0,h=[],l=Math.max(i.initSize,Math.min(i.maxSize,a));this.size=function(){return o},this.empty=function(){return o===0},this.clear=function(){o=0,l=a,h=[]},this.forEach=function(p){var g=0;h.forEach(function(c){c.forEach(function(v){p(v,g++)})})},this.setElement=function(p,g){var c,v;if(p==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(g!=null){var x=n(p)&l-1;if(h[x]){var C=h[x].size();if(h[x]instanceof d.default){try{for(var E=f(h[x]),k=E.next();!k.done;k=E.next()){var V=k.value;if(V.key===p)return void(V.value=g)}}catch(y){c={error:y}}finally{try{k&&!k.done&&(v=E.return)&&v.call(E)}finally{if(c)throw c.error}}h[x].pushBack({key:p,value:g}),h[x].size()>=i.treeifyThreshold&&(h[x]=new u.default(h[x]))}else h[x].setElement(p,g);var Q=h[x].size();o+=Q-C}else++o,h[x]=new d.default([{key:p,value:g}]);o>l*i.sigma&&function(y){if(!(y>=i.maxSize)){l=2*y;var m=[];h.forEach(function(S,w){if(!S.empty()){if(S instanceof d.default&&S.size()===1){var I=S.front(),N=I.key,D=I.value;m[n(N)&l-1]=new d.default([{key:N,value:D}])}else if(S instanceof u.default){var M=new d.default,P=new d.default;S.forEach(function(B){n(B.key)&y?P.pushBack(B):M.pushBack(B)}),M.size()>i.untreeifyThreshold?m[w]=new u.default(M):M.size()&&(m[w]=M),P.size()>i.untreeifyThreshold?m[w+y]=new u.default(P):P.size()&&(m[w+y]=P)}else{var O=new d.default,R=new d.default;S.forEach(function(B){n(B.key)&y?R.pushBack(B):O.pushBack(B)}),O.size()&&(m[w]=O),R.size()&&(m[w+y]=R)}h[w].clear()}}),h=m}}.call(this,l)}else this.eraseElementByKey(p)},this.getElementByKey=function(p){var g,c,v=n(p)&l-1;if(h[v]){if(h[v]instanceof u.default)return h[v].getElementByKey(p);try{for(var x=f(h[v]),C=x.next();!C.done;C=x.next()){var E=C.value;if(E.key===p)return E.value}}catch(k){g={error:k}}finally{try{C&&!C.done&&(c=x.return)&&c.call(x)}finally{if(g)throw g.error}}}},this.eraseElementByKey=function(p){var g,c,v=n(p)&l-1;if(h[v]){var x=h[v].size();if(h[v]instanceof u.default)h[v].eraseElementByKey(p),h[v].size()<=i.untreeifyThreshold&&(h[v]=new d.default(h[v]));else{var C=-1;try{for(var E=f(h[v]),k=E.next();!k.done;k=E.next())if(++C,k.value.key===p){h[v].eraseElementByPos(C);break}}catch(Q){g={error:Q}}finally{try{k&&!k.done&&(c=E.return)&&c.call(E)}finally{if(g)throw g.error}}}var V=h[v].size();o+=V-x}},this.find=function(p){var g,c,v=n(p)&l-1;if(!h[v])return!1;if(h[v]instanceof u.default)return h[v].find(p);try{for(var x=f(h[v]),C=x.next();!C.done;C=x.next())if(C.value.key===p)return!0}catch(E){g={error:E}}finally{try{C&&!C.done&&(c=x.return)&&c.call(x)}finally{if(g)throw g.error}}return!1},this[Symbol.iterator]=function(){return function(){var p,g,c,v,x,C;return _(this,function(E){switch(E.label){case 0:p=0,E.label=1;case 1:if(!(p<l))return[3,10];for(;p<l&&!h[p];)++p;if(p>=l)return[3,10];E.label=2;case 2:E.trys.push([2,7,8,9]),x=void 0,g=f(h[p]),c=g.next(),E.label=3;case 3:return c.done?[3,6]:[4,c.value];case 4:E.sent(),E.label=5;case 5:return c=g.next(),[3,3];case 6:return[3,9];case 7:return v=E.sent(),x={error:v},[3,9];case 8:try{c&&!c.done&&(C=g.return)&&C.call(g)}finally{if(x)throw x.error}return[7];case 9:return++p,[3,1];case 10:return[2]}})}()},e.forEach(function(p){var g=p.key,c=p.value;return t.setElement(g,c)}),Object.freeze(this)}i.initSize=16,i.maxSize=1<<30,i.sigma=.75,i.treeifyThreshold=8,i.untreeifyThreshold=6,i.minTreeifySize=64,Object.freeze(i),L.default=i},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(A,z,L){var _=this&&this.__generator||function(e,a){var n,t,o,h,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(c){return function(v){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,t&&(o=2&v[0]?t.return:v[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,v[1])).done)return o;switch(t=0,o&&(v=[2&v[0],o.value]),v[0]){case 0:case 1:o=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,t=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){l.label=v[1];break}if(v[0]===6&&l.label<o[1]){l.label=o[1],o=v;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(v);break}o[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(e,l)}catch(x){v=[6,x],t=0}finally{n=o=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([g,c])}}},f=this&&this.__values||function(e){var a=typeof Symbol=="function"&&Symbol.iterator,n=a&&e[a],t=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var d=A("../Set/Set"),u=A("../LinkList/LinkList");function i(e,a,n){var t=this;if(e===void 0&&(e=[]),a===void 0&&(a=i.initSize),n=n||function(p){var g=0,c="";if(typeof p=="number")g=((g=Math.floor(p))<<5)-g,g&=g;else{c=typeof p!="string"?JSON.stringify(p):p;for(var v=0;v<c.length;v++)g=(g<<5)-g+c.charCodeAt(v),g&=g}return g^=g>>>16},(a&a-1)!=0)throw new Error("initBucketNum must be 2 to the power of n");var o=0,h=[],l=Math.max(i.initSize,Math.min(i.maxSize,a));this.size=function(){return o},this.empty=function(){return o===0},this.clear=function(){o=0,l=a,h=[]},this.forEach=function(p){var g=0;h.forEach(function(c){c.forEach(function(v){p(v,g++)})})},this.insert=function(p){if(p==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var g=n(p)&l-1;if(h[g]){var c=h[g].size();if(h[g]instanceof u.default){if(h[g].find(p))return;h[g].pushBack(p),h[g].size()>=i.treeifyThreshold&&(h[g]=new d.default(h[g]))}else h[g].insert(p);var v=h[g].size();o+=v-c}else h[g]=new u.default([p]),++o;o>l*i.sigma&&function(x){if(!(x>=i.maxSize)){l=2*x;var C=[];h.forEach(function(E,k){if(!E.empty()){if(E instanceof u.default&&E.size()===1){var V=E.front();if(V===void 0)throw new Error("unknown error");C[n(V)&l-1]=new u.default([V])}else if(E instanceof d.default){var Q=new u.default,y=new u.default;E.forEach(function(w){n(w)&x?y.pushBack(w):Q.pushBack(w)}),Q.size()>i.untreeifyThreshold?C[k]=new d.default(Q):Q.size()&&(C[k]=Q),y.size()>i.untreeifyThreshold?C[k+x]=new d.default(y):y.size()&&(C[k+x]=y)}else{var m=new u.default,S=new u.default;E.forEach(function(w){n(w)&x?S.pushBack(w):m.pushBack(w)}),m.size()&&(C[k]=m),S.size()&&(C[k+x]=S)}h[k].clear()}}),h=C}}.call(this,l)},this.eraseElementByValue=function(p){var g=n(p)&l-1;if(h[g]){var c=h[g].size();h[g].eraseElementByValue(p),h[g]instanceof d.default&&h[g].size()<=i.untreeifyThreshold&&(h[g]=new u.default(h[g]));var v=h[g].size();o+=v-c}},this.find=function(p){var g=n(p)&l-1;return!!h[g]&&h[g].find(p)},this[Symbol.iterator]=function(){return function(){var p,g,c,v,x,C;return _(this,function(E){switch(E.label){case 0:p=0,E.label=1;case 1:if(!(p<l))return[3,10];for(;p<l&&!h[p];)++p;if(p>=l)return[3,10];E.label=2;case 2:E.trys.push([2,7,8,9]),x=void 0,g=f(h[p]),c=g.next(),E.label=3;case 3:return c.done?[3,6]:[4,c.value];case 4:E.sent(),E.label=5;case 5:return c=g.next(),[3,3];case 6:return[3,9];case 7:return v=E.sent(),x={error:v},[3,9];case 8:try{c&&!c.done&&(C=g.return)&&C.call(g)}finally{if(x)throw x.error}return[7];case 9:return++p,[3,1];case 10:return[2]}})}()},e.forEach(function(p){return t.insert(p)}),Object.freeze(this)}i.initSize=16,i.maxSize=1<<30,i.sigma=.75,i.treeifyThreshold=8,i.untreeifyThreshold=6,i.minTreeifySize=64,Object.freeze(i),L.default=i},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(A,z,L){var _=this&&this.__generator||function(u,i){var e,a,n,t,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return t={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(t[Symbol.iterator]=function(){return this}),t;function h(l){return function(p){return function(g){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,a&&(n=2&g[0]?a.return:g[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,g[1])).done)return n;switch(a=0,n&&(g=[2&g[0],n.value]),g[0]){case 0:case 1:n=g;break;case 4:return o.label++,{value:g[1],done:!1};case 5:o.label++,a=g[1],g=[0];continue;case 7:g=o.ops.pop(),o.trys.pop();continue;default:if(!(n=(n=o.trys).length>0&&n[n.length-1])&&(g[0]===6||g[0]===2)){o=0;continue}if(g[0]===3&&(!n||g[1]>n[0]&&g[1]<n[3])){o.label=g[1];break}if(g[0]===6&&o.label<n[1]){o.label=n[1],n=g;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(g);break}n[2]&&o.ops.pop(),o.trys.pop();continue}g=i.call(u,o)}catch(c){g=[6,c],a=0}finally{e=n=0}if(5&g[0])throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}([l,p])}}};Object.defineProperty(L,"__esModule",{value:!0});var f=function(){return function(u){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=u}}();function d(u){var i=this;u===void 0&&(u=[]);var e=0,a=void 0,n=void 0;this.size=function(){return e},this.empty=function(){return e===0},this.clear=function(){a=n=void 0,e=0},this.front=function(){return a==null?void 0:a.value},this.back=function(){return n==null?void 0:n.value},this.forEach=function(t){for(var o=a,h=0;o;){if(o.value===void 0)throw new Error("unknown error");t(o.value,h++),o=o.next}},this.getElementByPos=function(t){if(t<0||t>=e)throw new Error("pos must more then 0 and less then the list length");for(var o=a;t--&&o;)o=o.next;if(!o||o.value===void 0)throw new Error("unknown error");return o.value},this.eraseElementByPos=function(t){if(t<0||t>=e)throw new Error("erase pos must more then 0 and less then the list length");if(t===0)this.popFront();else if(t===e-1)this.popBack();else{for(var o=a;t--;){if(!(o!=null&&o.next))throw new Error("unknown error");o=o.next}if(!o||!o.pre||!o.next)throw new Error("unknown error");var h=o.pre,l=o.next;l.pre=h,h.next=l,e>0&&--e}},this.eraseElementByValue=function(t){for(;a&&a.value===t;)this.popFront();for(;n&&n.value===t;)this.popBack();if(a)for(var o=a;o;){if(o.value===t){var h=o.pre,l=o.next;l&&(l.pre=h),h&&(h.next=l),e>0&&--e}o=o.next}},this.pushBack=function(t){if(t==null)throw new Error("you can't push null or undefined here");++e;var o=new f(t);n?(n.next=o,o.pre=n,n=o):a=n=o},this.popBack=function(){n&&(e>0&&--e,n&&(a===n?a=n=void 0:(n=n.pre)&&(n.next=void 0)))},this.setElementByPos=function(t,o){if(o==null)throw new Error("you can't set null or undefined here");if(t<0||t>=e)throw new Error("pos must more then 0 and less then the list length");for(var h=a;t--;){if(!h)throw new Error("unknown error");h=h.next}h&&(h.value=o)},this.insert=function(t,o,h){if(h===void 0&&(h=1),o==null)throw new Error("you can't insert null or undefined here");if(t<0||t>e)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(h<0)throw new Error("insert size must more than 0");if(t===0)for(;h--;)this.pushFront(o);else if(t===e)for(;h--;)this.pushBack(o);else{for(var l=a,p=1;p<t;++p){if(!(l!=null&&l.next))throw new Error("unknown error");l=l==null?void 0:l.next}if(!l)throw new Error("unknown error");var g=l.next;for(e+=h;h--;)l.next=new f(o),l.next.pre=l,l=l.next;l.next=g,g&&(g.pre=l)}},this.find=function(t){for(var o=a;o;){if(o.value===t)return!0;o=o.next}return!1},this.reverse=function(){for(var t=a,o=n,h=0;t&&o&&2*h<e;){var l=t.value;t.value=o.value,o.value=l,t=t.next,o=o.pre,++h}},this.unique=function(){for(var t=a;t;){for(var o=t;o&&o.next&&o.value===o.next.value;)o=o.next,e>0&&--e;t.next=o.next,t.next&&(t.next.pre=t),t=t.next}},this.sort=function(t){var o=[];this.forEach(function(l){o.push(l)}),o.sort(t);var h=a;o.forEach(function(l){h&&(h.value=l,h=h.next)})},this.pushFront=function(t){if(t==null)throw new Error("you can't push null or undefined here");++e;var o=new f(t);a?(o.next=a,a.pre=o,a=o):a=n=o},this.popFront=function(){a&&(e>0&&--e,a&&(a===n?a=n=void 0:(a=a.next)&&(a.pre=void 0)))},this.merge=function(t){var o=this,h=a;t.forEach(function(l){for(;h&&h.value!==void 0&&h.value<=l;)h=h.next;if(h===void 0)o.pushBack(l),h=n;else if(h===a)o.pushFront(l),h=a;else{++e;var p=h.pre;p&&(p.next=new f(l),p.next.pre=p,p.next.next=h,h&&(h.pre=p.next))}})},this[Symbol.iterator]=function(){return function(){var t;return _(this,function(o){switch(o.label){case 0:t=a,o.label=1;case 1:if(t===void 0)return[3,3];if(!t.value)throw new Error("unknown error");return[4,t.value];case 2:return o.sent(),t=t.next,[3,1];case 3:return[2]}})}()},u.forEach(function(t){return i.pushBack(t)}),Object.freeze(this)}Object.freeze(d),L.default=d},{}],30:[function(A,z,L){var _=this&&this.__generator||function(i,e){var a,n,t,o,h={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(p){return function(g){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,n&&(t=2&c[0]?n.return:c[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,c[1])).done)return t;switch(n=0,t&&(c=[2&c[0],t.value]),c[0]){case 0:case 1:t=c;break;case 4:return h.label++,{value:c[1],done:!1};case 5:h.label++,n=c[1],c=[0];continue;case 7:c=h.ops.pop(),h.trys.pop();continue;default:if(!(t=(t=h.trys).length>0&&t[t.length-1])&&(c[0]===6||c[0]===2)){h=0;continue}if(c[0]===3&&(!t||c[1]>t[0]&&c[1]<t[3])){h.label=c[1];break}if(c[0]===6&&h.label<t[1]){h.label=t[1],t=c;break}if(t&&h.label<t[2]){h.label=t[2],h.ops.push(c);break}t[2]&&h.ops.pop(),h.trys.pop();continue}c=e.call(i,h)}catch(v){c=[6,v],n=0}finally{a=t=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([p,g])}}},f=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&i[e],n=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var d=A("../Base/TreeNode");function u(i,e){var a=this;i===void 0&&(i=[]),e=e||function(y,m){return y<m?-1:y>m?1:0};var n=0,t=new d.default;t.color=d.default.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,t.key=t.value=void 0,t.leftChild=t.rightChild=t.brother=void 0};var o=function(y){if(!y||y.key===void 0)throw new Error("unknown error");return y.leftChild?o(y.leftChild):y},h=function(y){if(!y||y.key===void 0)throw new Error("unknown error");return y.rightChild?h(y.rightChild):y};this.front=function(){if(!this.empty()){var y=o(t);if(y.key===void 0||y.value===void 0)throw new Error("unknown error");return{key:y.key,value:y.value}}},this.back=function(){if(!this.empty()){var y=h(t);if(y.key===void 0||y.value===void 0)throw new Error("unknown error");return{key:y.key,value:y.value}}},this.forEach=function(y){var m,S,w=0;try{for(var I=f(this),N=I.next();!N.done;N=I.next())y(N.value,w++)}catch(D){m={error:D}}finally{try{N&&!N.done&&(S=I.return)&&S.call(I)}finally{if(m)throw m.error}}},this.getElementByPos=function(y){var m,S;if(y<0||y>=this.size())throw new Error("pos must more than 0 and less than set's size");var w=0;try{for(var I=f(this),N=I.next();!N.done;N=I.next()){var D=N.value;if(w===y)return D;++w}}catch(M){m={error:M}}finally{try{N&&!N.done&&(S=I.return)&&S.call(I)}finally{if(m)throw m.error}}throw new Error("unknown Error")};var l=function(y,m){if(y&&y.key!==void 0&&y.value!==void 0){var S=e(y.key,m);return S===0?{key:y.key,value:y.value}:S<0?l(y.rightChild,m):l(y.leftChild,m)||{key:y.key,value:y.value}}};this.lowerBound=function(y){return l(t,y)};var p=function(y,m){if(y&&y.key!==void 0&&y.value!==void 0)return e(y.key,m)<=0?p(y.rightChild,m):p(y.leftChild,m)||{key:y.key,value:y.value}};this.upperBound=function(y){return p(t,y)};var g=function(y,m){if(y&&y.key!==void 0&&y.value!==void 0){var S=e(y.key,m);return S===0?{key:y.key,value:y.value}:S>0?g(y.leftChild,m):g(y.rightChild,m)||{key:y.key,value:y.value}}};this.reverseLowerBound=function(y){return g(t,y)};var c=function(y,m){if(y&&y.key!==void 0&&y.value!==void 0)return e(y.key,m)>=0?c(y.leftChild,m):c(y.rightChild,m)||{key:y.key,value:y.value}};this.reverseUpperBound=function(y){return c(t,y)};var v=function(y){var m=y.parent;if(!m){if(y===t)return;throw new Error("unknown error")}if(y.color!==d.default.TreeNodeColorType.red){var S=y.brother;if(!S)throw new Error("unknown error");if(y===m.leftChild)if(S.color===d.default.TreeNodeColorType.red){S.color=d.default.TreeNodeColorType.black,m.color=d.default.TreeNodeColorType.red;var w=m.rotateLeft();t===m&&(t=w),v(y)}else S.color===d.default.TreeNodeColorType.black&&(S.rightChild&&S.rightChild.color===d.default.TreeNodeColorType.red?(S.color=m.color,m.color=d.default.TreeNodeColorType.black,S.rightChild&&(S.rightChild.color=d.default.TreeNodeColorType.black),w=m.rotateLeft(),t===m&&(t=w),y.color=d.default.TreeNodeColorType.black):S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||!S.leftChild||S.leftChild.color!==d.default.TreeNodeColorType.red?S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||(S.color=d.default.TreeNodeColorType.red,v(m)):(S.color=d.default.TreeNodeColorType.red,S.leftChild&&(S.leftChild.color=d.default.TreeNodeColorType.black),w=S.rotateRight(),t===S&&(t=w),v(y)));else y===m.rightChild&&(S.color===d.default.TreeNodeColorType.red?(S.color=d.default.TreeNodeColorType.black,m.color=d.default.TreeNodeColorType.red,w=m.rotateRight(),t===m&&(t=w),v(y)):S.color===d.default.TreeNodeColorType.black&&(S.leftChild&&S.leftChild.color===d.default.TreeNodeColorType.red?(S.color=m.color,m.color=d.default.TreeNodeColorType.black,S.leftChild&&(S.leftChild.color=d.default.TreeNodeColorType.black),w=m.rotateRight(),t===m&&(t=w),y.color=d.default.TreeNodeColorType.black):S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||!S.rightChild||S.rightChild.color!==d.default.TreeNodeColorType.red?S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||(S.color=d.default.TreeNodeColorType.red,v(m)):(S.color=d.default.TreeNodeColorType.red,S.rightChild&&(S.rightChild.color=d.default.TreeNodeColorType.black),w=S.rotateLeft(),t===S&&(t=w),v(y))))}else y.color=d.default.TreeNodeColorType.black},x=function(y){for(var m=y;m.leftChild||m.rightChild;){if(m.rightChild){m=o(m.rightChild);var S=y.key;y.key=m.key,m.key=S;var w=y.value;y.value=m.value,m.value=w,y=m}m.leftChild&&(m=h(m.leftChild),S=y.key,y.key=m.key,m.key=S,w=y.value,y.value=m.value,m.value=w,y=m)}v(m),m&&m.remove(),--n,t.color=d.default.TreeNodeColorType.black},C=function(y,m){return!(!y||y.key===void 0)&&(!!C(y.leftChild,m)||!!m(y)||C(y.rightChild,m))};this.eraseElementByPos=function(y){if(y<0||y>=n)throw new Error("pos must more than 0 and less than set's size");var m=0;C(t,function(S){return y===m?(x(S),!0):(++m,!1)})},this.eraseElementByKey=function(y){if(!this.empty()){var m=V(t,y);m!==void 0&&m.key!==void 0&&e(m.key,y)===0&&x(m)}};var E=function(y,m){if(!y||y.key===void 0)throw new Error("unknown error");var S=e(m,y.key);return S<0?y.leftChild?E(y.leftChild,m):(y.leftChild=new d.default,y.leftChild.parent=y,y.leftChild.brother=y.rightChild,y.rightChild&&(y.rightChild.brother=y.leftChild),y.leftChild):S>0?y.rightChild?E(y.rightChild,m):(y.rightChild=new d.default,y.rightChild.parent=y,y.rightChild.brother=y.leftChild,y.leftChild&&(y.leftChild.brother=y.rightChild),y.rightChild):y},k=function(y){var m=y.parent;if(!m){if(y===t)return;throw new Error("unknown error")}if(m.color!==d.default.TreeNodeColorType.black&&m.color===d.default.TreeNodeColorType.red){var S=m.brother,w=m.parent;if(!w)throw new Error("unknown error");if(S&&S.color===d.default.TreeNodeColorType.red)S.color=m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red,k(w);else if(!S||S.color===d.default.TreeNodeColorType.black)if(m===w.leftChild)if(y===m.leftChild){m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red;var I=w.rotateRight();w===t&&(t=I)}else y===m.rightChild&&(I=m.rotateLeft(),w===t&&(t=I),k(m));else m===w.rightChild&&(y===m.leftChild?(I=m.rotateRight(),w===t&&(t=I),k(m)):y===m.rightChild&&(m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red,I=w.rotateLeft(),w===t&&(t=I)))}};this.setElement=function(y,m){if(y==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(m!=null){if(this.empty())return++n,t.key=y,t.value=m,void(t.color=d.default.TreeNodeColorType.black);var S=E(t,y);S.key===void 0||e(S.key,y)!==0?(++n,S.key=y,S.value=m,k(S),t.color=d.default.TreeNodeColorType.black):S.value=m}else this.eraseElementByKey(y)};var V=function(y,m){if(y&&y.key!==void 0){var S=e(m,y.key);return S<0?V(y.leftChild,m):S>0?V(y.rightChild,m):y}};this.find=function(y){return!!V(t,y)},this.getElementByKey=function(y){var m=V(t,y);if((m==null?void 0:m.key)===void 0||(m==null?void 0:m.value)===void 0)throw new Error("unknown error");return m.value},this.union=function(y){var m=this;y.forEach(function(S){var w=S.key,I=S.value;return m.setElement(w,I)})},this.getHeight=function(){if(this.empty())return 0;var y=function(m){return m?Math.max(y(m.leftChild),y(m.rightChild))+1:1};return y(t)};var Q=function(y){return _(this,function(m){switch(m.label){case 0:return y&&y.key!==void 0&&y.value!==void 0?[5,f(Q(y.leftChild))]:[2];case 1:return m.sent(),[4,{key:y.key,value:y.value}];case 2:return m.sent(),[5,f(Q(y.rightChild))];case 3:return m.sent(),[2]}})};this[Symbol.iterator]=function(){return Q(t)},i.forEach(function(y){var m=y.key,S=y.value;return a.setElement(m,S)}),Object.freeze(this)}Object.freeze(u),L.default=u},{"../Base/TreeNode":25}],31:[function(A,z,L){function _(f,d){f===void 0&&(f=[]),d=d||function(n,t){return n>t?-1:n<t?1:0};var u=[];f.forEach(function(n){return u.push(n)});var i=u.length,e=function(n,t){if(n<0||n>=i)throw new Error("unknown error");if(t<0||t>=i)throw new Error("unknown error");var o=u[n];u[n]=u[t],u[t]=o},a=function(n){if(n<0||n>=i)throw new Error("unknown error");var t=2*n+1,o=2*n+2;t<i&&d(u[n],u[t])>0&&e(n,t),o<i&&d(u[n],u[o])>0&&e(n,o)};(function(){for(var n=Math.floor((i-1)/2);n>=0;--n)for(var t=n,o=2*t+1;o<i;){var h=o+1,l=o;if(h<i&&d(u[o],u[h])>0&&(l=h),d(u[t],u[l])<=0)break;e(t,l),o=2*(t=l)+1}})(),this.size=function(){return i},this.empty=function(){return i===0},this.clear=function(){i=0,u.length=0},this.push=function(n){if(u.push(n),++i!==1)for(var t=i-1;t>0;){var o=Math.floor((t-1)/2);if(d(u[o],n)<=0)break;a(o),t=o}},this.pop=function(){if(!this.empty())if(this.size()!==1){var n=u[i-1];--i;for(var t=0;t<this.size();){var o=2*t+1,h=2*t+2;if(o>=this.size())break;var l=o;if(h<this.size()&&d(u[o],u[h])>0&&(l=h),d(u[l],n)>=0)break;u[t]=u[l],t=l}u[t]=n}else--i},this.top=function(){return u[0]},Object.freeze(this)}Object.defineProperty(L,"__esModule",{value:!0}),Object.freeze(_),L.default=_},{}],32:[function(A,z,L){Object.defineProperty(L,"__esModule",{value:!0});var _=A("../LinkList/LinkList");function f(d){d===void 0&&(d=[]);var u=new _.default(d);this.size=function(){return u.size()},this.empty=function(){return u.empty()},this.clear=function(){u.clear()},this.push=function(i){u.pushBack(i)},this.pop=function(){u.popFront()},this.front=function(){return u.front()},Object.freeze(this)}Object.freeze(f),L.default=f},{"../LinkList/LinkList":29}],33:[function(A,z,L){var _=this&&this.__generator||function(i,e){var a,n,t,o,h={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(p){return function(g){return function(c){if(a)throw new TypeError("Generator is already executing.");for(;h;)try{if(a=1,n&&(t=2&c[0]?n.return:c[0]?n.throw||((t=n.return)&&t.call(n),0):n.next)&&!(t=t.call(n,c[1])).done)return t;switch(n=0,t&&(c=[2&c[0],t.value]),c[0]){case 0:case 1:t=c;break;case 4:return h.label++,{value:c[1],done:!1};case 5:h.label++,n=c[1],c=[0];continue;case 7:c=h.ops.pop(),h.trys.pop();continue;default:if(!(t=(t=h.trys).length>0&&t[t.length-1])&&(c[0]===6||c[0]===2)){h=0;continue}if(c[0]===3&&(!t||c[1]>t[0]&&c[1]<t[3])){h.label=c[1];break}if(c[0]===6&&h.label<t[1]){h.label=t[1],t=c;break}if(t&&h.label<t[2]){h.label=t[2],h.ops.push(c);break}t[2]&&h.ops.pop(),h.trys.pop();continue}c=e.call(i,h)}catch(v){c=[6,v],n=0}finally{a=t=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([p,g])}}},f=this&&this.__values||function(i){var e=typeof Symbol=="function"&&Symbol.iterator,a=e&&i[e],n=0;if(a)return a.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(L,"__esModule",{value:!0});var d=A("../Base/TreeNode");function u(i,e){var a=this;i===void 0&&(i=[]),e=e||function(y,m){return y<m?-1:y>m?1:0};var n=0,t=new d.default;t.color=d.default.TreeNodeColorType.black,this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,t.key=void 0,t.leftChild=t.rightChild=t.brother=t.parent=void 0,t.color=d.default.TreeNodeColorType.black};var o=function(y){if(!y||y.key===void 0)throw new Error("unknown error");return y.leftChild?o(y.leftChild):y},h=function(y){if(!y||y.key===void 0)throw new Error("unknown error");return y.rightChild?h(y.rightChild):y};this.front=function(){if(!this.empty())return o(t).key},this.back=function(){if(!this.empty())return h(t).key},this.forEach=function(y){var m,S,w=0;try{for(var I=f(this),N=I.next();!N.done;N=I.next())y(N.value,w++)}catch(D){m={error:D}}finally{try{N&&!N.done&&(S=I.return)&&S.call(I)}finally{if(m)throw m.error}}},this.getElementByPos=function(y){var m,S;if(y<0||y>=this.size())throw new Error("pos must more than 0 and less than set's size");var w=0;try{for(var I=f(this),N=I.next();!N.done;N=I.next()){var D=N.value;if(w===y)return D;++w}}catch(M){m={error:M}}finally{try{N&&!N.done&&(S=I.return)&&S.call(I)}finally{if(m)throw m.error}}throw new Error("unknown error")};var l=function(y){var m=y.parent;if(!m){if(y===t)return;throw new Error("unknown error")}if(y.color!==d.default.TreeNodeColorType.red){var S=y.brother;if(!S)throw new Error("unknown error");if(y===m.leftChild)if(S.color===d.default.TreeNodeColorType.red){S.color=d.default.TreeNodeColorType.black,m.color=d.default.TreeNodeColorType.red;var w=m.rotateLeft();t===m&&(t=w),l(y)}else S.color===d.default.TreeNodeColorType.black&&(S.rightChild&&S.rightChild.color===d.default.TreeNodeColorType.red?(S.color=m.color,m.color=d.default.TreeNodeColorType.black,S.rightChild&&(S.rightChild.color=d.default.TreeNodeColorType.black),w=m.rotateLeft(),t===m&&(t=w),y.color=d.default.TreeNodeColorType.black):S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||!S.leftChild||S.leftChild.color!==d.default.TreeNodeColorType.red?S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||(S.color=d.default.TreeNodeColorType.red,l(m)):(S.color=d.default.TreeNodeColorType.red,S.leftChild&&(S.leftChild.color=d.default.TreeNodeColorType.black),w=S.rotateRight(),t===S&&(t=w),l(y)));else y===m.rightChild&&(S.color===d.default.TreeNodeColorType.red?(S.color=d.default.TreeNodeColorType.black,m.color=d.default.TreeNodeColorType.red,w=m.rotateRight(),t===m&&(t=w),l(y)):S.color===d.default.TreeNodeColorType.black&&(S.leftChild&&S.leftChild.color===d.default.TreeNodeColorType.red?(S.color=m.color,m.color=d.default.TreeNodeColorType.black,S.leftChild&&(S.leftChild.color=d.default.TreeNodeColorType.black),w=m.rotateRight(),t===m&&(t=w),y.color=d.default.TreeNodeColorType.black):S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||!S.rightChild||S.rightChild.color!==d.default.TreeNodeColorType.red?S.leftChild&&S.leftChild.color!==d.default.TreeNodeColorType.black||S.rightChild&&S.rightChild.color!==d.default.TreeNodeColorType.black||(S.color=d.default.TreeNodeColorType.red,l(m)):(S.color=d.default.TreeNodeColorType.red,S.rightChild&&(S.rightChild.color=d.default.TreeNodeColorType.black),w=S.rotateLeft(),t===S&&(t=w),l(y))))}else y.color=d.default.TreeNodeColorType.black},p=function(y){for(var m=y;m.leftChild||m.rightChild;){if(m.rightChild){m=o(m.rightChild);var S=y.key;y.key=m.key,m.key=S,y=m}m.leftChild&&(m=h(m.leftChild),S=y.key,y.key=m.key,m.key=S,y=m)}l(m),m&&m.remove(),--n,t.color=d.default.TreeNodeColorType.black},g=function(y,m){return!(!y||y.key===void 0)&&(!!g(y.leftChild,m)||!!m(y)||g(y.rightChild,m))};this.eraseElementByPos=function(y){if(y<0||y>=n)throw new Error("pos must more than 0 and less than set's size");var m=0;g(t,function(S){return y===m?(p(S),!0):(++m,!1)})},this.eraseElementByValue=function(y){if(!this.empty()){var m=x(t,y);m!==void 0&&m.key!==void 0&&e(m.key,y)===0&&p(m)}};var c=function(y,m){if(!y||y.key===void 0)throw new Error("unknown error");var S=e(m,y.key);return S<0?y.leftChild?c(y.leftChild,m):(y.leftChild=new d.default,y.leftChild.parent=y,y.leftChild.brother=y.rightChild,y.rightChild&&(y.rightChild.brother=y.leftChild),y.leftChild):S>0?y.rightChild?c(y.rightChild,m):(y.rightChild=new d.default,y.rightChild.parent=y,y.rightChild.brother=y.leftChild,y.leftChild&&(y.leftChild.brother=y.rightChild),y.rightChild):y},v=function(y){var m=y.parent;if(!m){if(y===t)return;throw new Error("unknown error")}if(m.color!==d.default.TreeNodeColorType.black&&m.color===d.default.TreeNodeColorType.red){var S=m.brother,w=m.parent;if(!w)throw new Error("unknown error");if(S&&S.color===d.default.TreeNodeColorType.red)S.color=m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red,v(w);else if(!S||S.color===d.default.TreeNodeColorType.black)if(m===w.leftChild)if(y===m.leftChild){m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red;var I=w.rotateRight();w===t&&(t=I)}else y===m.rightChild&&(I=m.rotateLeft(),w===t&&(t=I),v(m));else m===w.rightChild&&(y===m.leftChild?(I=m.rotateRight(),w===t&&(t=I),v(m)):y===m.rightChild&&(m.color=d.default.TreeNodeColorType.black,w.color=d.default.TreeNodeColorType.red,I=w.rotateLeft(),w===t&&(t=I)))}};this.insert=function(y){if(y==null)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++n,t.key=y,void(t.color=d.default.TreeNodeColorType.black);var m=c(t,y);m.key!==void 0&&e(m.key,y)===0||(++n,m.key=y,v(m),t.color=d.default.TreeNodeColorType.black)};var x=function(y,m){if(y&&y.key!==void 0){var S=e(m,y.key);return S<0?x(y.leftChild,m):S>0?x(y.rightChild,m):y}};this.find=function(y){var m=x(t,y);return m!==void 0&&m.key!==void 0&&e(m.key,y)===0};var C=function(y,m){if(y&&y.key!==void 0){var S=e(y.key,m);if(S===0)return y.key;if(S<0)return C(y.rightChild,m);var w=C(y.leftChild,m);return w!==void 0?w:y.key}};this.lowerBound=function(y){return C(t,y)};var E=function(y,m){if(y&&y.key!==void 0){if(e(y.key,m)<=0)return E(y.rightChild,m);var S=E(y.leftChild,m);return S!==void 0?S:y.key}};this.upperBound=function(y){return E(t,y)};var k=function(y,m){if(y&&y.key!==void 0){var S=e(y.key,m);if(S===0)return y.key;if(S>0)return k(y.leftChild,m);var w=k(y.rightChild,m);return w!==void 0?w:y.key}};this.reverseLowerBound=function(y){return k(t,y)};var V=function(y,m){if(y&&y.key!==void 0){if(e(y.key,m)>=0)return V(y.leftChild,m);var S=V(y.rightChild,m);return S!==void 0?S:y.key}};this.reverseUpperBound=function(y){return V(t,y)},this.union=function(y){var m=this;y.forEach(function(S){return m.insert(S)})},this.getHeight=function(){if(this.empty())return 0;var y=function(m){return m?Math.max(y(m.leftChild),y(m.rightChild))+1:1};return y(t)};var Q=function(y){return _(this,function(m){switch(m.label){case 0:return y&&y.key!==void 0?[5,f(Q(y.leftChild))]:[2];case 1:return m.sent(),[4,y.key];case 2:return m.sent(),[5,f(Q(y.rightChild))];case 3:return m.sent(),[2]}})};this[Symbol.iterator]=function(){return Q(t)},i.forEach(function(y){return a.insert(y)}),Object.freeze(this)}Object.freeze(u),L.default=u},{"../Base/TreeNode":25}],34:[function(A,z,L){function _(f){var d=this;f===void 0&&(f=[]);var u=0,i=[];this.size=function(){return u},this.empty=function(){return u===0},this.clear=function(){u=0,i.length=0},this.push=function(e){i.push(e),++u},this.pop=function(){i.pop(),u>0&&--u},this.top=function(){return i[u-1]},f.forEach(function(e){return d.push(e)}),Object.freeze(this)}Object.defineProperty(L,"__esModule",{value:!0}),Object.freeze(_),L.default=_},{}],35:[function(A,z,L){var _=this&&this.__generator||function(e,a){var n,t,o,h,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return h={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function p(g){return function(c){return function(v){if(n)throw new TypeError("Generator is already executing.");for(;l;)try{if(n=1,t&&(o=2&v[0]?t.return:v[0]?t.throw||((o=t.return)&&o.call(t),0):t.next)&&!(o=o.call(t,v[1])).done)return o;switch(t=0,o&&(v=[2&v[0],o.value]),v[0]){case 0:case 1:o=v;break;case 4:return l.label++,{value:v[1],done:!1};case 5:l.label++,t=v[1],v=[0];continue;case 7:v=l.ops.pop(),l.trys.pop();continue;default:if(!(o=(o=l.trys).length>0&&o[o.length-1])&&(v[0]===6||v[0]===2)){l=0;continue}if(v[0]===3&&(!o||v[1]>o[0]&&v[1]<o[3])){l.label=v[1];break}if(v[0]===6&&l.label<o[1]){l.label=o[1],o=v;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(v);break}o[2]&&l.ops.pop(),l.trys.pop();continue}v=a.call(e,l)}catch(x){v=[6,x],t=0}finally{n=o=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([g,c])}}},f=this&&this.__read||function(e,a){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var t,o,h=n.call(e),l=[];try{for(;(a===void 0||a-- >0)&&!(t=h.next()).done;)l.push(t.value)}catch(p){o={error:p}}finally{try{t&&!t.done&&(n=h.return)&&n.call(h)}finally{if(o)throw o.error}}return l},d=this&&this.__spreadArray||function(e,a,n){if(n||arguments.length===2)for(var t,o=0,h=a.length;o<h;o++)!t&&o in a||(t||(t=Array.prototype.slice.call(a,0,o)),t[o]=a[o]);return e.concat(t||Array.prototype.slice.call(a))},u=this&&this.__values||function(e){var a=typeof Symbol=="function"&&Symbol.iterator,n=a&&e[a],t=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&t>=e.length&&(e=void 0),{value:e&&e[t++],done:!e}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")};function i(e){var a=this;e===void 0&&(e=[]);var n=0,t=[];this.size=function(){return n},this.empty=function(){return n===0},this.clear=function(){n=0,t.length=0},this.front=function(){if(!this.empty())return t[0]},this.back=function(){if(!this.empty())return t[n-1]},this.forEach=function(o){t.forEach(o)},this.getElementByPos=function(o){if(o<0||o>=n)throw new Error("pos must more than 0 and less than vector's size");return t[o]},this.eraseElementByPos=function(o){if(o<0||o>=n)throw new Error("pos must more than 0 and less than vector's size");for(var h=o;h<n-1;++h)t[h]=t[h+1];this.popBack()},this.eraseElementByValue=function(o){var h=[];this.forEach(function(p){p!==o&&h.push(p)}),h.forEach(function(p,g){t[g]=p});for(var l=h.length;n>l;)this.popBack()},this.pushBack=function(o){t.push(o),++n},this.popBack=function(){t.pop(),n>0&&--n},this.setElementByPos=function(o,h){if(o<0||o>=n)throw new Error("pos must more than 0 and less than vector's size");t[o]=h},this.insert=function(o,h,l){if(l===void 0&&(l=1),o<0||o>n)throw new Error("pos must more than 0 and less than or equal to vector's size");t.splice.apply(t,d([o,0],f(new Array(l).fill(h)),!1)),n+=l},this.find=function(o){return t.includes(o)},this.reverse=function(){t.reverse()},this.unique=function(){var o,h=[];this.forEach(function(p,g){g!==0&&p===o||(h.push(p),o=p)}),h.forEach(function(p,g){t[g]=p});for(var l=h.length;n>l;)this.popBack()},this.sort=function(o){t.sort(o)},this[Symbol.iterator]=function(){return function(){return _(this,function(o){switch(o.label){case 0:return[5,u(t)];case 1:return[2,o.sent()]}})}()},e.forEach(function(o){return a.pushBack(o)}),Object.freeze(this)}Object.defineProperty(L,"__esModule",{value:!0}),Object.freeze(i),L.default=i},{}],36:[function(A,z,L){Object.defineProperty(L,"__esModule",{value:!0}),L.HashMap=L.HashSet=L.Map=L.Set=L.PriorityQueue=L.Deque=L.LinkList=L.Queue=L.Stack=L.Vector=void 0;var _=A("./Vector/Vector");L.Vector=_.default;var f=A("./Stack/Stack");L.Stack=f.default;var d=A("./Queue/Queue");L.Queue=d.default;var u=A("./LinkList/LinkList");L.LinkList=u.default;var i=A("./Deque/Deque");L.Deque=i.default;var e=A("./PriorityQueue/PriorityQueue");L.PriorityQueue=e.default;var a=A("./Set/Set");L.Set=a.default;var n=A("./Map/Map");L.Map=n.default;var t=A("./HashSet/HashSet");L.HashSet=t.default;var o=A("./HashMap/HashMap");L.HashMap=o.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(A,z,L){const _=A("yallist"),f=Symbol("max"),d=Symbol("length"),u=Symbol("lengthCalculator"),i=Symbol("allowStale"),e=Symbol("maxAge"),a=Symbol("dispose"),n=Symbol("noDisposeOnSet"),t=Symbol("lruList"),o=Symbol("cache"),h=Symbol("updateAgeOnGet"),l=()=>1,p=(E,k,V)=>{const Q=E[o].get(k);if(Q){const y=Q.value;if(g(E,y)){if(v(E,Q),!E[i])return}else V&&(E[h]&&(Q.value.now=Date.now()),E[t].unshiftNode(Q));return y.value}},g=(E,k)=>{if(!k||!k.maxAge&&!E[e])return!1;const V=Date.now()-k.now;return k.maxAge?V>k.maxAge:E[e]&&V>E[e]},c=E=>{if(E[d]>E[f])for(let k=E[t].tail;E[d]>E[f]&&k!==null;){const V=k.prev;v(E,k),k=V}},v=(E,k)=>{if(k){const V=k.value;E[a]&&E[a](V.key,V.value),E[d]-=V.length,E[o].delete(V.key),E[t].removeNode(k)}};class x{constructor(k,V,Q,y,m){this.key=k,this.value=V,this.length=Q,this.now=y,this.maxAge=m||0}}const C=(E,k,V,Q)=>{let y=V.value;g(E,y)&&(v(E,V),E[i]||(y=void 0)),y&&k.call(Q,y.value,y.key,E)};z.exports=class{constructor(E){if(typeof E=="number"&&(E={max:E}),E||(E={}),E.max&&(typeof E.max!="number"||E.max<0))throw new TypeError("max must be a non-negative number");this[f]=E.max||1/0;const k=E.length||l;if(this[u]=typeof k!="function"?l:k,this[i]=E.stale||!1,E.maxAge&&typeof E.maxAge!="number")throw new TypeError("maxAge must be a number");this[e]=E.maxAge||0,this[a]=E.dispose,this[n]=E.noDisposeOnSet||!1,this[h]=E.updateAgeOnGet||!1,this.reset()}set max(E){if(typeof E!="number"||E<0)throw new TypeError("max must be a non-negative number");this[f]=E||1/0,c(this)}get max(){return this[f]}set allowStale(E){this[i]=!!E}get allowStale(){return this[i]}set maxAge(E){if(typeof E!="number")throw new TypeError("maxAge must be a non-negative number");this[e]=E,c(this)}get maxAge(){return this[e]}set lengthCalculator(E){typeof E!="function"&&(E=l),E!==this[u]&&(this[u]=E,this[d]=0,this[t].forEach(k=>{k.length=this[u](k.value,k.key),this[d]+=k.length})),c(this)}get lengthCalculator(){return this[u]}get length(){return this[d]}get itemCount(){return this[t].length}rforEach(E,k){k=k||this;for(let V=this[t].tail;V!==null;){const Q=V.prev;C(this,E,V,k),V=Q}}forEach(E,k){k=k||this;for(let V=this[t].head;V!==null;){const Q=V.next;C(this,E,V,k),V=Q}}keys(){return this[t].toArray().map(E=>E.key)}values(){return this[t].toArray().map(E=>E.value)}reset(){this[a]&&this[t]&&this[t].length&&this[t].forEach(E=>this[a](E.key,E.value)),this[o]=new Map,this[t]=new _,this[d]=0}dump(){return this[t].map(E=>!g(this,E)&&{k:E.key,v:E.value,e:E.now+(E.maxAge||0)}).toArray().filter(E=>E)}dumpLru(){return this[t]}set(E,k,V){if((V=V||this[e])&&typeof V!="number")throw new TypeError("maxAge must be a number");const Q=V?Date.now():0,y=this[u](k,E);if(this[o].has(E)){if(y>this[f])return v(this,this[o].get(E)),!1;const S=this[o].get(E).value;return this[a]&&(this[n]||this[a](E,S.value)),S.now=Q,S.maxAge=V,S.value=k,this[d]+=y-S.length,S.length=y,this.get(E),c(this),!0}const m=new x(E,k,y,Q,V);return m.length>this[f]?(this[a]&&this[a](E,k),!1):(this[d]+=m.length,this[t].unshift(m),this[o].set(E,this[t].head),c(this),!0)}has(E){if(!this[o].has(E))return!1;const k=this[o].get(E).value;return!g(this,k)}get(E){return p(this,E,!0)}peek(E){return p(this,E,!1)}pop(){const E=this[t].tail;return E?(v(this,E),E.value):null}del(E){v(this,this[o].get(E))}load(E){this.reset();const k=Date.now();for(let V=E.length-1;V>=0;V--){const Q=E[V],y=Q.e||0;if(y===0)this.set(Q.k,Q.v);else{const m=y-k;m>0&&this.set(Q.k,Q.v,m)}}}prune(){this[o].forEach((E,k)=>p(this,k,!1))}}},{yallist:83}],38:[function(A,z,L){(function(_){(function(){const f=z.exports;f.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},f.codes={};for(const u in f.types){const i=f.types[u];f.codes[i]=u}f.CMD_SHIFT=4,f.CMD_MASK=240,f.DUP_MASK=8,f.QOS_MASK=3,f.QOS_SHIFT=1,f.RETAIN_MASK=1,f.VARBYTEINT_MASK=127,f.VARBYTEINT_FIN_MASK=128,f.VARBYTEINT_MAX=268435455,f.SESSIONPRESENT_MASK=1,f.SESSIONPRESENT_HEADER=_.from([f.SESSIONPRESENT_MASK]),f.CONNACK_HEADER=_.from([f.codes.connack<<f.CMD_SHIFT]),f.USERNAME_MASK=128,f.PASSWORD_MASK=64,f.WILL_RETAIN_MASK=32,f.WILL_QOS_MASK=24,f.WILL_QOS_SHIFT=3,f.WILL_FLAG_MASK=4,f.CLEAN_SESSION_MASK=2,f.CONNECT_HEADER=_.from([f.codes.connect<<f.CMD_SHIFT]),f.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},f.propertiesCodes={};for(const u in f.properties){const i=f.properties[u];f.propertiesCodes[i]=u}function d(u){return[0,1,2].map(i=>[0,1].map(e=>[0,1].map(a=>{const n=_.alloc(1);return n.writeUInt8(f.codes[u]<<f.CMD_SHIFT|(e?f.DUP_MASK:0)|i<<f.QOS_SHIFT|a,0,!0),n})))}f.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},f.PUBLISH_HEADER=d("publish"),f.SUBSCRIBE_HEADER=d("subscribe"),f.SUBSCRIBE_OPTIONS_QOS_MASK=3,f.SUBSCRIBE_OPTIONS_NL_MASK=1,f.SUBSCRIBE_OPTIONS_NL_SHIFT=2,f.SUBSCRIBE_OPTIONS_RAP_MASK=1,f.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,f.SUBSCRIBE_OPTIONS_RH_MASK=3,f.SUBSCRIBE_OPTIONS_RH_SHIFT=4,f.SUBSCRIBE_OPTIONS_RH=[0,16,32],f.SUBSCRIBE_OPTIONS_NL=4,f.SUBSCRIBE_OPTIONS_RAP=8,f.SUBSCRIBE_OPTIONS_QOS=[0,1,2],f.UNSUBSCRIBE_HEADER=d("unsubscribe"),f.ACKS={unsuback:d("unsuback"),puback:d("puback"),pubcomp:d("pubcomp"),pubrel:d("pubrel"),pubrec:d("pubrec")},f.SUBACK_HEADER=_.from([f.codes.suback<<f.CMD_SHIFT]),f.VERSION3=_.from([3]),f.VERSION4=_.from([4]),f.VERSION5=_.from([5]),f.VERSION131=_.from([131]),f.VERSION132=_.from([132]),f.QOS=[0,1,2].map(u=>_.from([u])),f.EMPTY={pingreq:_.from([f.codes.pingreq<<4,0]),pingresp:_.from([f.codes.pingresp<<4,0]),disconnect:_.from([f.codes.disconnect<<4,0])}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],39:[function(A,z,L){(function(_){(function(){const f=A("./writeToStream"),d=A("events");class u extends d{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const a=new Array(this._array.length),n=this._array;let t,o=0;for(t=0;t<n.length&&n[t]!==void 0;t++)typeof n[t]!="string"?a[t]=n[t].length:a[t]=_.byteLength(n[t]),e+=a[t];const h=_.allocUnsafe(e);for(t=0;t<n.length&&n[t]!==void 0;t++)typeof n[t]!="string"?(n[t].copy(h,o),o+=a[t]):(h.write(n[t],o),o+=a[t]);return h}}z.exports=function(i,e){const a=new u;return f(i,a,e),a.concat()}}).call(this)}).call(this,A("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(A,z,L){L.parser=A("./parser").parser,L.generate=A("./generate"),L.writeToStream=A("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(A,z,L){(function(_){(function(){const d={},u=_.isBuffer(_.from([1,2]).subarray(0,1));function i(e){const a=_.allocUnsafe(2);return a.writeUInt8(e>>8,0),a.writeUInt8(255&e,1),a}z.exports={cache:d,generateCache:function(){for(let e=0;e<65536;e++)d[e]=i(e)},generateNumber:i,genBufVariableByteInt:function(e){let a=0,n=0;const t=_.allocUnsafe(4);do a=e%128|0,(e=e/128|0)>0&&(a|=128),t.writeUInt8(a,n++);while(e>0&&n<4);return e>0&&(n=0),u?t.subarray(0,n):t.slice(0,n)},generate4ByteBuffer:function(e){const a=_.allocUnsafe(4);return a.writeUInt32BE(e,0),a}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],42:[function(A,z,L){z.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(A,z,L){const _=A("bl"),f=A("events"),d=A("./packet"),u=A("./constants"),i=A("debug")("mqtt-packet:parser");class e extends f{constructor(){super(),this.parser=this.constructor.parser}static parser(n){return this instanceof e?(this.settings=n||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new e().parser(n)}_resetState(){i("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new d,this.error=null,this._list=_(),this._stateCounter=0}parse(n){for(this.error&&this._resetState(),this._list.append(n),i("parse: current state: %s",this._states[this._stateCounter]);(this.packet.length!==-1||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,i("parse: state complete. _stateCounter is now: %d",this._stateCounter),i("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return i("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const n=this._list.readUInt8(0);return this.packet.cmd=u.types[n>>u.CMD_SHIFT],this.packet.retain=(n&u.RETAIN_MASK)!=0,this.packet.qos=n>>u.QOS_SHIFT&u.QOS_MASK,this.packet.dup=(n&u.DUP_MASK)!=0,i("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const n=this._parseVarByteNum(!0);return n&&(this.packet.length=n.value,this._list.consume(n.bytes)),i("_parseLength %d",n.value),!!n}_parsePayload(){i("_parsePayload: payload %O",this._list);let n=!1;if(this.packet.length===0||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}n=!0}return i("_parsePayload complete result: %s",n),n}_parseConnect(){let n,t,o,h;i("_parseConnect");const l={},p=this.packet,g=this._parseString();if(g===null)return this._emitError(new Error("Cannot parse protocolId"));if(g!=="MQTT"&&g!=="MQIsdp")return this._emitError(new Error("Invalid protocolId"));if(p.protocolId=g,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(p.protocolVersion=this._list.readUInt8(this._pos),p.protocolVersion>=128&&(p.bridgeMode=!0,p.protocolVersion=p.protocolVersion-128),p.protocolVersion!==3&&p.protocolVersion!==4&&p.protocolVersion!==5)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(l.username=this._list.readUInt8(this._pos)&u.USERNAME_MASK,l.password=this._list.readUInt8(this._pos)&u.PASSWORD_MASK,l.will=this._list.readUInt8(this._pos)&u.WILL_FLAG_MASK,l.will&&(p.will={},p.will.retain=(this._list.readUInt8(this._pos)&u.WILL_RETAIN_MASK)!=0,p.will.qos=(this._list.readUInt8(this._pos)&u.WILL_QOS_MASK)>>u.WILL_QOS_SHIFT),p.clean=(this._list.readUInt8(this._pos)&u.CLEAN_SESSION_MASK)!=0,this._pos++,p.keepalive=this._parseNum(),p.keepalive===-1)return this._emitError(new Error("Packet too short"));if(p.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(p.properties=v)}const c=this._parseString();if(c===null)return this._emitError(new Error("Packet too short"));if(p.clientId=c,i("_parseConnect: packet.clientId: %s",p.clientId),l.will){if(p.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(p.will.properties=v)}if((n=this._parseString())===null)return this._emitError(new Error("Cannot parse will topic"));if(p.will.topic=n,i("_parseConnect: packet.will.topic: %s",p.will.topic),(t=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse will payload"));p.will.payload=t,i("_parseConnect: packet.will.paylaod: %s",p.will.payload)}if(l.username){if((h=this._parseString())===null)return this._emitError(new Error("Cannot parse username"));p.username=h,i("_parseConnect: packet.username: %s",p.username)}if(l.password){if((o=this._parseBuffer())===null)return this._emitError(new Error("Cannot parse password"));p.password=o}return this.settings=p,i("_parseConnect: complete"),p}_parseConnack(){i("_parseConnack");const n=this.packet;if(this._list.length<1)return null;if(n.sessionPresent=!!(this._list.readUInt8(this._pos++)&u.SESSIONPRESENT_MASK),this.settings.protocolVersion===5)this._list.length>=2?n.reasonCode=this._list.readUInt8(this._pos++):n.reasonCode=0;else{if(this._list.length<2)return null;n.returnCode=this._list.readUInt8(this._pos++)}if(n.returnCode===-1||n.reasonCode===-1)return this._emitError(new Error("Cannot parse return code"));if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}i("_parseConnack: complete")}_parsePublish(){i("_parsePublish");const n=this.packet;if(n.topic=this._parseString(),n.topic===null)return this._emitError(new Error("Cannot parse topic"));if(!(n.qos>0)||this._parseMessageId()){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}n.payload=this._list.slice(this._pos,n.length),i("_parsePublish: payload from buffer list: %o",n.payload)}}_parseSubscribe(){i("_parseSubscribe");const n=this.packet;let t,o,h,l,p,g,c;if(n.qos!==1)return this._emitError(new Error("Wrong subscribe header"));if(n.subscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const v=this._parseProperties();Object.getOwnPropertyNames(v).length&&(n.properties=v)}for(;this._pos<n.length;){if((t=this._parseString())===null)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=n.length)return this._emitError(new Error("Malformed Subscribe Payload"));h=(o=this._parseByte())&u.SUBSCRIBE_OPTIONS_QOS_MASK,g=(o>>u.SUBSCRIBE_OPTIONS_NL_SHIFT&u.SUBSCRIBE_OPTIONS_NL_MASK)!=0,p=(o>>u.SUBSCRIBE_OPTIONS_RAP_SHIFT&u.SUBSCRIBE_OPTIONS_RAP_MASK)!=0,l=o>>u.SUBSCRIBE_OPTIONS_RH_SHIFT&u.SUBSCRIBE_OPTIONS_RH_MASK,c={topic:t,qos:h},this.settings.protocolVersion===5?(c.nl=g,c.rap=p,c.rh=l):this.settings.bridgeMode&&(c.rh=0,c.rap=!0,c.nl=!0),i("_parseSubscribe: push subscription `%s` to subscription",c),n.subscriptions.push(c)}}}_parseSuback(){i("_parseSuback");const n=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){i("_parseUnsubscribe");const n=this.packet;if(n.unsubscriptions=[],this._parseMessageId()){if(this.settings.protocolVersion===5){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}for(;this._pos<n.length;){const t=this._parseString();if(t===null)return this._emitError(new Error("Cannot parse topic"));i("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),n.unsubscriptions.push(t)}}}_parseUnsuback(){i("_parseUnsuback");const n=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(this.settings.protocolVersion===5){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(n.properties=t),n.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){i("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const n=this.packet;if(this._parseMessageId(),this.settings.protocolVersion===5&&(n.length>2?(n.reasonCode=this._parseByte(),i("_parseConfirmation: packet.reasonCode `%d`",n.reasonCode)):n.reasonCode=0,n.length>3)){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}return!0}_parseDisconnect(){const n=this.packet;if(i("_parseDisconnect"),this.settings.protocolVersion===5){this._list.length>0?n.reasonCode=this._parseByte():n.reasonCode=0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(n.properties=t)}return i("_parseDisconnect result: true"),!0}_parseAuth(){i("_parseAuth");const n=this.packet;if(this.settings.protocolVersion!==5)return this._emitError(new Error("Not supported auth packet for this version MQTT"));n.reasonCode=this._parseByte();const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(n.properties=t),i("_parseAuth: result: true"),!0}_parseMessageId(){const n=this.packet;return n.messageId=this._parseNum(),n.messageId===null?(this._emitError(new Error("Cannot parse messageId")),!1):(i("_parseMessageId: packet.messageId %d",n.messageId),!0)}_parseString(n){const t=this._parseNum(),o=t+this._pos;if(t===-1||o>this._list.length||o>this.packet.length)return null;const h=this._list.toString("utf8",this._pos,o);return this._pos+=t,i("_parseString: result: %s",h),h}_parseStringPair(){return i("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const n=this._parseNum(),t=n+this._pos;if(n===-1||t>this._list.length||t>this.packet.length)return null;const o=this._list.slice(this._pos,t);return this._pos+=n,i("_parseBuffer: result: %o",o),o}_parseNum(){if(this._list.length-this._pos<2)return-1;const n=this._list.readUInt16BE(this._pos);return this._pos+=2,i("_parseNum: result: %s",n),n}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const n=this._list.readUInt32BE(this._pos);return this._pos+=4,i("_parse4ByteNum: result: %s",n),n}_parseVarByteNum(n){i("_parseVarByteNum");let t,o=0,h=1,l=0,p=!1;const g=this._pos?this._pos:0;for(;o<4&&g+o<this._list.length;){if(l+=h*((t=this._list.readUInt8(g+o++))&u.VARBYTEINT_MASK),h*=128,(t&u.VARBYTEINT_FIN_MASK)==0){p=!0;break}if(this._list.length<=o)break}return!p&&o===4&&this._list.length>=o&&this._emitError(new Error("Invalid variable byte integer")),g&&(this._pos+=o),i("_parseVarByteNum: result: %o",p=!!p&&(n?{bytes:o,value:l}:l)),p}_parseByte(){let n;return this._pos<this._list.length&&(n=this._list.readUInt8(this._pos),this._pos++),i("_parseByte: result: %o",n),n}_parseByType(n){switch(i("_parseByType: type: %s",n),n){case"byte":return this._parseByte()!==0;case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){i("_parseProperties");const n=this._parseVarByteNum(),t=this._pos+n,o={};for(;this._pos<t;){const h=this._parseByte();if(!h)return this._emitError(new Error("Cannot parse property code type")),!1;const l=u.propertiesCodes[h];if(!l)return this._emitError(new Error("Unknown property")),!1;if(l!=="userProperties")o[l]?Array.isArray(o[l])?o[l].push(this._parseByType(u.propertiesTypes[l])):(o[l]=[o[l]],o[l].push(this._parseByType(u.propertiesTypes[l]))):o[l]=this._parseByType(u.propertiesTypes[l]);else{o[l]||(o[l]=Object.create(null));const p=this._parseByType(u.propertiesTypes[l]);if(o[l][p.name])if(Array.isArray(o[l][p.name]))o[l][p.name].push(p.value);else{const g=o[l][p.name];o[l][p.name]=[g],o[l][p.name].push(p.value)}else o[l][p.name]=p.value}}return o}_newPacket(){return i("_newPacket"),this.packet&&(this._list.consume(this.packet.length),i("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),i("_newPacket: new packet"),this.packet=new d,this._pos=0,!0}_emitError(n){i("_emitError"),this.error=n,this.emit("error",n)}}z.exports=e},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(A,z,L){(function(_){(function(){const f=A("./constants"),d=_.allocUnsafe(0),u=_.from([0]),i=A("./numbers"),e=A("process-nextick-args").nextTick,a=A("debug")("mqtt-packet:writeToStream"),n=i.cache,t=i.generateNumber,o=i.generateCache,h=i.genBufVariableByteInt,l=i.generate4ByteBuffer;let p=V,g=!0;function c(M,P,O){switch(a("generate called"),P.cork&&(P.cork(),e(v,P)),g&&(g=!1,o()),a("generate: packet.cmd: %s",M.cmd),M.cmd){case"connect":return function(R,B,U){const H=R||{},F=H.protocolId||"MQTT";let W=H.protocolVersion||4;const K=H.will;let G=H.clean;const r=H.keepalive||0,s=H.clientId||"",b=H.username,T=H.password,j=H.properties;G===void 0&&(G=!0);let q=0;if(!F||typeof F!="string"&&!_.isBuffer(F))return B.emit("error",new Error("Invalid protocolId")),!1;if(q+=F.length+2,W!==3&&W!==4&&W!==5)return B.emit("error",new Error("Invalid protocol version")),!1;if(q+=1,(typeof s=="string"||_.isBuffer(s))&&(s||W>=4)&&(s||G))q+=_.byteLength(s)+2;else{if(W<4)return B.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*G==0)return B.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if(typeof r!="number"||r<0||r>65535||r%1!=0)return B.emit("error",new Error("Invalid keepalive")),!1;if(q+=2,q+=1,W===5){var $=m(B,j);if(!$)return!1;q+=$.length}if(K){if(typeof K!="object")return B.emit("error",new Error("Invalid will")),!1;if(!K.topic||typeof K.topic!="string")return B.emit("error",new Error("Invalid will topic")),!1;if(q+=_.byteLength(K.topic)+2,q+=2,K.payload){if(!(K.payload.length>=0))return B.emit("error",new Error("Invalid will payload")),!1;typeof K.payload=="string"?q+=_.byteLength(K.payload):q+=K.payload.length}var Z={};if(W===5){if(!(Z=m(B,K.properties)))return!1;q+=Z.length}}let Y=!1;if(b!=null){if(!D(b))return B.emit("error",new Error("Invalid username")),!1;Y=!0,q+=_.byteLength(b)+2}if(T!=null){if(!Y)return B.emit("error",new Error("Username is required to use password")),!1;if(!D(T))return B.emit("error",new Error("Invalid password")),!1;q+=N(T)+2}B.write(f.CONNECT_HEADER),C(B,q),y(B,F),H.bridgeMode&&(W+=128),B.write(W===131?f.VERSION131:W===132?f.VERSION132:W===4?f.VERSION4:W===5?f.VERSION5:f.VERSION3);let ee=0;return ee|=b!=null?f.USERNAME_MASK:0,ee|=T!=null?f.PASSWORD_MASK:0,ee|=K&&K.retain?f.WILL_RETAIN_MASK:0,ee|=K&&K.qos?K.qos<<f.WILL_QOS_SHIFT:0,ee|=K?f.WILL_FLAG_MASK:0,ee|=G?f.CLEAN_SESSION_MASK:0,B.write(_.from([ee])),p(B,r),W===5&&$.write(),y(B,s),K&&(W===5&&Z.write(),E(B,K.topic),y(B,K.payload)),b!=null&&y(B,b),T!=null&&y(B,T),!0}(M,P);case"connack":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=H===5?F.reasonCode:F.returnCode,K=F.properties;let G=2;if(typeof W!="number")return B.emit("error",new Error("Invalid return code")),!1;let r=null;if(H===5){if(!(r=m(B,K)))return!1;G+=r.length}return B.write(f.CONNACK_HEADER),C(B,G),B.write(F.sessionPresent?f.SESSIONPRESENT_HEADER:u),B.write(_.from([W])),r!=null&&r.write(),!0}(M,P,O);case"publish":return function(R,B,U){a("publish: packet: %o",R);const H=U?U.protocolVersion:4,F=R||{},W=F.qos||0,K=F.retain?f.RETAIN_MASK:0,G=F.topic,r=F.payload||d,s=F.messageId,b=F.properties;let T=0;if(typeof G=="string")T+=_.byteLength(G)+2;else{if(!_.isBuffer(G))return B.emit("error",new Error("Invalid topic")),!1;T+=G.length+2}if(_.isBuffer(r)?T+=r.length:T+=_.byteLength(r),W&&typeof s!="number")return B.emit("error",new Error("Invalid messageId")),!1;W&&(T+=2);let j=null;if(H===5){if(!(j=m(B,b)))return!1;T+=j.length}return B.write(f.PUBLISH_HEADER[W][F.dup?1:0][K?1:0]),C(B,T),p(B,N(G)),B.write(G),W>0&&p(B,s),j!=null&&j.write(),a("publish: payload: %o",r),B.write(r)}(M,P,O);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.cmd||"puback",K=F.messageId,G=F.dup&&W==="pubrel"?f.DUP_MASK:0;let r=0;const s=F.reasonCode,b=F.properties;let T=H===5?3:2;if(W==="pubrel"&&(r=1),typeof K!="number")return B.emit("error",new Error("Invalid messageId")),!1;let j=null;if(H===5&&typeof b=="object"){if(!(j=S(B,b,U,T)))return!1;T+=j.length}return B.write(f.ACKS[W][r][G][0]),C(B,T),p(B,K),H===5&&B.write(_.from([s])),j!==null&&j.write(),!0}(M,P,O);case"subscribe":return function(R,B,U){a("subscribe: packet: ");const H=U?U.protocolVersion:4,F=R||{},W=F.dup?f.DUP_MASK:0,K=F.messageId,G=F.subscriptions,r=F.properties;let s=0;if(typeof K!="number")return B.emit("error",new Error("Invalid messageId")),!1;s+=2;let b=null;if(H===5){if(!(b=m(B,r)))return!1;s+=b.length}if(typeof G!="object"||!G.length)return B.emit("error",new Error("Invalid subscriptions")),!1;for(let j=0;j<G.length;j+=1){const q=G[j].topic,$=G[j].qos;if(typeof q!="string")return B.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if(typeof $!="number")return B.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(H===5){if(typeof(G[j].nl||!1)!="boolean")return B.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if(typeof(G[j].rap||!1)!="boolean")return B.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const ee=G[j].rh||0;if(typeof ee!="number"||ee>2)return B.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}s+=_.byteLength(q)+2+1}a("subscribe: writing to stream: %o",f.SUBSCRIBE_HEADER),B.write(f.SUBSCRIBE_HEADER[1][W?1:0][0]),C(B,s),p(B,K),b!==null&&b.write();let T=!0;for(const j of G){const q=j.topic,$=j.qos,Z=+j.nl,Y=+j.rap,ee=j.rh;let te;E(B,q),te=f.SUBSCRIBE_OPTIONS_QOS[$],H===5&&(te|=Z?f.SUBSCRIBE_OPTIONS_NL:0,te|=Y?f.SUBSCRIBE_OPTIONS_RAP:0,te|=ee?f.SUBSCRIBE_OPTIONS_RH[ee]:0),T=B.write(_.from([te]))}return T}(M,P,O);case"suback":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.messageId,K=F.granted,G=F.properties;let r=0;if(typeof W!="number")return B.emit("error",new Error("Invalid messageId")),!1;if(r+=2,typeof K!="object"||!K.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let b=0;b<K.length;b+=1){if(typeof K[b]!="number")return B.emit("error",new Error("Invalid qos vector")),!1;r+=1}let s=null;if(H===5){if(!(s=S(B,G,U,r)))return!1;r+=s.length}return B.write(f.SUBACK_HEADER),C(B,r),p(B,W),s!==null&&s.write(),B.write(_.from(K))}(M,P,O);case"unsubscribe":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.messageId,K=F.dup?f.DUP_MASK:0,G=F.unsubscriptions,r=F.properties;let s=0;if(typeof W!="number")return B.emit("error",new Error("Invalid messageId")),!1;if(s+=2,typeof G!="object"||!G.length)return B.emit("error",new Error("Invalid unsubscriptions")),!1;for(let j=0;j<G.length;j+=1){if(typeof G[j]!="string")return B.emit("error",new Error("Invalid unsubscriptions")),!1;s+=_.byteLength(G[j])+2}let b=null;if(H===5){if(!(b=m(B,r)))return!1;s+=b.length}B.write(f.UNSUBSCRIBE_HEADER[1][K?1:0][0]),C(B,s),p(B,W),b!==null&&b.write();let T=!0;for(let j=0;j<G.length;j++)T=E(B,G[j]);return T}(M,P,O);case"unsuback":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.messageId,K=F.dup?f.DUP_MASK:0,G=F.granted,r=F.properties,s=F.cmd;let b=2;if(typeof W!="number")return B.emit("error",new Error("Invalid messageId")),!1;if(H===5){if(typeof G!="object"||!G.length)return B.emit("error",new Error("Invalid qos vector")),!1;for(let j=0;j<G.length;j+=1){if(typeof G[j]!="number")return B.emit("error",new Error("Invalid qos vector")),!1;b+=1}}let T=null;if(H===5){if(!(T=S(B,r,U,b)))return!1;b+=T.length}return B.write(f.ACKS[s][0][K][0]),C(B,b),p(B,W),T!==null&&T.write(),H===5&&B.write(_.from(G)),!0}(M,P,O);case"pingreq":case"pingresp":return function(R,B,U){return B.write(f.EMPTY[R.cmd])}(M,P);case"disconnect":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.reasonCode,K=F.properties;let G=H===5?1:0,r=null;if(H===5){if(!(r=S(B,K,U,G)))return!1;G+=r.length}return B.write(_.from([f.codes.disconnect<<4])),C(B,G),H===5&&B.write(_.from([W])),r!==null&&r.write(),!0}(M,P,O);case"auth":return function(R,B,U){const H=U?U.protocolVersion:4,F=R||{},W=F.reasonCode,K=F.properties;let G=H===5?1:0;H!==5&&B.emit("error",new Error("Invalid mqtt version for auth packet"));const r=S(B,K,U,G);return r?(G+=r.length,B.write(_.from([f.codes.auth<<4])),C(B,G),B.write(_.from([W])),r!==null&&r.write(),!0):!1}(M,P,O);default:return P.emit("error",new Error("Unknown command")),!1}}function v(M){M.uncork()}Object.defineProperty(c,"cacheNumbers",{get:()=>p===V,set(M){M?(n&&Object.keys(n).length!==0||(g=!0),p=V):(g=!1,p=Q)}});const x={};function C(M,P){if(P>f.VARBYTEINT_MAX)return M.emit("error",new Error(`Invalid variable byte integer: ${P}`)),!1;let O=x[P];return O||(O=h(P),P<16384&&(x[P]=O)),a("writeVarByteInt: writing to stream: %o",O),M.write(O)}function E(M,P){const O=_.byteLength(P);return p(M,O),a("writeString: %s",P),M.write(P,"utf8")}function k(M,P,O){E(M,P),E(M,O)}function V(M,P){return a("writeNumberCached: number: %d",P),a("writeNumberCached: %o",n[P]),M.write(n[P])}function Q(M,P){const O=t(P);return a("writeNumberGenerated: %o",O),M.write(O)}function y(M,P){typeof P=="string"?E(M,P):P?(p(M,P.length),M.write(P)):p(M,0)}function m(M,P){if(typeof P!="object"||P.length!=null)return{length:1,write(){I(M,{},0)}};let O=0;function R(B,U){let H=0;switch(f.propertiesTypes[B]){case"byte":if(typeof U!="boolean")return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=2;break;case"int8":if(typeof U!="number"||U<0||U>255)return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=2;break;case"binary":if(U&&U===null)return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=1+_.byteLength(U)+2;break;case"int16":if(typeof U!="number"||U<0||U>65535)return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=3;break;case"int32":if(typeof U!="number"||U<0||U>4294967295)return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=5;break;case"var":if(typeof U!="number"||U<0||U>268435455)return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=1+_.byteLength(h(U));break;case"string":if(typeof U!="string")return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=3+_.byteLength(U.toString());break;case"pair":if(typeof U!="object")return M.emit("error",new Error(`Invalid ${B}: ${U}`)),!1;H+=Object.getOwnPropertyNames(U).reduce((F,W)=>{const K=U[W];return Array.isArray(K)?F+=K.reduce((G,r)=>G+=3+_.byteLength(W.toString())+2+_.byteLength(r.toString()),0):F+=3+_.byteLength(W.toString())+2+_.byteLength(U[W].toString()),F},0);break;default:return M.emit("error",new Error(`Invalid property ${B}: ${U}`)),!1}return H}if(P)for(const B in P){let U=0,H=0;const F=P[B];if(Array.isArray(F))for(let W=0;W<F.length;W++){if(!(H=R(B,F[W])))return!1;U+=H}else{if(!(H=R(B,F)))return!1;U=H}if(!U)return!1;O+=U}return{length:_.byteLength(h(O))+O,write(){I(M,P,O)}}}function S(M,P,O,R){const B=["reasonString","userProperties"],U=O&&O.properties&&O.properties.maximumPacketSize?O.properties.maximumPacketSize:0;let H=m(M,P);if(U)for(;R+H.length>U;){const F=B.shift();if(!F||!P[F])return!1;delete P[F],H=m(M,P)}return H}function w(M,P,O){switch(f.propertiesTypes[P]){case"byte":M.write(_.from([f.properties[P]])),M.write(_.from([+O]));break;case"int8":M.write(_.from([f.properties[P]])),M.write(_.from([O]));break;case"binary":M.write(_.from([f.properties[P]])),y(M,O);break;case"int16":M.write(_.from([f.properties[P]])),p(M,O);break;case"int32":M.write(_.from([f.properties[P]])),function(R,B){const U=l(B);a("write4ByteNumber: %o",U),R.write(U)}(M,O);break;case"var":M.write(_.from([f.properties[P]])),C(M,O);break;case"string":M.write(_.from([f.properties[P]])),E(M,O);break;case"pair":Object.getOwnPropertyNames(O).forEach(R=>{const B=O[R];Array.isArray(B)?B.forEach(U=>{M.write(_.from([f.properties[P]])),k(M,R.toString(),U.toString())}):(M.write(_.from([f.properties[P]])),k(M,R.toString(),B.toString()))});break;default:return M.emit("error",new Error(`Invalid property ${P} value: ${O}`)),!1}}function I(M,P,O){C(M,O);for(const R in P)if(Object.prototype.hasOwnProperty.call(P,R)&&P[R]!==null){const B=P[R];if(Array.isArray(B))for(let U=0;U<B.length;U++)w(M,R,B[U]);else w(M,R,B)}}function N(M){return M?M instanceof _?M.length:_.byteLength(M):0}function D(M){return typeof M=="string"||M instanceof _}z.exports=c}).call(this)}).call(this,A("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(A,z,L){var _=1e3,f=60*_,d=60*f,u=24*d,i=7*u,e=365.25*u;function a(n,t,o,h){var l=t>=1.5*o;return Math.round(n/o)+" "+h+(l?"s":"")}z.exports=function(n,t){t=t||{};var o=typeof n;if(o==="string"&&n.length>0)return function(h){if(!((h=String(h)).length>100)){var l=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(h);if(l){var p=parseFloat(l[1]);switch((l[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return p*e;case"weeks":case"week":case"w":return p*i;case"days":case"day":case"d":return p*u;case"hours":case"hour":case"hrs":case"hr":case"h":return p*d;case"minutes":case"minute":case"mins":case"min":case"m":return p*f;case"seconds":case"second":case"secs":case"sec":case"s":return p*_;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return p;default:return}}}}(n);if(o==="number"&&isFinite(n))return t.long?function(h){var l=Math.abs(h);return l>=u?a(h,l,u,"day"):l>=d?a(h,l,d,"hour"):l>=f?a(h,l,f,"minute"):l>=_?a(h,l,_,"second"):h+" ms"}(n):function(h){var l=Math.abs(h);return l>=u?Math.round(h/u)+"d":l>=d?Math.round(h/d)+"h":l>=f?Math.round(h/f)+"m":l>=_?Math.round(h/_)+"s":h+"ms"}(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))}},{}],46:[function(A,z,L){const _=A("./lib/number-allocator.js");z.exports.NumberAllocator=_},{"./lib/number-allocator.js":47}],47:[function(A,z,L){const _=A("js-sdsl").Set,f=A("debug")("number-allocator:trace"),d=A("debug")("number-allocator:error");function u(e,a){this.low=e,this.high=a}function i(e,a){if(!(this instanceof i))return new i(e,a);this.min=e,this.max=a,this.ss=new _([],(n,t)=>n.compare(t)),f("Create"),this.clear()}u.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},u.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},i.prototype.firstVacant=function(){return this.ss.size()===0?null:this.ss.front().low},i.prototype.alloc=function(){if(this.ss.size()===0)return f("alloc():empty"),null;const e=this.ss.front(),a=e.low;return a+1<=e.high?++e.low:this.ss.eraseElementByPos(0),f("alloc():"+a),a},i.prototype.use=function(e){const a=new u(e,e),n=this.ss.lowerBound(a);if(n){if(n.equals(a))return this.ss.eraseElementByValue(n),f("use():"+e),!0;if(n.low>e)return!1;if(n.low===e)return++n.low,f("use():"+e),!0;if(n.high===e)return--n.high,f("use():"+e),!0;const t=n.low;return n.low=e+1,this.ss.insert(new u(t,e-1)),f("use():"+e),!0}return f("use():failed"),!1},i.prototype.free=function(e){if(e<this.min||e>this.max)return void d("free():"+e+" is out of range");const a=new u(e,e),n=this.ss.lowerBound(a);if(n){if(n.low<=e&&e<=n.high)return void d("free():"+e+" has already been vacant");if(n===this.ss.front())e+1===n.low?--n.low:this.ss.insert(a);else{const t=this.ss.reverseLowerBound(a);t.high+1===e?e+1===n.low?(this.ss.eraseElementByValue(t),n.low=t.low):t.high=e:e+1===n.low?n.low=e:this.ss.insert(a)}}else{if(n===this.ss.front())return void this.ss.insert(a);const t=this.ss.reverseLowerBound(a);t.high+1===e?t.high=e:this.ss.insert(a)}f("free():"+e)},i.prototype.clear=function(){f("clear()"),this.ss.clear(),this.ss.insert(new u(this.min,this.max))},i.prototype.intervalCount=function(){return this.ss.size()},i.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},z.exports=i},{debug:18,"js-sdsl":36}],48:[function(A,z,L){var _=A("wrappy");function f(u){var i=function(){return i.called?i.value:(i.called=!0,i.value=u.apply(this,arguments))};return i.called=!1,i}function d(u){var i=function(){if(i.called)throw new Error(i.onceError);return i.called=!0,i.value=u.apply(this,arguments)},e=u.name||"Function wrapped with `once`";return i.onceError=e+" shouldn't be called more than once",i.called=!1,i}z.exports=_(f),z.exports.strict=_(d),f.proto=f(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return f(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return d(this)},configurable:!0})})},{wrappy:79}],49:[function(A,z,L){(function(_){(function(){_===void 0||!_.version||_.version.indexOf("v0.")===0||_.version.indexOf("v1.")===0&&_.version.indexOf("v1.8.")!==0?z.exports={nextTick:function(f,d,u,i){if(typeof f!="function")throw new TypeError('"callback" argument must be a function');var e,a,n=arguments.length;switch(n){case 0:case 1:return _.nextTick(f);case 2:return _.nextTick(function(){f.call(null,d)});case 3:return _.nextTick(function(){f.call(null,d,u)});case 4:return _.nextTick(function(){f.call(null,d,u,i)});default:for(e=new Array(n-1),a=0;a<e.length;)e[a++]=arguments[a];return _.nextTick(function(){f.apply(null,e)})}}}:z.exports=_}).call(this)}).call(this,A("_process"))},{_process:50}],50:[function(A,z,L){var _,f,d=z.exports={};function u(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function e(c){if(_===setTimeout)return setTimeout(c,0);if((_===u||!_)&&setTimeout)return _=setTimeout,setTimeout(c,0);try{return _(c,0)}catch{try{return _.call(null,c,0)}catch{return _.call(this,c,0)}}}(function(){try{_=typeof setTimeout=="function"?setTimeout:u}catch{_=u}try{f=typeof clearTimeout=="function"?clearTimeout:i}catch{f=i}})();var a,n=[],t=!1,o=-1;function h(){t&&a&&(t=!1,a.length?n=a.concat(n):o=-1,n.length&&l())}function l(){if(!t){var c=e(h);t=!0;for(var v=n.length;v;){for(a=n,n=[];++o<v;)a&&a[o].run();o=-1,v=n.length}a=null,t=!1,function(x){if(f===clearTimeout)return clearTimeout(x);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(x);try{f(x)}catch{try{return f.call(null,x)}catch{return f.call(this,x)}}}(c)}}function p(c,v){this.fun=c,this.array=v}function g(){}d.nextTick=function(c){var v=new Array(arguments.length-1);if(arguments.length>1)for(var x=1;x<arguments.length;x++)v[x-1]=arguments[x];n.push(new p(c,v)),n.length!==1||t||e(l)},p.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=g,d.addListener=g,d.once=g,d.off=g,d.removeListener=g,d.removeAllListeners=g,d.emit=g,d.prependListener=g,d.prependOnceListener=g,d.listeners=function(c){return[]},d.binding=function(c){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(c){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],51:[function(A,z,L){(function(_){(function(){(function(f){var d=typeof L=="object"&&L&&!L.nodeType&&L,u=typeof z=="object"&&z&&!z.nodeType&&z,i=typeof _=="object"&&_;i.global!==i&&i.window!==i&&i.self!==i||(f=i);var e,a,n=2147483647,t=36,o=1,h=26,l=38,p=700,g=72,c=128,v="-",x=/^xn--/,C=/[^\x20-\x7E]/,E=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},V=t-o,Q=Math.floor,y=String.fromCharCode;function m(R){throw new RangeError(k[R])}function S(R,B){for(var U=R.length,H=[];U--;)H[U]=B(R[U]);return H}function w(R,B){var U=R.split("@"),H="";return U.length>1&&(H=U[0]+"@",R=U[1]),H+S((R=R.replace(E,".")).split("."),B).join(".")}function I(R){for(var B,U,H=[],F=0,W=R.length;F<W;)(B=R.charCodeAt(F++))>=55296&&B<=56319&&F<W?(64512&(U=R.charCodeAt(F++)))==56320?H.push(((1023&B)<<10)+(1023&U)+65536):(H.push(B),F--):H.push(B);return H}function N(R){return S(R,function(B){var U="";return B>65535&&(U+=y((B-=65536)>>>10&1023|55296),B=56320|1023&B),U+=y(B)}).join("")}function D(R,B){return R+22+75*(R<26)-((B!=0)<<5)}function M(R,B,U){var H=0;for(R=U?Q(R/p):R>>1,R+=Q(R/B);R>V*h>>1;H+=t)R=Q(R/V);return Q(H+(V+1)*R/(R+l))}function P(R){var B,U,H,F,W,K,G,r,s,b,T,j=[],q=R.length,$=0,Z=c,Y=g;for((U=R.lastIndexOf(v))<0&&(U=0),H=0;H<U;++H)R.charCodeAt(H)>=128&&m("not-basic"),j.push(R.charCodeAt(H));for(F=U>0?U+1:0;F<q;){for(W=$,K=1,G=t;F>=q&&m("invalid-input"),((r=(T=R.charCodeAt(F++))-48<10?T-22:T-65<26?T-65:T-97<26?T-97:t)>=t||r>Q((n-$)/K))&&m("overflow"),$+=r*K,!(r<(s=G<=Y?o:G>=Y+h?h:G-Y));G+=t)K>Q(n/(b=t-s))&&m("overflow"),K*=b;Y=M($-W,B=j.length+1,W==0),Q($/B)>n-Z&&m("overflow"),Z+=Q($/B),$%=B,j.splice($++,0,Z)}return N(j)}function O(R){var B,U,H,F,W,K,G,r,s,b,T,j,q,$,Z,Y=[];for(j=(R=I(R)).length,B=c,U=0,W=g,K=0;K<j;++K)(T=R[K])<128&&Y.push(y(T));for(H=F=Y.length,F&&Y.push(v);H<j;){for(G=n,K=0;K<j;++K)(T=R[K])>=B&&T<G&&(G=T);for(G-B>Q((n-U)/(q=H+1))&&m("overflow"),U+=(G-B)*q,B=G,K=0;K<j;++K)if((T=R[K])<B&&++U>n&&m("overflow"),T==B){for(r=U,s=t;!(r<(b=s<=W?o:s>=W+h?h:s-W));s+=t)Z=r-b,$=t-b,Y.push(y(D(b+Z%$,0))),r=Q(Z/$);Y.push(y(D(r,0))),W=M(U,q,H==F),U=0,++H}++U,++B}return Y.join("")}if(e={version:"1.4.1",ucs2:{decode:I,encode:N},decode:P,encode:O,toASCII:function(R){return w(R,function(B){return C.test(B)?"xn--"+O(B):B})},toUnicode:function(R){return w(R,function(B){return x.test(B)?P(B.slice(4).toLowerCase()):B})}},d&&u)if(z.exports==d)u.exports=e;else for(a in e)e.hasOwnProperty(a)&&(d[a]=e[a]);else f.punycode=e})(this)}).call(this)}).call(this,typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}],52:[function(A,z,L){function _(d,u){return Object.prototype.hasOwnProperty.call(d,u)}z.exports=function(d,u,i,e){u=u||"&",i=i||"=";var a={};if(typeof d!="string"||d.length===0)return a;var n=/\+/g;d=d.split(u);var t=1e3;e&&typeof e.maxKeys=="number"&&(t=e.maxKeys);var o=d.length;t>0&&o>t&&(o=t);for(var h=0;h<o;++h){var l,p,g,c,v=d[h].replace(n,"%20"),x=v.indexOf(i);x>=0?(l=v.substr(0,x),p=v.substr(x+1)):(l=v,p=""),g=decodeURIComponent(l),c=decodeURIComponent(p),_(a,g)?f(a[g])?a[g].push(c):a[g]=[a[g],c]:a[g]=c}return a};var f=Array.isArray||function(d){return Object.prototype.toString.call(d)==="[object Array]"}},{}],53:[function(A,z,L){var _=function(i){switch(typeof i){case"string":return i;case"boolean":return i?"true":"false";case"number":return isFinite(i)?i:"";default:return""}};z.exports=function(i,e,a,n){return e=e||"&",a=a||"=",i===null&&(i=void 0),typeof i=="object"?d(u(i),function(t){var o=encodeURIComponent(_(t))+a;return f(i[t])?d(i[t],function(h){return o+encodeURIComponent(_(h))}).join(e):o+encodeURIComponent(_(i[t]))}).join(e):n?encodeURIComponent(_(n))+a+encodeURIComponent(_(i)):""};var f=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function d(i,e){if(i.map)return i.map(e);for(var a=[],n=0;n<i.length;n++)a.push(e(i[n],n));return a}var u=Object.keys||function(i){var e=[];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&e.push(a);return e}},{}],54:[function(A,z,L){L.decode=L.parse=A("./decode"),L.encode=L.stringify=A("./encode")},{"./decode":52,"./encode":53}],55:[function(A,z,L){var _={};function f(u,i,e){e||(e=Error);var a=function(n){var t,o;function h(l,p,g){return n.call(this,function(c,v,x){return typeof i=="string"?i:i(c,v,x)}(l,p,g))||this}return o=n,(t=h).prototype=Object.create(o.prototype),t.prototype.constructor=t,t.__proto__=o,h}(e);a.prototype.name=e.name,a.prototype.code=u,_[u]=a}function d(u,i){if(Array.isArray(u)){var e=u.length;return u=u.map(function(a){return String(a)}),e>2?"one of ".concat(i," ").concat(u.slice(0,e-1).join(", "),", or ")+u[e-1]:e===2?"one of ".concat(i," ").concat(u[0]," or ").concat(u[1]):"of ".concat(i," ").concat(u[0])}return"of ".concat(i," ").concat(String(u))}f("ERR_INVALID_OPT_VALUE",function(u,i){return'The value "'+i+'" is invalid for option "'+u+'"'},TypeError),f("ERR_INVALID_ARG_TYPE",function(u,i,e){var a,n,t;if(typeof i=="string"&&(n="not ",i.substr(0,n.length)===n)?(a="must not be",i=i.replace(/^not /,"")):a="must be",function(h,l,p){return(p===void 0||p>h.length)&&(p=h.length),h.substring(p-l.length,p)===l}(u," argument"))t="The ".concat(u," ").concat(a," ").concat(d(i,"type"));else{var o=function(h,l,p){return typeof p!="number"&&(p=0),!(p+l.length>h.length)&&h.indexOf(l,p)!==-1}(u,".")?"property":"argument";t='The "'.concat(u,'" ').concat(o," ").concat(a," ").concat(d(i,"type"))}return t+=". Received type ".concat(typeof e)},TypeError),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),f("ERR_METHOD_NOT_IMPLEMENTED",function(u){return"The "+u+" method is not implemented"}),f("ERR_STREAM_PREMATURE_CLOSE","Premature close"),f("ERR_STREAM_DESTROYED",function(u){return"Cannot call "+u+" after a stream was destroyed"}),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),f("ERR_STREAM_WRITE_AFTER_END","write after end"),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_UNKNOWN_ENCODING",function(u){return"Unknown encoding: "+u},TypeError),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),z.exports.codes=_},{}],56:[function(A,z,L){(function(_){(function(){var f=Object.keys||function(h){var l=[];for(var p in h)l.push(p);return l};z.exports=n;var d=A("./_stream_readable"),u=A("./_stream_writable");A("inherits")(n,d);for(var i=f(u.prototype),e=0;e<i.length;e++){var a=i[e];n.prototype[a]||(n.prototype[a]=u.prototype[a])}function n(h){if(!(this instanceof n))return new n(h);d.call(this,h),u.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}function t(){this._writableState.ended||_.nextTick(o,this)}function o(h){h.end()}Object.defineProperty(n.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(n.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(n.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(n.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,A("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(A,z,L){z.exports=f;var _=A("./_stream_transform");function f(d){if(!(this instanceof f))return new f(d);_.call(this,d)}A("inherits")(f,_),f.prototype._transform=function(d,u,i){i(null,d)}},{"./_stream_transform":59,inherits:24}],58:[function(A,z,L){(function(_,f){(function(){var d;z.exports=m,m.ReadableState=y,A("events").EventEmitter;var u=function(r,s){return r.listeners(s).length},i=A("./internal/streams/stream"),e=A("buffer").Buffer,a=f.Uint8Array||function(){},n,t=A("util");n=t&&t.debuglog?t.debuglog("stream"):function(){};var o,h,l,p=A("./internal/streams/buffer_list"),g=A("./internal/streams/destroy"),c=A("./internal/streams/state").getHighWaterMark,v=A("../errors").codes,x=v.ERR_INVALID_ARG_TYPE,C=v.ERR_STREAM_PUSH_AFTER_EOF,E=v.ERR_METHOD_NOT_IMPLEMENTED,k=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;A("inherits")(m,i);var V=g.errorOrDestroy,Q=["error","close","destroy","pause","resume"];function y(r,s,b){d=d||A("./_stream_duplex"),r=r||{},typeof b!="boolean"&&(b=s instanceof d),this.objectMode=!!r.objectMode,b&&(this.objectMode=this.objectMode||!!r.readableObjectMode),this.highWaterMark=c(this,r,"readableHighWaterMark",b),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=r.emitClose!==!1,this.autoDestroy=!!r.autoDestroy,this.destroyed=!1,this.defaultEncoding=r.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,r.encoding&&(o||(o=A("string_decoder/").StringDecoder),this.decoder=new o(r.encoding),this.encoding=r.encoding)}function m(r){if(d=d||A("./_stream_duplex"),!(this instanceof m))return new m(r);var s=this instanceof d;this._readableState=new y(r,this,s),this.readable=!0,r&&(typeof r.read=="function"&&(this._read=r.read),typeof r.destroy=="function"&&(this._destroy=r.destroy)),i.call(this)}function S(r,s,b,T,j){n("readableAddChunk",s);var q,$=r._readableState;if(s===null)$.reading=!1,function(Z,Y){if(n("onEofChunk"),!Y.ended){if(Y.decoder){var ee=Y.decoder.end();ee&&ee.length&&(Y.buffer.push(ee),Y.length+=Y.objectMode?1:ee.length)}Y.ended=!0,Y.sync?D(Z):(Y.needReadable=!1,Y.emittedReadable||(Y.emittedReadable=!0,M(Z)))}}(r,$);else if(j||(q=function(Z,Y){var ee;te=Y,e.isBuffer(te)||te instanceof a||typeof Y=="string"||Y===void 0||Z.objectMode||(ee=new x("chunk",["string","Buffer","Uint8Array"],Y));var te;return ee}($,s)),q)V(r,q);else if($.objectMode||s&&s.length>0)if(typeof s=="string"||$.objectMode||Object.getPrototypeOf(s)===e.prototype||(s=function(Z){return e.from(Z)}(s)),T)$.endEmitted?V(r,new k):w(r,$,s,!0);else if($.ended)V(r,new C);else{if($.destroyed)return!1;$.reading=!1,$.decoder&&!b?(s=$.decoder.write(s),$.objectMode||s.length!==0?w(r,$,s,!1):P(r,$)):w(r,$,s,!1)}else T||($.reading=!1,P(r,$));return!$.ended&&($.length<$.highWaterMark||$.length===0)}function w(r,s,b,T){s.flowing&&s.length===0&&!s.sync?(s.awaitDrain=0,r.emit("data",b)):(s.length+=s.objectMode?1:b.length,T?s.buffer.unshift(b):s.buffer.push(b),s.needReadable&&D(r)),P(r,s)}Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(r){this._readableState&&(this._readableState.destroyed=r)}}),m.prototype.destroy=g.destroy,m.prototype._undestroy=g.undestroy,m.prototype._destroy=function(r,s){s(r)},m.prototype.push=function(r,s){var b,T=this._readableState;return T.objectMode?b=!0:typeof r=="string"&&((s=s||T.defaultEncoding)!==T.encoding&&(r=e.from(r,s),s=""),b=!0),S(this,r,s,!1,b)},m.prototype.unshift=function(r){return S(this,r,null,!0,!1)},m.prototype.isPaused=function(){return this._readableState.flowing===!1},m.prototype.setEncoding=function(r){o||(o=A("string_decoder/").StringDecoder);var s=new o(r);this._readableState.decoder=s,this._readableState.encoding=this._readableState.decoder.encoding;for(var b=this._readableState.buffer.head,T="";b!==null;)T+=s.write(b.data),b=b.next;return this._readableState.buffer.clear(),T!==""&&this._readableState.buffer.push(T),this._readableState.length=T.length,this};var I=1073741824;function N(r,s){return r<=0||s.length===0&&s.ended?0:s.objectMode?1:r!=r?s.flowing&&s.length?s.buffer.head.data.length:s.length:(r>s.highWaterMark&&(s.highWaterMark=function(b){return b>=I?b=I:(b--,b|=b>>>1,b|=b>>>2,b|=b>>>4,b|=b>>>8,b|=b>>>16,b++),b}(r)),r<=s.length?r:s.ended?s.length:(s.needReadable=!0,0))}function D(r){var s=r._readableState;n("emitReadable",s.needReadable,s.emittedReadable),s.needReadable=!1,s.emittedReadable||(n("emitReadable",s.flowing),s.emittedReadable=!0,_.nextTick(M,r))}function M(r){var s=r._readableState;n("emitReadable_",s.destroyed,s.length,s.ended),s.destroyed||!s.length&&!s.ended||(r.emit("readable"),s.emittedReadable=!1),s.needReadable=!s.flowing&&!s.ended&&s.length<=s.highWaterMark,H(r)}function P(r,s){s.readingMore||(s.readingMore=!0,_.nextTick(O,r,s))}function O(r,s){for(;!s.reading&&!s.ended&&(s.length<s.highWaterMark||s.flowing&&s.length===0);){var b=s.length;if(n("maybeReadMore read 0"),r.read(0),b===s.length)break}s.readingMore=!1}function R(r){var s=r._readableState;s.readableListening=r.listenerCount("readable")>0,s.resumeScheduled&&!s.paused?s.flowing=!0:r.listenerCount("data")>0&&r.resume()}function B(r){n("readable nexttick read 0"),r.read(0)}function U(r,s){n("resume",s.reading),s.reading||r.read(0),s.resumeScheduled=!1,r.emit("resume"),H(r),s.flowing&&!s.reading&&r.read(0)}function H(r){var s=r._readableState;for(n("flow",s.flowing);s.flowing&&r.read()!==null;);}function F(r,s){return s.length===0?null:(s.objectMode?b=s.buffer.shift():!r||r>=s.length?(b=s.decoder?s.buffer.join(""):s.buffer.length===1?s.buffer.first():s.buffer.concat(s.length),s.buffer.clear()):b=s.buffer.consume(r,s.decoder),b);var b}function W(r){var s=r._readableState;n("endReadable",s.endEmitted),s.endEmitted||(s.ended=!0,_.nextTick(K,s,r))}function K(r,s){if(n("endReadableNT",r.endEmitted,r.length),!r.endEmitted&&r.length===0&&(r.endEmitted=!0,s.readable=!1,s.emit("end"),r.autoDestroy)){var b=s._writableState;(!b||b.autoDestroy&&b.finished)&&s.destroy()}}function G(r,s){for(var b=0,T=r.length;b<T;b++)if(r[b]===s)return b;return-1}m.prototype.read=function(r){n("read",r),r=parseInt(r,10);var s=this._readableState,b=r;if(r!==0&&(s.emittedReadable=!1),r===0&&s.needReadable&&((s.highWaterMark!==0?s.length>=s.highWaterMark:s.length>0)||s.ended))return n("read: emitReadable",s.length,s.ended),s.length===0&&s.ended?W(this):D(this),null;if((r=N(r,s))===0&&s.ended)return s.length===0&&W(this),null;var T,j=s.needReadable;return n("need readable",j),(s.length===0||s.length-r<s.highWaterMark)&&n("length less than watermark",j=!0),s.ended||s.reading?n("reading or ended",j=!1):j&&(n("do read"),s.reading=!0,s.sync=!0,s.length===0&&(s.needReadable=!0),this._read(s.highWaterMark),s.sync=!1,s.reading||(r=N(b,s))),(T=r>0?F(r,s):null)===null?(s.needReadable=s.length<=s.highWaterMark,r=0):(s.length-=r,s.awaitDrain=0),s.length===0&&(s.ended||(s.needReadable=!0),b!==r&&s.ended&&W(this)),T!==null&&this.emit("data",T),T},m.prototype._read=function(r){V(this,new E("_read()"))},m.prototype.pipe=function(r,s){var b=this,T=this._readableState;switch(T.pipesCount){case 0:T.pipes=r;break;case 1:T.pipes=[T.pipes,r];break;default:T.pipes.push(r)}T.pipesCount+=1,n("pipe count=%d opts=%j",T.pipesCount,s);var j=(!s||s.end!==!1)&&r!==_.stdout&&r!==_.stderr?$:ue;function q(ne,ie){n("onunpipe"),ne===b&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,n("cleanup"),r.removeListener("close",le),r.removeListener("finish",ae),r.removeListener("drain",Z),r.removeListener("error",te),r.removeListener("unpipe",q),b.removeListener("end",$),b.removeListener("end",ue),b.removeListener("data",ee),Y=!0,!T.awaitDrain||r._writableState&&!r._writableState.needDrain||Z())}function $(){n("onend"),r.end()}T.endEmitted?_.nextTick(j):b.once("end",j),r.on("unpipe",q);var Z=function(ne){return function(){var ie=ne._readableState;n("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&u(ne,"data")&&(ie.flowing=!0,H(ne))}}(b);r.on("drain",Z);var Y=!1;function ee(ne){n("ondata");var ie=r.write(ne);n("dest.write",ie),ie===!1&&((T.pipesCount===1&&T.pipes===r||T.pipesCount>1&&G(T.pipes,r)!==-1)&&!Y&&(n("false write response, pause",T.awaitDrain),T.awaitDrain++),b.pause())}function te(ne){n("onerror",ne),ue(),r.removeListener("error",te),u(r,"error")===0&&V(r,ne)}function le(){r.removeListener("finish",ae),ue()}function ae(){n("onfinish"),r.removeListener("close",le),ue()}function ue(){n("unpipe"),b.unpipe(r)}return b.on("data",ee),function(ne,ie,be){if(typeof ne.prependListener=="function")return ne.prependListener(ie,be);ne._events&&ne._events[ie]?Array.isArray(ne._events[ie])?ne._events[ie].unshift(be):ne._events[ie]=[be,ne._events[ie]]:ne.on(ie,be)}(r,"error",te),r.once("close",le),r.once("finish",ae),r.emit("pipe",b),T.flowing||(n("pipe resume"),b.resume()),r},m.prototype.unpipe=function(r){var s=this._readableState,b={hasUnpiped:!1};if(s.pipesCount===0)return this;if(s.pipesCount===1)return r&&r!==s.pipes?this:(r||(r=s.pipes),s.pipes=null,s.pipesCount=0,s.flowing=!1,r&&r.emit("unpipe",this,b),this);if(!r){var T=s.pipes,j=s.pipesCount;s.pipes=null,s.pipesCount=0,s.flowing=!1;for(var q=0;q<j;q++)T[q].emit("unpipe",this,{hasUnpiped:!1});return this}var $=G(s.pipes,r);return $===-1?this:(s.pipes.splice($,1),s.pipesCount-=1,s.pipesCount===1&&(s.pipes=s.pipes[0]),r.emit("unpipe",this,b),this)},m.prototype.on=function(r,s){var b=i.prototype.on.call(this,r,s),T=this._readableState;return r==="data"?(T.readableListening=this.listenerCount("readable")>0,T.flowing!==!1&&this.resume()):r==="readable"&&(T.endEmitted||T.readableListening||(T.readableListening=T.needReadable=!0,T.flowing=!1,T.emittedReadable=!1,n("on readable",T.length,T.reading),T.length?D(this):T.reading||_.nextTick(B,this))),b},m.prototype.addListener=m.prototype.on,m.prototype.removeListener=function(r,s){var b=i.prototype.removeListener.call(this,r,s);return r==="readable"&&_.nextTick(R,this),b},m.prototype.removeAllListeners=function(r){var s=i.prototype.removeAllListeners.apply(this,arguments);return r!=="readable"&&r!==void 0||_.nextTick(R,this),s},m.prototype.resume=function(){var r=this._readableState;return r.flowing||(n("resume"),r.flowing=!r.readableListening,function(s,b){b.resumeScheduled||(b.resumeScheduled=!0,_.nextTick(U,s,b))}(this,r)),r.paused=!1,this},m.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},m.prototype.wrap=function(r){var s=this,b=this._readableState,T=!1;for(var j in r.on("end",function(){if(n("wrapped end"),b.decoder&&!b.ended){var $=b.decoder.end();$&&$.length&&s.push($)}s.push(null)}),r.on("data",function($){n("wrapped data"),b.decoder&&($=b.decoder.write($)),(!b.objectMode||$!=null)&&(b.objectMode||$&&$.length)&&(s.push($)||(T=!0,r.pause()))}),r)this[j]===void 0&&typeof r[j]=="function"&&(this[j]=function($){return function(){return r[$].apply(r,arguments)}}(j));for(var q=0;q<Q.length;q++)r.on(Q[q],this.emit.bind(this,Q[q]));return this._read=function($){n("wrapped _read",$),T&&(T=!1,r.resume())},this},typeof Symbol=="function"&&(m.prototype[Symbol.asyncIterator]=function(){return h===void 0&&(h=A("./internal/streams/async_iterator")),h(this)}),Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(m.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(m.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),m._fromList=F,Object.defineProperty(m.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(m.from=function(r,s){return l===void 0&&(l=A("./internal/streams/from")),l(m,r,s)})}).call(this)}).call(this,A("_process"),typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(A,z,L){z.exports=a;var _=A("../errors").codes,f=_.ERR_METHOD_NOT_IMPLEMENTED,d=_.ERR_MULTIPLE_CALLBACK,u=_.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=_.ERR_TRANSFORM_WITH_LENGTH_0,e=A("./_stream_duplex");function a(o){if(!(this instanceof a))return new a(o);e.call(this,o),this._transformState={afterTransform:function(h,l){var p=this._transformState;p.transforming=!1;var g=p.writecb;if(g===null)return this.emit("error",new d);p.writechunk=null,p.writecb=null,l!=null&&this.push(l),g(h);var c=this._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&this._read(c.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",n)}function n(){var o=this;typeof this._flush!="function"||this._readableState.destroyed?t(this,null,null):this._flush(function(h,l){t(o,h,l)})}function t(o,h,l){if(h)return o.emit("error",h);if(l!=null&&o.push(l),o._writableState.length)throw new i;if(o._transformState.transforming)throw new u;return o.push(null)}A("inherits")(a,e),a.prototype.push=function(o,h){return this._transformState.needTransform=!1,e.prototype.push.call(this,o,h)},a.prototype._transform=function(o,h,l){l(new f("_transform()"))},a.prototype._write=function(o,h,l){var p=this._transformState;if(p.writecb=l,p.writechunk=o,p.writeencoding=h,!p.transforming){var g=this._readableState;(p.needTransform||g.needReadable||g.length<g.highWaterMark)&&this._read(g.highWaterMark)}},a.prototype._read=function(o){var h=this._transformState;h.writechunk===null||h.transforming?h.needTransform=!0:(h.transforming=!0,this._transform(h.writechunk,h.writeencoding,h.afterTransform))},a.prototype._destroy=function(o,h){e.prototype._destroy.call(this,o,function(l){h(l)})}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(A,z,L){(function(_,f){(function(){function d(P){var O=this;this.next=null,this.entry=null,this.finish=function(){(function(R,B,U){var H=R.entry;for(R.entry=null;H;){var F=H.callback;B.pendingcb--,F(U),H=H.next}B.corkedRequestsFree.next=R})(O,P)}}var u;z.exports=m,m.WritableState=y;var i={deprecate:A("util-deprecate")},e=A("./internal/streams/stream"),a=A("buffer").Buffer,n=f.Uint8Array||function(){},t,o=A("./internal/streams/destroy"),h=A("./internal/streams/state").getHighWaterMark,l=A("../errors").codes,p=l.ERR_INVALID_ARG_TYPE,g=l.ERR_METHOD_NOT_IMPLEMENTED,c=l.ERR_MULTIPLE_CALLBACK,v=l.ERR_STREAM_CANNOT_PIPE,x=l.ERR_STREAM_DESTROYED,C=l.ERR_STREAM_NULL_VALUES,E=l.ERR_STREAM_WRITE_AFTER_END,k=l.ERR_UNKNOWN_ENCODING,V=o.errorOrDestroy;function Q(){}function y(P,O,R){u=u||A("./_stream_duplex"),P=P||{},typeof R!="boolean"&&(R=O instanceof u),this.objectMode=!!P.objectMode,R&&(this.objectMode=this.objectMode||!!P.writableObjectMode),this.highWaterMark=h(this,P,"writableHighWaterMark",R),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var B=P.decodeStrings===!1;this.decodeStrings=!B,this.defaultEncoding=P.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(U){(function(H,F){var W=H._writableState,K=W.sync,G=W.writecb;if(typeof G!="function")throw new c;if(function(s){s.writing=!1,s.writecb=null,s.length-=s.writelen,s.writelen=0}(W),F)(function(s,b,T,j,q){--b.pendingcb,T?(_.nextTick(q,j),_.nextTick(M,s,b),s._writableState.errorEmitted=!0,V(s,j)):(q(j),s._writableState.errorEmitted=!0,V(s,j),M(s,b))})(H,W,K,F,G);else{var r=N(W)||H.destroyed;r||W.corked||W.bufferProcessing||!W.bufferedRequest||I(H,W),K?_.nextTick(w,H,W,r,G):w(H,W,r,G)}})(O,U)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=P.emitClose!==!1,this.autoDestroy=!!P.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new d(this)}function m(P){var O=this instanceof(u=u||A("./_stream_duplex"));if(!O&&!t.call(m,this))return new m(P);this._writableState=new y(P,this,O),this.writable=!0,P&&(typeof P.write=="function"&&(this._write=P.write),typeof P.writev=="function"&&(this._writev=P.writev),typeof P.destroy=="function"&&(this._destroy=P.destroy),typeof P.final=="function"&&(this._final=P.final)),e.call(this)}function S(P,O,R,B,U,H,F){O.writelen=B,O.writecb=F,O.writing=!0,O.sync=!0,O.destroyed?O.onwrite(new x("write")):R?P._writev(U,O.onwrite):P._write(U,H,O.onwrite),O.sync=!1}function w(P,O,R,B){R||function(U,H){H.length===0&&H.needDrain&&(H.needDrain=!1,U.emit("drain"))}(P,O),O.pendingcb--,B(),M(P,O)}function I(P,O){O.bufferProcessing=!0;var R=O.bufferedRequest;if(P._writev&&R&&R.next){var B=O.bufferedRequestCount,U=new Array(B),H=O.corkedRequestsFree;H.entry=R;for(var F=0,W=!0;R;)U[F]=R,R.isBuf||(W=!1),R=R.next,F+=1;U.allBuffers=W,S(P,O,!0,O.length,U,"",H.finish),O.pendingcb++,O.lastBufferedRequest=null,H.next?(O.corkedRequestsFree=H.next,H.next=null):O.corkedRequestsFree=new d(O),O.bufferedRequestCount=0}else{for(;R;){var K=R.chunk,G=R.encoding,r=R.callback;if(S(P,O,!1,O.objectMode?1:K.length,K,G,r),R=R.next,O.bufferedRequestCount--,O.writing)break}R===null&&(O.lastBufferedRequest=null)}O.bufferedRequest=R,O.bufferProcessing=!1}function N(P){return P.ending&&P.length===0&&P.bufferedRequest===null&&!P.finished&&!P.writing}function D(P,O){P._final(function(R){O.pendingcb--,R&&V(P,R),O.prefinished=!0,P.emit("prefinish"),M(P,O)})}function M(P,O){var R=N(O);if(R&&(function(U,H){H.prefinished||H.finalCalled||(typeof U._final!="function"||H.destroyed?(H.prefinished=!0,U.emit("prefinish")):(H.pendingcb++,H.finalCalled=!0,_.nextTick(D,U,H)))}(P,O),O.pendingcb===0&&(O.finished=!0,P.emit("finish"),O.autoDestroy))){var B=P._readableState;(!B||B.autoDestroy&&B.endEmitted)&&P.destroy()}return R}A("inherits")(m,e),y.prototype.getBuffer=function(){for(var P=this.bufferedRequest,O=[];P;)O.push(P),P=P.next;return O},function(){try{Object.defineProperty(y.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(t=Function.prototype[Symbol.hasInstance],Object.defineProperty(m,Symbol.hasInstance,{value:function(P){return!!t.call(this,P)||this===m&&P&&P._writableState instanceof y}})):t=function(P){return P instanceof this},m.prototype.pipe=function(){V(this,new v)},m.prototype.write=function(P,O,R){var B,U=this._writableState,H=!1,F=!U.objectMode&&(B=P,a.isBuffer(B)||B instanceof n);return F&&!a.isBuffer(P)&&(P=function(W){return a.from(W)}(P)),typeof O=="function"&&(R=O,O=null),F?O="buffer":O||(O=U.defaultEncoding),typeof R!="function"&&(R=Q),U.ending?function(W,K){var G=new E;V(W,G),_.nextTick(K,G)}(this,R):(F||function(W,K,G,r){var s;return G===null?s=new C:typeof G=="string"||K.objectMode||(s=new p("chunk",["string","Buffer"],G)),!s||(V(W,s),_.nextTick(r,s),!1)}(this,U,P,R))&&(U.pendingcb++,H=function(W,K,G,r,s,b){if(!G){var T=function(Z,Y,ee){return Z.objectMode||Z.decodeStrings===!1||typeof Y!="string"||(Y=a.from(Y,ee)),Y}(K,r,s);r!==T&&(G=!0,s="buffer",r=T)}var j=K.objectMode?1:r.length;K.length+=j;var q=K.length<K.highWaterMark;if(q||(K.needDrain=!0),K.writing||K.corked){var $=K.lastBufferedRequest;K.lastBufferedRequest={chunk:r,encoding:s,isBuf:G,callback:b,next:null},$?$.next=K.lastBufferedRequest:K.bufferedRequest=K.lastBufferedRequest,K.bufferedRequestCount+=1}else S(W,K,!1,j,r,s,b);return q}(this,U,F,P,O,R)),H},m.prototype.cork=function(){this._writableState.corked++},m.prototype.uncork=function(){var P=this._writableState;P.corked&&(P.corked--,P.writing||P.corked||P.bufferProcessing||!P.bufferedRequest||I(this,P))},m.prototype.setDefaultEncoding=function(P){if(typeof P=="string"&&(P=P.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((P+"").toLowerCase())>-1))throw new k(P);return this._writableState.defaultEncoding=P,this},Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),m.prototype._write=function(P,O,R){R(new g("_write()"))},m.prototype._writev=null,m.prototype.end=function(P,O,R){var B=this._writableState;return typeof P=="function"?(R=P,P=null,O=null):typeof O=="function"&&(R=O,O=null),P!=null&&this.write(P,O),B.corked&&(B.corked=1,this.uncork()),B.ending||function(U,H,F){H.ending=!0,M(U,H),F&&(H.finished?_.nextTick(F):U.once("finish",F)),H.ended=!0,U.writable=!1}(this,B,R),this},Object.defineProperty(m.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(P){this._writableState&&(this._writableState.destroyed=P)}}),m.prototype.destroy=o.destroy,m.prototype._undestroy=o.undestroy,m.prototype._destroy=function(P,O){O(P)}}).call(this)}).call(this,A("_process"),typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(A,z,L){(function(_){(function(){var f;function d(v,x,C){return x in v?Object.defineProperty(v,x,{value:C,enumerable:!0,configurable:!0,writable:!0}):v[x]=C,v}var u=A("./end-of-stream"),i=Symbol("lastResolve"),e=Symbol("lastReject"),a=Symbol("error"),n=Symbol("ended"),t=Symbol("lastPromise"),o=Symbol("handlePromise"),h=Symbol("stream");function l(v,x){return{value:v,done:x}}function p(v){var x=v[i];if(x!==null){var C=v[h].read();C!==null&&(v[t]=null,v[i]=null,v[e]=null,x(l(C,!1)))}}var g=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((d(f={get stream(){return this[h]},next:function(){var v=this,x=this[a];if(x!==null)return Promise.reject(x);if(this[n])return Promise.resolve(l(void 0,!0));if(this[h].destroyed)return new Promise(function(V,Q){_.nextTick(function(){v[a]?Q(v[a]):V(l(void 0,!0))})});var C,E=this[t];if(E)C=new Promise(function(V,Q){return function(y,m){V.then(function(){Q[n]?y(l(void 0,!0)):Q[o](y,m)},m)}}(E,this));else{var k=this[h].read();if(k!==null)return Promise.resolve(l(k,!1));C=new Promise(this[o])}return this[t]=C,C}},Symbol.asyncIterator,function(){return this}),d(f,"return",function(){var v=this;return new Promise(function(x,C){v[h].destroy(null,function(E){E?C(E):x(l(void 0,!0))})})}),f),g);z.exports=function(v){var x,C=Object.create(c,(d(x={},h,{value:v,writable:!0}),d(x,i,{value:null,writable:!0}),d(x,e,{value:null,writable:!0}),d(x,a,{value:null,writable:!0}),d(x,n,{value:v._readableState.endEmitted,writable:!0}),d(x,o,{value:function(E,k){var V=C[h].read();V?(C[t]=null,C[i]=null,C[e]=null,E(l(V,!1))):(C[i]=E,C[e]=k)},writable:!0}),x));return C[t]=null,u(v,function(E){if(E&&E.code!=="ERR_STREAM_PREMATURE_CLOSE"){var k=C[e];return k!==null&&(C[t]=null,C[i]=null,C[e]=null,k(E)),void(C[a]=E)}var V=C[i];V!==null&&(C[t]=null,C[i]=null,C[e]=null,V(l(void 0,!0))),C[n]=!0}),v.on("readable",function(E){_.nextTick(p,E)}.bind(null,C)),C}}).call(this)}).call(this,A("_process"))},{"./end-of-stream":64,_process:50}],62:[function(A,z,L){function _(a,n){var t=Object.keys(a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(a);n&&(o=o.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),t.push.apply(t,o)}return t}function f(a,n,t){return n in a?Object.defineProperty(a,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[n]=t,a}function d(a,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}var u=A("buffer").Buffer,i=A("util").inspect,e=i&&i.custom||"inspect";z.exports=function(){function a(){(function(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}var n,t;return n=a,(t=[{key:"push",value:function(o){var h={data:o,next:null};this.length>0?this.tail.next=h:this.head=h,this.tail=h,++this.length}},{key:"unshift",value:function(o){var h={data:o,next:this.head};this.length===0&&(this.tail=h),this.head=h,++this.length}},{key:"shift",value:function(){if(this.length!==0){var o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(o){if(this.length===0)return"";for(var h=this.head,l=""+h.data;h=h.next;)l+=o+h.data;return l}},{key:"concat",value:function(o){if(this.length===0)return u.alloc(0);for(var h,l,p,g=u.allocUnsafe(o>>>0),c=this.head,v=0;c;)h=c.data,l=g,p=v,u.prototype.copy.call(h,l,p),v+=c.data.length,c=c.next;return g}},{key:"consume",value:function(o,h){var l;return o<this.head.data.length?(l=this.head.data.slice(0,o),this.head.data=this.head.data.slice(o)):l=o===this.head.data.length?this.shift():h?this._getString(o):this._getBuffer(o),l}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(o){var h=this.head,l=1,p=h.data;for(o-=p.length;h=h.next;){var g=h.data,c=o>g.length?g.length:o;if(c===g.length?p+=g:p+=g.slice(0,o),(o-=c)===0){c===g.length?(++l,h.next?this.head=h.next:this.head=this.tail=null):(this.head=h,h.data=g.slice(c));break}++l}return this.length-=l,p}},{key:"_getBuffer",value:function(o){var h=u.allocUnsafe(o),l=this.head,p=1;for(l.data.copy(h),o-=l.data.length;l=l.next;){var g=l.data,c=o>g.length?g.length:o;if(g.copy(h,h.length-o,0,c),(o-=c)===0){c===g.length?(++p,l.next?this.head=l.next:this.head=this.tail=null):(this.head=l,l.data=g.slice(c));break}++p}return this.length-=p,h}},{key:e,value:function(o,h){return i(this,function(l){for(var p=1;p<arguments.length;p++){var g=arguments[p]!=null?arguments[p]:{};p%2?_(Object(g),!0).forEach(function(c){f(l,c,g[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):_(Object(g)).forEach(function(c){Object.defineProperty(l,c,Object.getOwnPropertyDescriptor(g,c))})}return l}({},h,{depth:0,customInspect:!1}))}}])&&d(n.prototype,t),a}()},{buffer:17,util:16}],63:[function(A,z,L){(function(_){(function(){function f(i,e){u(i,e),d(i)}function d(i){i._writableState&&!i._writableState.emitClose||i._readableState&&!i._readableState.emitClose||i.emit("close")}function u(i,e){i.emit("error",e)}z.exports={destroy:function(i,e){var a=this,n=this._readableState&&this._readableState.destroyed,t=this._writableState&&this._writableState.destroyed;return n||t?(e?e(i):i&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,_.nextTick(u,this,i)):_.nextTick(u,this,i)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(i||null,function(o){!e&&o?a._writableState?a._writableState.errorEmitted?_.nextTick(d,a):(a._writableState.errorEmitted=!0,_.nextTick(f,a,o)):_.nextTick(f,a,o):e?(_.nextTick(d,a),e(o)):_.nextTick(d,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(i,e){var a=i._readableState,n=i._writableState;a&&a.autoDestroy||n&&n.autoDestroy?i.destroy(e):i.emit("error",e)}}}).call(this)}).call(this,A("_process"))},{_process:50}],64:[function(A,z,L){var _=A("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function f(){}z.exports=function d(u,i,e){if(typeof i=="function")return d(u,null,i);i||(i={}),e=function(x){var C=!1;return function(){if(!C){C=!0;for(var E=arguments.length,k=new Array(E),V=0;V<E;V++)k[V]=arguments[V];x.apply(this,k)}}}(e||f);var a=i.readable||i.readable!==!1&&u.readable,n=i.writable||i.writable!==!1&&u.writable,t=function(){u.writable||h()},o=u._writableState&&u._writableState.finished,h=function(){n=!1,o=!0,a||e.call(u)},l=u._readableState&&u._readableState.endEmitted,p=function(){a=!1,l=!0,n||e.call(u)},g=function(x){e.call(u,x)},c=function(){var x;return a&&!l?(u._readableState&&u._readableState.ended||(x=new _),e.call(u,x)):n&&!o?(u._writableState&&u._writableState.ended||(x=new _),e.call(u,x)):void 0},v=function(){u.req.on("finish",h)};return function(x){return x.setHeader&&typeof x.abort=="function"}(u)?(u.on("complete",h),u.on("abort",c),u.req?v():u.on("request",v)):n&&!u._writableState&&(u.on("end",t),u.on("close",t)),u.on("end",p),u.on("finish",h),i.error!==!1&&u.on("error",g),u.on("close",c),function(){u.removeListener("complete",h),u.removeListener("abort",c),u.removeListener("request",v),u.req&&u.req.removeListener("finish",h),u.removeListener("end",t),u.removeListener("close",t),u.removeListener("finish",h),u.removeListener("end",p),u.removeListener("error",g),u.removeListener("close",c)}}},{"../../../errors":55}],65:[function(A,z,L){z.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(A,z,L){var _,f=A("../../../errors").codes,d=f.ERR_MISSING_ARGS,u=f.ERR_STREAM_DESTROYED;function i(n){if(n)throw n}function e(n){n()}function a(n,t){return n.pipe(t)}z.exports=function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];var h,l=function(g){return g.length?typeof g[g.length-1]!="function"?i:g.pop():i}(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new d("streams");var p=t.map(function(g,c){var v=c<t.length-1;return function(x,C,E,k){k=function(y){var m=!1;return function(){m||(m=!0,y.apply(void 0,arguments))}}(k);var V=!1;x.on("close",function(){V=!0}),_===void 0&&(_=A("./end-of-stream")),_(x,{readable:C,writable:E},function(y){if(y)return k(y);V=!0,k()});var Q=!1;return function(y){if(!V&&!Q)return Q=!0,function(m){return m.setHeader&&typeof m.abort=="function"}(x)?x.abort():typeof x.destroy=="function"?x.destroy():void k(y||new u("pipe"))}}(g,v,c>0,function(x){h||(h=x),x&&p.forEach(e),v||(p.forEach(e),l(h))})});return t.reduce(a)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(A,z,L){var _=A("../../../errors").codes.ERR_INVALID_OPT_VALUE;z.exports={getHighWaterMark:function(f,d,u,i){var e=function(a,n,t){return a.highWaterMark!=null?a.highWaterMark:n?a[t]:null}(d,i,u);if(e!=null){if(!isFinite(e)||Math.floor(e)!==e||e<0)throw new _(i?u:"highWaterMark",e);return Math.floor(e)}return f.objectMode?16:16384}}},{"../../../errors":55}],68:[function(A,z,L){z.exports=A("events").EventEmitter},{events:22}],69:[function(A,z,L){(L=z.exports=A("./lib/_stream_readable.js")).Stream=L,L.Readable=L,L.Writable=A("./lib/_stream_writable.js"),L.Duplex=A("./lib/_stream_duplex.js"),L.Transform=A("./lib/_stream_transform.js"),L.PassThrough=A("./lib/_stream_passthrough.js"),L.finished=A("./lib/internal/streams/end-of-stream.js"),L.pipeline=A("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(A,z,L){z.exports=function(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("interval needed");var _;if(arguments.length>0){_=new Array(arguments.length-2);for(var f=0;f<_.length;f++)_[f]=arguments[f+2]}return new function(d,u,i){var e=this;this._callback=d,this._args=i,this._interval=setInterval(d,u,this._args),this.reschedule=function(a){a||(a=e._interval),e._interval&&clearInterval(e._interval),e._interval=setInterval(e._callback,a,e._args)},this.clear=function(){e._interval&&(clearInterval(e._interval),e._interval=void 0)},this.destroy=function(){e._interval&&clearInterval(e._interval),e._callback=void 0,e._interval=void 0,e._args=void 0}}(arguments[0],arguments[1],_)}},{}],71:[function(A,z,L){z.exports=A("./index.js")()},{"./index.js":72}],72:[function(A,z,L){(function(_){(function(){function f(d){return d instanceof _?_.from(d):new d.constructor(d.buffer.slice(),d.byteOffset,d.length)}z.exports=function(d){return(d=d||{}).circles?function(i){var e=[],a=[];return i.proto?function t(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,t);if(o instanceof Map)return new Map(n(Array.from(o),t));if(o instanceof Set)return new Set(n(Array.from(o),t));var h={};for(var l in e.push(o),a.push(h),o){var p=o[l];if(typeof p!="object"||p===null)h[l]=p;else if(p instanceof Date)h[l]=new Date(p);else if(p instanceof Map)h[l]=new Map(n(Array.from(p),t));else if(p instanceof Set)h[l]=new Set(n(Array.from(p),t));else if(ArrayBuffer.isView(p))h[l]=f(p);else{var g=e.indexOf(p);h[l]=g!==-1?a[g]:t(p)}}return e.pop(),a.pop(),h}:function t(o){if(typeof o!="object"||o===null)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return n(o,t);if(o instanceof Map)return new Map(n(Array.from(o),t));if(o instanceof Set)return new Set(n(Array.from(o),t));var h={};for(var l in e.push(o),a.push(h),o)if(Object.hasOwnProperty.call(o,l)!==!1){var p=o[l];if(typeof p!="object"||p===null)h[l]=p;else if(p instanceof Date)h[l]=new Date(p);else if(p instanceof Map)h[l]=new Map(n(Array.from(p),t));else if(p instanceof Set)h[l]=new Set(n(Array.from(p),t));else if(ArrayBuffer.isView(p))h[l]=f(p);else{var g=e.indexOf(p);h[l]=g!==-1?a[g]:t(p)}}return e.pop(),a.pop(),h};function n(t,o){for(var h=Object.keys(t),l=new Array(h.length),p=0;p<h.length;p++){var g=h[p],c=t[g];if(typeof c!="object"||c===null)l[g]=c;else if(c instanceof Date)l[g]=new Date(c);else if(ArrayBuffer.isView(c))l[g]=f(c);else{var v=e.indexOf(c);l[g]=v!==-1?a[v]:o(c)}}return l}}(d):d.proto?function i(e){if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return u(e,i);if(e instanceof Map)return new Map(u(Array.from(e),i));if(e instanceof Set)return new Set(u(Array.from(e),i));var a={};for(var n in e){var t=e[n];typeof t!="object"||t===null?a[n]=t:t instanceof Date?a[n]=new Date(t):t instanceof Map?a[n]=new Map(u(Array.from(t),i)):t instanceof Set?a[n]=new Set(u(Array.from(t),i)):ArrayBuffer.isView(t)?a[n]=f(t):a[n]=i(t)}return a}:function i(e){if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return u(e,i);if(e instanceof Map)return new Map(u(Array.from(e),i));if(e instanceof Set)return new Set(u(Array.from(e),i));var a={};for(var n in e)if(Object.hasOwnProperty.call(e,n)!==!1){var t=e[n];typeof t!="object"||t===null?a[n]=t:t instanceof Date?a[n]=new Date(t):t instanceof Map?a[n]=new Map(u(Array.from(t),i)):t instanceof Set?a[n]=new Set(u(Array.from(t),i)):ArrayBuffer.isView(t)?a[n]=f(t):a[n]=i(t)}return a};function u(i,e){for(var a=Object.keys(i),n=new Array(a.length),t=0;t<a.length;t++){var o=a[t],h=i[o];typeof h!="object"||h===null?n[o]=h:h instanceof Date?n[o]=new Date(h):ArrayBuffer.isView(h)?n[o]=f(h):n[o]=e(h)}return n}}}).call(this)}).call(this,A("buffer").Buffer)},{buffer:17}],73:[function(A,z,L){var _=A("buffer"),f=_.Buffer;function d(i,e){for(var a in i)e[a]=i[a]}function u(i,e,a){return f(i,e,a)}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?z.exports=_:(d(_,L),L.Buffer=u),u.prototype=Object.create(f.prototype),d(f,u),u.from=function(i,e,a){if(typeof i=="number")throw new TypeError("Argument must not be a number");return f(i,e,a)},u.alloc=function(i,e,a){if(typeof i!="number")throw new TypeError("Argument must be a number");var n=f(i);return e!==void 0?typeof a=="string"?n.fill(e,a):n.fill(e):n.fill(0),n},u.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return f(i)},u.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return _.SlowBuffer(i)}},{buffer:17}],74:[function(A,z,L){z.exports=function(_){var f=_._readableState;return f?f.objectMode||typeof _._duplexState=="number"?_.read():_.read((d=f,d.buffer.length?d.buffer.head?d.buffer.head.data.length:d.buffer[0].length:d.length)):null;var d}},{}],75:[function(A,z,L){var _=A("safe-buffer").Buffer,f=_.isEncoding||function(l){switch((l=""+l)&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(l){var p;switch(this.encoding=function(g){var c=function(v){if(!v)return"utf8";for(var x;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(x)return;v=(""+v).toLowerCase(),x=!0}}(g);if(typeof c!="string"&&(_.isEncoding===f||!f(g)))throw new Error("Unknown encoding: "+g);return c||g}(l),this.encoding){case"utf16le":this.text=e,this.end=a,p=4;break;case"utf8":this.fillLast=i,p=4;break;case"base64":this.text=n,this.end=t,p=3;break;default:return this.write=o,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=_.allocUnsafe(p)}function u(l){return l<=127?0:l>>5==6?2:l>>4==14?3:l>>3==30?4:l>>6==2?-1:-2}function i(l){var p=this.lastTotal-this.lastNeed,g=function(c,v,x){if((192&v[0])!=128)return c.lastNeed=0,"�";if(c.lastNeed>1&&v.length>1){if((192&v[1])!=128)return c.lastNeed=1,"�";if(c.lastNeed>2&&v.length>2&&(192&v[2])!=128)return c.lastNeed=2,"�"}}(this,l);return g!==void 0?g:this.lastNeed<=l.length?(l.copy(this.lastChar,p,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(l.copy(this.lastChar,p,0,l.length),void(this.lastNeed-=l.length))}function e(l,p){if((l.length-p)%2==0){var g=l.toString("utf16le",p);if(g){var c=g.charCodeAt(g.length-1);if(c>=55296&&c<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",p,l.length-1)}function a(l){var p=l&&l.length?this.write(l):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return p+this.lastChar.toString("utf16le",0,g)}return p}function n(l,p){var g=(l.length-p)%3;return g===0?l.toString("base64",p):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",p,l.length-g))}function t(l){var p=l&&l.length?this.write(l):"";return this.lastNeed?p+this.lastChar.toString("base64",0,3-this.lastNeed):p}function o(l){return l.toString(this.encoding)}function h(l){return l&&l.length?this.write(l):""}L.StringDecoder=d,d.prototype.write=function(l){if(l.length===0)return"";var p,g;if(this.lastNeed){if((p=this.fillLast(l))===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<l.length?p?p+this.text(l,g):this.text(l,g):p||""},d.prototype.end=function(l){var p=l&&l.length?this.write(l):"";return this.lastNeed?p+"�":p},d.prototype.text=function(l,p){var g=function(v,x,C){var E=x.length-1;if(E<C)return 0;var k=u(x[E]);return k>=0?(k>0&&(v.lastNeed=k-1),k):--E<C||k===-2?0:(k=u(x[E]))>=0?(k>0&&(v.lastNeed=k-2),k):--E<C||k===-2?0:(k=u(x[E]))>=0?(k>0&&(k===2?k=0:v.lastNeed=k-3),k):0}(this,l,p);if(!this.lastNeed)return l.toString("utf8",p);this.lastTotal=g;var c=l.length-(g-this.lastNeed);return l.copy(this.lastChar,0,c),l.toString("utf8",p,c)},d.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length}},{"safe-buffer":73}],76:[function(A,z,L){var _=A("punycode"),f=A("./util");function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}L.parse=x,L.resolve=function(C,E){return x(C,!1,!0).resolve(E)},L.resolveObject=function(C,E){return C?x(C,!1,!0).resolveObject(E):E},L.format=function(C){return f.isString(C)&&(C=x(C)),C instanceof d?C.format():d.prototype.format.call(C)},L.Url=d;var u=/^([a-z0-9.+-]+:)/i,i=/:[0-9]*$/,e=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r",`
`,"	"]),n=["'"].concat(a),t=["%","/","?",";","#"].concat(n),o=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,l=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,p={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},c={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=A("querystring");function x(C,E,k){if(C&&f.isObject(C)&&C instanceof d)return C;var V=new d;return V.parse(C,E,k),V}d.prototype.parse=function(C,E,k){if(!f.isString(C))throw new TypeError("Parameter 'url' must be a string, not "+typeof C);var V=C.indexOf("?"),Q=V!==-1&&V<C.indexOf("#")?"?":"#",y=C.split(Q);y[0]=y[0].replace(/\\/g,"/");var m=C=y.join(Q);if(m=m.trim(),!k&&C.split("#").length===1){var S=e.exec(m);if(S)return this.path=m,this.href=m,this.pathname=S[1],S[2]?(this.search=S[2],this.query=E?v.parse(this.search.substr(1)):this.search.substr(1)):E&&(this.search="",this.query={}),this}var w=u.exec(m);if(w){var I=(w=w[0]).toLowerCase();this.protocol=I,m=m.substr(w.length)}if(k||w||m.match(/^\/\/[^@\/]+@[^@\/]+/)){var N=m.substr(0,2)==="//";!N||w&&g[w]||(m=m.substr(2),this.slashes=!0)}if(!g[w]&&(N||w&&!c[w])){for(var D,M,P=-1,O=0;O<o.length;O++)(R=m.indexOf(o[O]))!==-1&&(P===-1||R<P)&&(P=R);for((M=P===-1?m.lastIndexOf("@"):m.lastIndexOf("@",P))!==-1&&(D=m.slice(0,M),m=m.slice(M+1),this.auth=decodeURIComponent(D)),P=-1,O=0;O<t.length;O++){var R;(R=m.indexOf(t[O]))!==-1&&(P===-1||R<P)&&(P=R)}P===-1&&(P=m.length),this.host=m.slice(0,P),m=m.slice(P),this.parseHost(),this.hostname=this.hostname||"";var B=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!B)for(var U=this.hostname.split(/\./),H=(O=0,U.length);O<H;O++){var F=U[O];if(F&&!F.match(h)){for(var W="",K=0,G=F.length;K<G;K++)F.charCodeAt(K)>127?W+="x":W+=F[K];if(!W.match(h)){var r=U.slice(0,O),s=U.slice(O+1),b=F.match(l);b&&(r.push(b[1]),s.unshift(b[2])),s.length&&(m="/"+s.join(".")+m),this.hostname=r.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),B||(this.hostname=_.toASCII(this.hostname));var T=this.port?":"+this.port:"",j=this.hostname||"";this.host=j+T,this.href+=this.host,B&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),m[0]!=="/"&&(m="/"+m))}if(!p[I])for(O=0,H=n.length;O<H;O++){var q=n[O];if(m.indexOf(q)!==-1){var $=encodeURIComponent(q);$===q&&($=escape(q)),m=m.split(q).join($)}}var Z=m.indexOf("#");Z!==-1&&(this.hash=m.substr(Z),m=m.slice(0,Z));var Y=m.indexOf("?");if(Y!==-1?(this.search=m.substr(Y),this.query=m.substr(Y+1),E&&(this.query=v.parse(this.query)),m=m.slice(0,Y)):E&&(this.search="",this.query={}),m&&(this.pathname=m),c[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){T=this.pathname||"";var ee=this.search||"";this.path=T+ee}return this.href=this.format(),this},d.prototype.format=function(){var C=this.auth||"";C&&(C=(C=encodeURIComponent(C)).replace(/%3A/i,":"),C+="@");var E=this.protocol||"",k=this.pathname||"",V=this.hash||"",Q=!1,y="";this.host?Q=C+this.host:this.hostname&&(Q=C+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(Q+=":"+this.port)),this.query&&f.isObject(this.query)&&Object.keys(this.query).length&&(y=v.stringify(this.query));var m=this.search||y&&"?"+y||"";return E&&E.substr(-1)!==":"&&(E+=":"),this.slashes||(!E||c[E])&&Q!==!1?(Q="//"+(Q||""),k&&k.charAt(0)!=="/"&&(k="/"+k)):Q||(Q=""),V&&V.charAt(0)!=="#"&&(V="#"+V),m&&m.charAt(0)!=="?"&&(m="?"+m),E+Q+(k=k.replace(/[?#]/g,function(S){return encodeURIComponent(S)}))+(m=m.replace("#","%23"))+V},d.prototype.resolve=function(C){return this.resolveObject(x(C,!1,!0)).format()},d.prototype.resolveObject=function(C){if(f.isString(C)){var E=new d;E.parse(C,!1,!0),C=E}for(var k=new d,V=Object.keys(this),Q=0;Q<V.length;Q++){var y=V[Q];k[y]=this[y]}if(k.hash=C.hash,C.href==="")return k.href=k.format(),k;if(C.slashes&&!C.protocol){for(var m=Object.keys(C),S=0;S<m.length;S++){var w=m[S];w!=="protocol"&&(k[w]=C[w])}return c[k.protocol]&&k.hostname&&!k.pathname&&(k.path=k.pathname="/"),k.href=k.format(),k}if(C.protocol&&C.protocol!==k.protocol){if(!c[C.protocol]){for(var I=Object.keys(C),N=0;N<I.length;N++){var D=I[N];k[D]=C[D]}return k.href=k.format(),k}if(k.protocol=C.protocol,C.host||g[C.protocol])k.pathname=C.pathname;else{for(var M=(C.pathname||"").split("/");M.length&&!(C.host=M.shift()););C.host||(C.host=""),C.hostname||(C.hostname=""),M[0]!==""&&M.unshift(""),M.length<2&&M.unshift(""),k.pathname=M.join("/")}if(k.search=C.search,k.query=C.query,k.host=C.host||"",k.auth=C.auth,k.hostname=C.hostname||C.host,k.port=C.port,k.pathname||k.search){var P=k.pathname||"",O=k.search||"";k.path=P+O}return k.slashes=k.slashes||C.slashes,k.href=k.format(),k}var R=k.pathname&&k.pathname.charAt(0)==="/",B=C.host||C.pathname&&C.pathname.charAt(0)==="/",U=B||R||k.host&&C.pathname,H=U,F=k.pathname&&k.pathname.split("/")||[],W=(M=C.pathname&&C.pathname.split("/")||[],k.protocol&&!c[k.protocol]);if(W&&(k.hostname="",k.port=null,k.host&&(F[0]===""?F[0]=k.host:F.unshift(k.host)),k.host="",C.protocol&&(C.hostname=null,C.port=null,C.host&&(M[0]===""?M[0]=C.host:M.unshift(C.host)),C.host=null),U=U&&(M[0]===""||F[0]==="")),B)k.host=C.host||C.host===""?C.host:k.host,k.hostname=C.hostname||C.hostname===""?C.hostname:k.hostname,k.search=C.search,k.query=C.query,F=M;else if(M.length)F||(F=[]),F.pop(),F=F.concat(M),k.search=C.search,k.query=C.query;else if(!f.isNullOrUndefined(C.search))return W&&(k.hostname=k.host=F.shift(),(b=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=b.shift(),k.host=k.hostname=b.shift())),k.search=C.search,k.query=C.query,f.isNull(k.pathname)&&f.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.href=k.format(),k;if(!F.length)return k.pathname=null,k.search?k.path="/"+k.search:k.path=null,k.href=k.format(),k;for(var K=F.slice(-1)[0],G=(k.host||C.host||F.length>1)&&(K==="."||K==="..")||K==="",r=0,s=F.length;s>=0;s--)(K=F[s])==="."?F.splice(s,1):K===".."?(F.splice(s,1),r++):r&&(F.splice(s,1),r--);if(!U&&!H)for(;r--;r)F.unshift("..");!U||F[0]===""||F[0]&&F[0].charAt(0)==="/"||F.unshift(""),G&&F.join("/").substr(-1)!=="/"&&F.push("");var b,T=F[0]===""||F[0]&&F[0].charAt(0)==="/";return W&&(k.hostname=k.host=T?"":F.length?F.shift():"",(b=!!(k.host&&k.host.indexOf("@")>0)&&k.host.split("@"))&&(k.auth=b.shift(),k.host=k.hostname=b.shift())),(U=U||k.host&&F.length)&&!T&&F.unshift(""),F.length?k.pathname=F.join("/"):(k.pathname=null,k.path=null),f.isNull(k.pathname)&&f.isNull(k.search)||(k.path=(k.pathname?k.pathname:"")+(k.search?k.search:"")),k.auth=C.auth||k.auth,k.slashes=k.slashes||C.slashes,k.href=k.format(),k},d.prototype.parseHost=function(){var C=this.host,E=i.exec(C);E&&((E=E[0])!==":"&&(this.port=E.substr(1)),C=C.substr(0,C.length-E.length)),C&&(this.hostname=C)}},{"./util":77,punycode:51,querystring:54}],77:[function(A,z,L){z.exports={isString:function(_){return typeof _=="string"},isObject:function(_){return typeof _=="object"&&_!==null},isNull:function(_){return _===null},isNullOrUndefined:function(_){return _==null}}},{}],78:[function(A,z,L){(function(_){(function(){function f(d){try{if(!_.localStorage)return!1}catch{return!1}var u=_.localStorage[d];return u!=null&&String(u).toLowerCase()==="true"}z.exports=function(d,u){if(f("noDeprecation"))return d;var i=!1;return function(){if(!i){if(f("throwDeprecation"))throw new Error(u);f("traceDeprecation")?console.trace(u):console.warn(u),i=!0}return d.apply(this,arguments)}}}).call(this)}).call(this,typeof ce<"u"?ce:typeof self<"u"?self:typeof window<"u"?window:{})},{}],79:[function(A,z,L){z.exports=function _(f,d){if(f&&d)return _(f)(d);if(typeof f!="function")throw new TypeError("need wrapper function");return Object.keys(f).forEach(function(i){u[i]=f[i]}),u;function u(){for(var i=new Array(arguments.length),e=0;e<i.length;e++)i[e]=arguments[e];var a=f.apply(this,i),n=i[i.length-1];return typeof a=="function"&&a!==n&&Object.keys(n).forEach(function(t){a[t]=n[t]}),a}}},{}],80:[function(A,z,L){z.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(A,z,L){z.exports=function(){for(var f={},d=0;d<arguments.length;d++){var u=arguments[d];for(var i in u)_.call(u,i)&&(f[i]=u[i])}return f};var _=Object.prototype.hasOwnProperty},{}],82:[function(A,z,L){z.exports=function(_){_.prototype[Symbol.iterator]=function*(){for(let f=this.head;f;f=f.next)yield f.value}}},{}],83:[function(A,z,L){function _(e){var a=this;if(a instanceof _||(a=new _),a.tail=null,a.head=null,a.length=0,e&&typeof e.forEach=="function")e.forEach(function(o){a.push(o)});else if(arguments.length>0)for(var n=0,t=arguments.length;n<t;n++)a.push(arguments[n]);return a}function f(e,a,n){var t=a===e.head?new i(n,null,a,e):new i(n,a,a.next,e);return t.next===null&&(e.tail=t),t.prev===null&&(e.head=t),e.length++,t}function d(e,a){e.tail=new i(a,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function u(e,a){e.head=new i(a,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function i(e,a,n,t){if(!(this instanceof i))return new i(e,a,n,t);this.list=t,this.value=e,a?(a.next=this,this.prev=a):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}z.exports=_,_.Node=i,_.create=_,_.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var a=e.next,n=e.prev;return a&&(a.prev=n),n&&(n.next=a),e===this.head&&(this.head=a),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,a},_.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var a=this.head;e.list=this,e.next=a,a&&(a.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},_.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var a=this.tail;e.list=this,e.prev=a,a&&(a.next=e),this.tail=e,this.head||(this.head=e),this.length++}},_.prototype.push=function(){for(var e=0,a=arguments.length;e<a;e++)d(this,arguments[e]);return this.length},_.prototype.unshift=function(){for(var e=0,a=arguments.length;e<a;e++)u(this,arguments[e]);return this.length},_.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},_.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},_.prototype.forEach=function(e,a){a=a||this;for(var n=this.head,t=0;n!==null;t++)e.call(a,n.value,t,this),n=n.next},_.prototype.forEachReverse=function(e,a){a=a||this;for(var n=this.tail,t=this.length-1;n!==null;t--)e.call(a,n.value,t,this),n=n.prev},_.prototype.get=function(e){for(var a=0,n=this.head;n!==null&&a<e;a++)n=n.next;if(a===e&&n!==null)return n.value},_.prototype.getReverse=function(e){for(var a=0,n=this.tail;n!==null&&a<e;a++)n=n.prev;if(a===e&&n!==null)return n.value},_.prototype.map=function(e,a){a=a||this;for(var n=new _,t=this.head;t!==null;)n.push(e.call(a,t.value,this)),t=t.next;return n},_.prototype.mapReverse=function(e,a){a=a||this;for(var n=new _,t=this.tail;t!==null;)n.push(e.call(a,t.value,this)),t=t.prev;return n},_.prototype.reduce=function(e,a){var n,t=this.head;if(arguments.length>1)n=a;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");t=this.head.next,n=this.head.value}for(var o=0;t!==null;o++)n=e(n,t.value,o),t=t.next;return n},_.prototype.reduceReverse=function(e,a){var n,t=this.tail;if(arguments.length>1)n=a;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");t=this.tail.prev,n=this.tail.value}for(var o=this.length-1;t!==null;o--)n=e(n,t.value,o),t=t.prev;return n},_.prototype.toArray=function(){for(var e=new Array(this.length),a=0,n=this.head;n!==null;a++)e[a]=n.value,n=n.next;return e},_.prototype.toArrayReverse=function(){for(var e=new Array(this.length),a=0,n=this.tail;n!==null;a++)e[a]=n.value,n=n.prev;return e},_.prototype.slice=function(e,a){(a=a||this.length)<0&&(a+=this.length),(e=e||0)<0&&(e+=this.length);var n=new _;if(a<e||a<0)return n;e<0&&(e=0),a>this.length&&(a=this.length);for(var t=0,o=this.head;o!==null&&t<e;t++)o=o.next;for(;o!==null&&t<a;t++,o=o.next)n.push(o.value);return n},_.prototype.sliceReverse=function(e,a){(a=a||this.length)<0&&(a+=this.length),(e=e||0)<0&&(e+=this.length);var n=new _;if(a<e||a<0)return n;e<0&&(e=0),a>this.length&&(a=this.length);for(var t=this.length,o=this.tail;o!==null&&t>a;t--)o=o.prev;for(;o!==null&&t>e;t--,o=o.prev)n.push(o.value);return n},_.prototype.splice=function(e,a,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var t=0,o=this.head;o!==null&&t<e;t++)o=o.next;var h=[];for(t=0;o&&t<a;t++)h.push(o.value),o=this.removeNode(o);for(o===null&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),t=0;t<n.length;t++)o=f(this,o,n[t]);return h},_.prototype.reverse=function(){for(var e=this.head,a=this.tail,n=e;n!==null;n=n.prev){var t=n.prev;n.prev=n.next,n.next=t}return this.head=a,this.tail=e,this};try{A("./iterator.js")(_)}catch{}},{"./iterator.js":82}]},{},[12])(12)})})(Oe);var Zt=Oe.exports;var pe;let Jt={port:443,clientId:"web_"+Math.random().toString(16).substring(2,8),reconnectPeriod:5e3,connectTimeout:10*1e3,clean:2};const Xt={data(){return{qcur:"",mqtt:!1}},created(){let X="login/"+Math.random().toString(16).substring(2);this.qcur=`/tolinks/user/webQc?topic=${X}`,this.mqttConnect(X)},beforeDestroy(){pe.end(),pe=null},methods:{mqttConnect(X){let re=this;pe=Zt.connect("wss://agi.ylsap.com/mqtt",Jt),pe.on("connect",function(){pe.subscribe(X,function(A){A?console.error({topic:"授权订阅失败"}):re.mqtt=!0})}),pe.on("close",()=>{this.mqtt=!1,console.warn("授权连接断开")}),pe.on("message",(A,z)=>{try{let L=JSON.parse(z.toString());if(L.code==200||L.token){let _=L.token;_=btoa(_),Be(_).then(f=>{f.code==200&&(this.$store.state.userInfo=f.data,this.$store.state.login=!0,this.$tips.open_L_A({msg:"登录成功",type:"success"}))}),this.$emit("hide")}else this.$tips.open_C_A({msg:L.msg,type:"error"})}catch(L){console.error(L)}})}}},er=X=>(_e("data-v-6b5e3bda"),X=X(),we(),X),tr={class:"login_C"},rr=["src"],nr=er(()=>J("div",{class:"text"},"扫码快速登录",-1));function ir(X,re,A,z,L,_){return oe(),se("div",tr,[L.mqtt?(oe(),se("img",{key:0,class:"wxAppQc",src:L.qcur,alt:"伊莉思 小程序登录码"},null,8,rr)):he("",!0),nr])}const or=me(Xt,[["render",ir],["__scopeId","data-v-6b5e3bda"]]),sr=""+new URL("../img/logo4.png",import.meta.url).href;const ar={name:"popup",props:{showView:{type:Boolean,default:!1}},data(){return{remove:!0,isShow:!1,listType:0,email:""}},components:{Package:mt,introduce:St,emaillogin:Yt,loginQc:or},computed:{fragmentStr(){return X=>X.substring(X.length-6)}},mounted(){this.init()},methods:{init(){this.showView?this.show():this.close()},show(){if(this.remove){this.remove=!1;let X=setTimeout(()=>{this.isShow=!0,clearTimeout(X)},300)}},close(){if(this.isShow){this.isShow=!1;let X=setTimeout(()=>{this.remove=!0,clearTimeout(X)},100)}},switchList(X){this.listType=X}}},ge=X=>(_e("data-v-39bc1715"),X=X(),we(),X),lr=["onClick"],ur={class:"content right-layout"},cr={class:"login"},hr=ge(()=>J("img",{class:"G_logo_1",src:sr,alt:"YLSAGI logo"},null,-1)),fr={class:"totNav"},pr={class:"switchLogin"},dr=ge(()=>J("div",{class:"iconfont icon-youjian"},null,-1)),gr=ge(()=>J("div",null,"邮箱登录",-1)),mr=[dr,gr],yr=ge(()=>J("div",{class:"iconfont icon-jiedianweixin"},null,-1)),br=ge(()=>J("div",null,"扫码登录",-1)),vr=[yr,br],_r=ge(()=>J("div",{class:"iconfont icon-guanbi"},null,-1)),wr=[_r],kr=ge(()=>J("div",{class:"agreement"},[J("a",{href:"/cookies",target:"_blank"},"Cookies"),J("a",{href:"/ServicePolicy",target:"_blank"},"服务说明"),J("a",{href:"/PrivacyPolicy",target:"_blank"},"隐私条款")],-1));function Sr(X,re,A,z,L,_){const f=ke("introduce"),d=ke("emaillogin"),u=ke("loginQc");return oe(),se("div",null,[L.remove?he("",!0):(oe(),se("div",{key:0,class:"mask",onClick:re[3]||(re[3]=(...i)=>_.close&&_.close(...i))},[L.remove==!1?(oe(),se("div",{key:0,class:ye(["element",{viewhide:!L.isShow}]),onClick:Ne(i=>null,["stop"])},[je(f),J("div",ur,[J("div",cr,[hr,J("div",fr,[J("div",pr,[J("div",{class:ye(["sbtn",{"sbtn-light":L.listType==0}]),onClick:re[0]||(re[0]=i=>_.switchList(0))},mr,2),J("div",{class:ye(["sbtn",{"sbtn-light":L.listType==1}]),onClick:re[1]||(re[1]=i=>_.switchList(1))},vr,2)]),J("div",{class:"cancelBtn",onClick:re[2]||(re[2]=(...i)=>_.close&&_.close(...i))},wr)]),L.listType==0?(oe(),Ae(d,{key:0,onHide:_.close},null,8,["onHide"])):he("",!0),L.listType==1?(oe(),Ae(u,{key:1,onHide:_.close},null,8,["onHide"])):he("",!0),kr])])],10,lr)):he("",!0)]))])}const Ar=me(ar,[["render",Sr],["__scopeId","data-v-39bc1715"]]);export{xr as C,Ar as l};
