import{_ as n,u as _,P as l,V as r,o as d,c as p,p as u,f,a as t,W as g}from"./index-62894255.js";import{T as h}from"./index-4bbdde0f.js";import"./_commonjsHelpers-042e6b4d.js";const w=o=>(u("data-v-03535d1f"),o=o(),f(),o),m={class:"page"},v=w(()=>t("div",{class:"logoView"},[t("img",{class:"logo",src:g,alt:"ylsagi logo"}),t("div",{class:"text"},"获取授权中(自动跳转)")],-1)),b=[v],x={__name:"login",setup(o){_({attribute:"class",disableTransition:!1});const e=new h({authorizerURL:"https://auth.ylsagi.io",redirectURL:window.location.origin+"/login",clientID:"5061d570-6d2f-4937-a235-300dbd76b7fb"});l(()=>{a()});async function a(){const{data:s,errors:i}=await e.getSession();if(s){let{status:c}=await r({access_token:s.access_token});c=="success"?(await e.logout(),window.location.href="/"):console.error("登录失败")}else window.location.href="/"}return(s,i)=>(d(),p("div",m,b))}},S=n(x,[["__scopeId","data-v-03535d1f"]]);export{S as default};
