import{_ as n,u as _,P as l,X as r,o as d,c as p,p as u,d as g,a as t,Y as f}from"./index-4fc00eab.js";import{T as h}from"./index-73773a44.js";import"./_commonjsHelpers-de833af9.js";const w=o=>(u("data-v-a2b0b18c"),o=o(),g(),o),b={class:"page"},m=w(()=>t("div",{class:"logoView"},[t("img",{class:"logo",src:f,alt:"ylsagi logo"}),t("div",{class:"text"},"获取授权中(自动跳转)")],-1)),v=[m],x={__name:"login",setup(o){_({attribute:"class",disableTransition:!1});const e=new h({authorizerURL:"https://auth.ylsagi.io",redirectURL:window.location.origin+"/login",clientID:"5061d570-6d2f-4937-a235-300dbd76b7fb"});l(()=>{a()});async function a(){const{data:s,errors:i}=await e.getSession();if(s){let{status:c}=await r({access_token:s.access_token});c=="success"?(await e.logout(),window.location.href="/"):console.error("登录失败")}else window.location.href="/"}return(s,i)=>(d(),p("div",b,v))}},S=n(x,[["__scopeId","data-v-a2b0b18c"]]);export{S as default};
