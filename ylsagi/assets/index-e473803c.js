var oe=Object.defineProperty;var se=(n,r,s)=>r in n?oe(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s;var h=(n,r,s)=>(se(n,typeof r!="symbol"?r+"":r,s),s);import{c as L,a as ie}from"./_commonjsHelpers-23102255.js";var j={exports:{}};(function(n,r){var s=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof L<"u"&&L,i=function(){function a(){this.fetch=!1,this.DOMException=s.DOMException}return a.prototype=s,new a}();(function(a){(function(c){var y=typeof a<"u"&&a||typeof self<"u"&&self||typeof L<"u"&&L||{},g={searchParams:"URLSearchParams"in y,iterable:"Symbol"in y&&"iterator"in Symbol,blob:"FileReader"in y&&"Blob"in y&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in y,arrayBuffer:"ArrayBuffer"in y};function b(e){return e&&DataView.prototype.isPrototypeOf(e)}if(g.arrayBuffer)var O=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],G=ArrayBuffer.isView||function(e){return e&&O.indexOf(Object.prototype.toString.call(e))>-1};function T(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function B(e){return typeof e!="string"&&(e=String(e)),e}function P(e){var o={next:function(){var l=e.shift();return{done:l===void 0,value:l}}};return g.iterable&&(o[Symbol.iterator]=function(){return o}),o}function p(e){this.map={},e instanceof p?e.forEach(function(o,l){this.append(l,o)},this):Array.isArray(e)?e.forEach(function(o){if(o.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+o.length);this.append(o[0],o[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(o){this.append(o,e[o])},this)}p.prototype.append=function(e,o){e=T(e),o=B(o);var l=this.map[e];this.map[e]=l?l+", "+o:o},p.prototype.delete=function(e){delete this.map[T(e)]},p.prototype.get=function(e){return e=T(e),this.has(e)?this.map[e]:null},p.prototype.has=function(e){return this.map.hasOwnProperty(T(e))},p.prototype.set=function(e,o){this.map[T(e)]=B(o)},p.prototype.forEach=function(e,o){for(var l in this.map)this.map.hasOwnProperty(l)&&e.call(o,this.map[l],l,this)},p.prototype.keys=function(){var e=[];return this.forEach(function(o,l){e.push(l)}),P(e)},p.prototype.values=function(){var e=[];return this.forEach(function(o){e.push(o)}),P(e)},p.prototype.entries=function(){var e=[];return this.forEach(function(o,l){e.push([l,o])}),P(e)},g.iterable&&(p.prototype[Symbol.iterator]=p.prototype.entries);function x(e){if(!e._noBody){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}}function H(e){return new Promise(function(o,l){e.onload=function(){o(e.result)},e.onerror=function(){l(e.error)}})}function W(e){var o=new FileReader,l=H(o);return o.readAsArrayBuffer(e),l}function X(e){var o=new FileReader,l=H(o),d=/charset=([A-Za-z0-9_-]+)/.exec(e.type),f=d?d[1]:"utf-8";return o.readAsText(e,f),l}function Z(e){for(var o=new Uint8Array(e),l=new Array(o.length),d=0;d<o.length;d++)l[d]=String.fromCharCode(o[d]);return l.join("")}function F(e){if(e.slice)return e.slice(0);var o=new Uint8Array(e.byteLength);return o.set(new Uint8Array(e)),o.buffer}function Q(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:g.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:g.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():g.arrayBuffer&&g.blob&&b(e)?(this._bodyArrayBuffer=F(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||G(e))?this._bodyArrayBuffer=F(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var e=x(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=x(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(g.blob)return this.blob().then(W);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var e=x(this);if(e)return e;if(this._bodyBlob)return X(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Z(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(ee)}),this.json=function(){return this.text().then(JSON.parse)},this}var K=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function Y(e){var o=e.toUpperCase();return K.indexOf(o)>-1?o:e}function v(e,o){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');o=o||{};var l=o.body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,o.headers||(this.headers=new p(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!l&&e._bodyInit!=null&&(l=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=o.credentials||this.credentials||"same-origin",(o.headers||!this.headers)&&(this.headers=new p(o.headers)),this.method=Y(o.method||this.method||"GET"),this.mode=o.mode||this.mode||null,this.signal=o.signal||this.signal||function(){if("AbortController"in y){var u=new AbortController;return u.signal}}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&l)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(l),(this.method==="GET"||this.method==="HEAD")&&(o.cache==="no-store"||o.cache==="no-cache")){var d=/([?&])_=[^&]*/;if(d.test(this.url))this.url=this.url.replace(d,"$1_="+new Date().getTime());else{var f=/\?/;this.url+=(f.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})};function ee(e){var o=new FormData;return e.trim().split("&").forEach(function(l){if(l){var d=l.split("="),f=d.shift().replace(/\+/g," "),u=d.join("=").replace(/\+/g," ");o.append(decodeURIComponent(f),decodeURIComponent(u))}}),o}function re(e){var o=new p,l=e.replace(/\r?\n[\t ]+/g," ");return l.split("\r").map(function(d){return d.indexOf(`
`)===0?d.substr(1,d.length):d}).forEach(function(d){var f=d.split(":"),u=f.shift().trim();if(u){var q=f.join(":").trim();try{o.append(u,q)}catch(D){console.warn("Response "+D.message)}}}),o}Q.call(v.prototype);function w(e,o){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(o||(o={}),this.type="default",this.status=o.status===void 0?200:o.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=o.statusText===void 0?"":""+o.statusText,this.headers=new p(o.headers),this.url=o.url||"",this._initBody(e)}Q.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new p(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var te=[301,302,303,307,308];w.redirect=function(e,o){if(te.indexOf(o)===-1)throw new RangeError("Invalid status code");return new w(null,{status:o,headers:{location:e}})},c.DOMException=y.DOMException;try{new c.DOMException}catch{c.DOMException=function(o,l){this.message=o,this.name=l;var d=Error(o);this.stack=d.stack},c.DOMException.prototype=Object.create(Error.prototype),c.DOMException.prototype.constructor=c.DOMException}function I(e,o){return new Promise(function(l,d){var f=new v(e,o);if(f.signal&&f.signal.aborted)return d(new c.DOMException("Aborted","AbortError"));var u=new XMLHttpRequest;function q(){u.abort()}u.onload=function(){var _={statusText:u.statusText,headers:re(u.getAllResponseHeaders()||"")};f.url.indexOf("file://")===0&&(u.status<200||u.status>599)?_.status=200:_.status=u.status,_.url="responseURL"in u?u.responseURL:_.headers.get("X-Request-URL");var R="response"in u?u.response:u.responseText;setTimeout(function(){l(new w(R,_))},0)},u.onerror=function(){setTimeout(function(){d(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){d(new TypeError("Network request timed out"))},0)},u.onabort=function(){setTimeout(function(){d(new c.DOMException("Aborted","AbortError"))},0)};function D(_){try{return _===""&&y.location.href?y.location.href:_}catch{return _}}if(u.open(f.method,D(f.url),!0),f.credentials==="include"?u.withCredentials=!0:f.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(g.blob?u.responseType="blob":g.arrayBuffer&&(u.responseType="arraybuffer")),o&&typeof o.headers=="object"&&!(o.headers instanceof p||y.Headers&&o.headers instanceof y.Headers)){var M=[];Object.getOwnPropertyNames(o.headers).forEach(function(_){M.push(T(_)),u.setRequestHeader(_,B(o.headers[_]))}),f.headers.forEach(function(_,R){M.indexOf(R)===-1&&u.setRequestHeader(R,_)})}else f.headers.forEach(function(_,R){u.setRequestHeader(R,_)});f.signal&&(f.signal.addEventListener("abort",q),u.onreadystatechange=function(){u.readyState===4&&f.signal.removeEventListener("abort",q)}),u.send(typeof f._bodyInit>"u"?null:f._bodyInit)})}return I.polyfill=!0,y.fetch||(y.fetch=I,y.Headers=p,y.Request=v,y.Response=w),c.Headers=p,c.Request=v,c.Response=w,c.fetch=I,Object.defineProperty(c,"__esModule",{value:!0}),c})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var t=s.fetch?s:i;r=t.fetch,r.default=t.fetch,r.fetch=t.fetch,r.Headers=t.Headers,r.Request=t.Request,r.Response=t.Response,n.exports=r})(j,j.exports);var ne=j.exports;const ae=ie(ne);var le=Object.defineProperty,m=(n,r)=>le(n,"name",{value:r,configurable:!0}),C;(function(n){n.Apple="apple",n.Github="github",n.Google="google",n.Facebook="facebook",n.LinkedIn="linkedin",n.Twitter="twitter",n.Microsoft="microsoft",n.Twitch="twitch",n.Roblox="roblox"})(C||(C={}));var $;(function(n){n.Code="code",n.Token="token"})($||($={}));var A=m(()=>typeof window<"u","hasWindow"),V=m(n=>{let r=n.trim();return r[r.length-1]==="/"&&(r=r.slice(0,-1)),r},"trimURL"),N=m(()=>A()?window.crypto||window.msCrypto:null,"getCrypto"),ue=m(()=>{let n=N();return n&&n.subtle||n.webkitSubtle},"getCryptoSubtle"),k=m(()=>{let n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",r="",s=N();return s&&Array.from(s.getRandomValues(new Uint8Array(43))).forEach(i=>r+=n[i%n.length]),r},"createRandomString"),E=m(n=>A()?btoa(n):Buffer.from(n).toString("base64"),"encode"),he=m(n=>Object.keys(n).filter(r=>typeof n[r]<"u").map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&"),"createQueryParams"),de=m(async n=>{let r=ue().digest({name:"SHA-256"},new TextEncoder().encode(n));return window.msCrypto?new Promise((s,i)=>{r.oncomplete=t=>{s(t.target.result)},r.onerror=t=>{i(t.error)},r.onabort=()=>{i(new Error("The digest operation was aborted"))}}):await r},"sha256"),ce=m(n=>{let r={"+":"-","/":"_","=":""};return n.replace(/[+/=]/g,s=>r[s])},"urlEncodeB64"),fe=m(n=>{let r=new Uint8Array(n);return ce(window.btoa(String.fromCharCode(...Array.from(r))))},"bufferToBase64UrlEncoded"),pe=m((n,r,s=60)=>new Promise((i,t)=>{let a=window.document.createElement("iframe");a.setAttribute("id","authorizer-iframe"),a.setAttribute("width","0"),a.setAttribute("height","0"),a.style.display="none";let c=m(()=>{window.document.body.contains(a)&&(window.document.body.removeChild(a),window.removeEventListener("message",g,!1))},"removeIframe"),y=setTimeout(()=>{c()},s*1e3),g=m(function(b){if(b.origin!==r||!b.data||!b.data.response)return;let O=b.source;O&&O.close(),b.data.response.error?t(b.data.response):i(b.data.response),clearTimeout(y),window.removeEventListener("message",g,!1),setTimeout(c,2*1e3)},"iframeEventHandler");window.addEventListener("message",g,!1),window.document.body.appendChild(a),a.setAttribute("src",n)}),"executeIframe"),z="id email email_verified given_name family_name middle_name nickname preferred_username picture signup_methods gender birthdate phone_number phone_number_verified roles created_at updated_at is_multi_factor_auth_enabled app_data",U=`message access_token expires_in refresh_token id_token should_show_email_otp_screen should_show_mobile_otp_screen should_show_totp_screen authenticator_scanner_image authenticator_secret authenticator_recovery_codes user { ${z} }`,S=m(()=>A()?window.fetch:ae,"getFetcher"),J=class{constructor(r){h(this,"config");h(this,"codeVerifier");h(this,"authorize",async r=>{if(!A())return this.errorResponse([new Error("this feature is only supported in browser")]);let s=["openid","profile","email"];r.use_refresh_token&&s.push("offline_access");let i={redirect_uri:this.config.redirectURL,response_mode:r.response_mode||"web_message",state:E(k()),nonce:E(k()),response_type:r.response_type,scope:s.join(" "),client_id:this.config.clientID};if(r.response_type===$.Code){this.codeVerifier=k();let a=await de(this.codeVerifier),c=fe(a);i.code_challenge=c}let t=`${this.config.authorizerURL}/authorize?${he(i)}`;if(i.response_mode!=="web_message")return window.location.replace(t),this.okResponse(void 0);try{let a=await pe(t,this.config.authorizerURL,60);if(r.response_type===$.Code){let c=await this.getToken({code:a.code});return c.errors.length?this.errorResponse(c.errors):this.okResponse(c.data)}return this.okResponse(a)}catch(a){return a.error&&window.location.replace(`${this.config.authorizerURL}/app?state=${E(JSON.stringify(this.config))}&redirect_uri=${this.config.redirectURL}`),this.errorResponse(a)}});h(this,"browserLogin",async()=>{try{let r=await this.getSession();return r.errors.length?this.errorResponse(r.errors):this.okResponse(r.data)}catch(r){return A()?(window.location.replace(`${this.config.authorizerURL}/app?state=${E(JSON.stringify(this.config))}&redirect_uri=${this.config.redirectURL}`),this.errorResponse(r)):{data:void 0,errors:[new Error("browserLogin is only supported for browsers")]}}});h(this,"forgotPassword",async r=>{var s;r.state||(r.state=E(k())),r.redirect_uri||(r.redirect_uri=this.config.redirectURL);try{let i=await this.graphqlQuery({query:"mutation forgotPassword($data: ForgotPasswordInput!) {	forgot_password(params: $data) { message should_show_mobile_otp_screen } }",variables:{data:r}});return(s=i==null?void 0:i.errors)!=null&&s.length?this.errorResponse(i.errors):this.okResponse(i==null?void 0:i.data.forgot_password)}catch(i){return this.errorResponse([i])}});h(this,"getMetaData",async()=>{var r;try{let s=await this.graphqlQuery({query:"query { meta { version client_id is_google_login_enabled is_facebook_login_enabled is_github_login_enabled is_linkedin_login_enabled is_apple_login_enabled is_twitter_login_enabled is_microsoft_login_enabled is_twitch_login_enabled is_roblox_login_enabled is_email_verification_enabled is_basic_authentication_enabled is_magic_link_login_enabled is_sign_up_enabled is_strong_password_enabled is_multi_factor_auth_enabled is_mobile_basic_authentication_enabled is_phone_verification_enabled } }"});return(r=s==null?void 0:s.errors)!=null&&r.length?this.errorResponse(s.errors):this.okResponse(s.data.meta)}catch(s){return this.errorResponse([s])}});h(this,"getProfile",async r=>{var s;try{let i=await this.graphqlQuery({query:`query {	profile { ${z} } }`,headers:r});return(s=i==null?void 0:i.errors)!=null&&s.length?this.errorResponse(i.errors):this.okResponse(i.data.profile)}catch(i){return this.errorResponse([i])}});h(this,"getSession",async(r,s)=>{var i,t;try{let a=await this.graphqlQuery({query:`query getSession($params: SessionQueryInput){session(params: $params) { ${U} } }`,headers:r,variables:{params:s}});return(i=a==null?void 0:a.errors)!=null&&i.length?this.errorResponse(a.errors):this.okResponse((t=a.data)==null?void 0:t.session)}catch(a){return this.errorResponse(a)}});h(this,"getToken",async r=>{if(r.grant_type||(r.grant_type="authorization_code"),r.grant_type==="refresh_token"&&!r.refresh_token)return this.errorResponse([new Error("Invalid refresh_token")]);if(r.grant_type==="authorization_code"&&!this.codeVerifier)return this.errorResponse([new Error("Invalid code verifier")]);let s={client_id:this.config.clientID,code:r.code||"",code_verifier:this.codeVerifier||"",grant_type:r.grant_type||"",refresh_token:r.refresh_token||""};try{let i=await S()(`${this.config.authorizerURL}/oauth/token`,{method:"POST",body:JSON.stringify(s),headers:{...this.config.extraHeaders},credentials:"include"}),t=await i.json();return i.status>=400?this.errorResponse([new Error(t.error_description||t.error)]):this.okResponse(t)}catch(i){return this.errorResponse(i)}});h(this,"login",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation login($data: LoginInput!) { login(params: $data) { ${U}}}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.login)}catch(t){return this.errorResponse([new Error(t)])}});h(this,"logout",async r=>{var s,i;try{let t=await this.graphqlQuery({query:" mutation { logout { message } } ",headers:r});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.response)}catch(t){return this.errorResponse([t])}});h(this,"magicLinkLogin",async r=>{var s,i;try{r.state||(r.state=E(k())),r.redirect_uri||(r.redirect_uri=this.config.redirectURL);let t=await this.graphqlQuery({query:`
					mutation magicLinkLogin($data: MagicLinkLoginInput!) { magic_link_login(params: $data) { message }}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.magic_link_login)}catch(t){return this.errorResponse([t])}});h(this,"oauthLogin",async(r,s,i,t)=>{let a=t;if(a||(a=E(k())),!Object.values(C).includes(r))throw new Error(`only following oauth providers are supported: ${Object.values(r).toString()}`);if(!A())throw new Error("oauthLogin is only supported for browsers");s&&s.length&&(a+=`&roles=${s.join(",")}`),window.location.replace(`${this.config.authorizerURL}/oauth_login/${r}?redirect_uri=${i||this.config.redirectURL}&state=${a}`)});h(this,"resendOtp",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation resendOtp($data: ResendOTPRequest!) { resend_otp(params: $data) { message }}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.resend_otp)}catch(t){return this.errorResponse([t])}});h(this,"resetPassword",async r=>{var s,i;try{let t=await this.graphqlQuery({query:"mutation resetPassword($data: ResetPasswordInput!) {	reset_password(params: $data) { message } }",variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.reset_password)}catch(t){return this.errorResponse([t])}});h(this,"revokeToken",async r=>{if(!r.refresh_token&&!r.refresh_token.trim())return this.errorResponse([new Error("Invalid refresh_token")]);let s=await(await S()(`${this.config.authorizerURL}/oauth/revoke`,{method:"POST",headers:{...this.config.extraHeaders},body:JSON.stringify({refresh_token:r.refresh_token,client_id:this.config.clientID})})).json();return this.okResponse(s)});h(this,"signup",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation signup($data: SignUpInput!) { signup(params: $data) { ${U}}}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.signup)}catch(t){return this.errorResponse([t])}});h(this,"updateProfile",async(r,s)=>{var i,t;try{let a=await this.graphqlQuery({query:"mutation updateProfile($data: UpdateProfileInput!) {	update_profile(params: $data) { message } }",headers:s,variables:{data:r}});return(i=a==null?void 0:a.errors)!=null&&i.length?this.errorResponse(a.errors):this.okResponse((t=a.data)==null?void 0:t.update_profile)}catch(a){return this.errorResponse([a])}});h(this,"deactivateAccount",async r=>{var s,i;try{let t=await this.graphqlQuery({query:"mutation deactivateAccount { deactivate_account { message } }",headers:r});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.deactivate_account)}catch(t){return this.errorResponse([t])}});h(this,"validateJWTToken",async r=>{var s,i;try{let t=await this.graphqlQuery({query:"query validateJWTToken($params: ValidateJWTTokenInput!){validate_jwt_token(params: $params) { is_valid claims } }",variables:{params:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.validate_jwt_token)}catch(t){return this.errorResponse([t])}});h(this,"validateSession",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`query validateSession($params: ValidateSessionInput){validate_session(params: $params) { is_valid user { ${z} } } }`,variables:{params:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.validate_session)}catch(t){return this.errorResponse([t])}});h(this,"verifyEmail",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation verifyEmail($data: VerifyEmailInput!) { verify_email(params: $data) { ${U}}}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.verify_email)}catch(t){return this.errorResponse([t])}});h(this,"resendVerifyEmail",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation resendVerifyEmail($data: ResendVerifyEmailInput!) { resend_verify_email(params: $data) { message }}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.verify_email)}catch(t){return this.errorResponse([t])}});h(this,"verifyOtp",async r=>{var s,i;try{let t=await this.graphqlQuery({query:`
					mutation verifyOtp($data: VerifyOTPRequest!) { verify_otp(params: $data) { ${U}}}
				`,variables:{data:r}});return(s=t==null?void 0:t.errors)!=null&&s.length?this.errorResponse(t.errors):this.okResponse((i=t.data)==null?void 0:i.verify_otp)}catch(t){return this.errorResponse([t])}});h(this,"graphqlQuery",async r=>{var s;let i=await(await S()(`${this.config.authorizerURL}/graphql`,{method:"POST",body:JSON.stringify({query:r.query,variables:r.variables||{}}),headers:{...this.config.extraHeaders,...r.headers||{}},credentials:"include"})).json();return(s=i==null?void 0:i.errors)!=null&&s.length?{data:void 0,errors:i.errors}:{data:i.data,errors:[]}});h(this,"errorResponse",r=>({data:void 0,errors:r}));h(this,"okResponse",r=>({data:r,errors:[]}));if(!r)throw new Error("Configuration is required");if(this.config=r,!r.authorizerURL&&!r.authorizerURL.trim())throw new Error("Invalid authorizerURL");if(r.authorizerURL&&(this.config.authorizerURL=V(r.authorizerURL)),!r.redirectURL&&!r.redirectURL.trim())throw new Error("Invalid redirectURL");this.config.redirectURL=V(r.redirectURL),this.config.extraHeaders={...r.extraHeaders||{},"x-authorizer-url":this.config.authorizerURL,"x-authorizer-client-id":this.config.clientID||"","Content-Type":"application/json"},this.config.clientID=r.clientID.trim()}};m(J,"Authorizer");var me=J;export{me as T};
