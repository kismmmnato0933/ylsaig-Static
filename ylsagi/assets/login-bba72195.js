import{_ as n,u as l,l as _,W as r,o as d,c as p,p as u,b as g,a as s,X as f}from"./index-3395b8f4.js";import{T as h}from"./index-f63eae91.js";import"./_commonjsHelpers-87174ba5.js";const w=o=>(u("data-v-62c26e1a"),o=o(),g(),o),m={class:"page"},v=w(()=>s("div",{class:"logoView"},[s("img",{class:"logo",src:f,alt:"ylsagi logo"}),s("div",{class:"text"},"获取授权中(自动跳转)")],-1)),b=[v],x={__name:"login",setup(o){l({attribute:"class",disableTransition:!1});const t=new h({authorizerURL:"https://auth.ylsagi.io",redirectURL:window.location.origin+"/login",clientID:"43a63597-ea46-47da-b6bd-105fe62f0dbe"});_(()=>{a()});async function a(){const{data:e,errors:i}=await t.getSession();if(e){let{status:c}=await r({access_token:e.access_token});c=="success"?(await t.logout(),window.location.href="/"):console.error("登录失败")}else window.location.href="/"}return(e,i)=>(d(),p("div",m,b))}},S=n(x,[["__scopeId","data-v-62c26e1a"]]);export{S as default};
